<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DUNE-DAQ: Intro and prerequisites</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DUNE-DAQ
   </div>
   <div id="projectbrief">DUNE Trigger and Data Acquisition software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Intro and prerequisites</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md70"></a>Always ensure that the selected motherboard, CPU and chipset combination is compatible with the FELIX card. If you are unsure, please get in touch with Upstream DAQ developers before you test with a potentially incompatible server. (The FELIX most probably won't work on desktop, but on server grade hardware environments.)</p>
<p>This documentation assumes that you are using an FLX-712 card, on a Linux CentOS 7 operating system. (Instructions might differ for BNL-711 and VC709 boards. Testing with CentOS 8 is ongoing, there is no stable release yet.)</p>
<h2><a class="anchor" id="autotoc_md71"></a>
Installation</h2>
<ol type="1">
<li>As presented in the <a href="https://atlas-project-felix.web.cern.ch/atlas-project-felix/user/felix-user-manual/versions/4.0.6/3_hardware_setup.html#subsec:bnl711install">User Manual's Card Installation section</a>, connect the FELIX-712 to a PCIe slot, which is at least Gen3 and x16.</li>
<li><b>Warning:</b> The card requires 12V auxiliary power, connected from either the power supply unit (PSU), or directly from the motherboard. This is typically the same cable that feeds power for GPUs. Always check your motherboard's user-manual, as many vendors have proprietary pinouts on the motherboard side!<ul>
<li>The Supermicro boards usually need this particular cable: SM CBL-PWEX-0665</li>
<li>Intel WolfPass (2600WF series) servers need GPU power cable: iPC â€“ AXXGPGPUCABLE</li>
<li>DELL PowerEdge R740 01YM03 servers need GPU power cable from the DELL GPU enablement kit (with mini MOLEX to motherboard).</li>
</ul>
</li>
<li>Start the machine, and after logging in, depending on the firmware loaded or flashed on the card, the device should be visible under <code>lspci</code>. One of the two commands should result with PCIe endpoints visible: <div class="fragment"><div class="line">lspci | grep Xilinx</div>
<div class="line">lspci | grep CERN </div>
</div><!-- fragment --> If there is no output, ensure the following: The card is powered correctly, there is a valid firmware flashed on the partitions.</li>
<li>In order to program a different firmware (e.g.: DUNE specific JumboBlocks/SuperChunks variant FULLMODE, that are discussed under the <a href="FELIX-assets.md#firmware_versions">FELIX Assets</a>) to the FELIX, connect the JTAG programmer to the card, and the USB side to a machine where you have Vivado Labs installed. (For further and in-depth description, please refer to the <a href="https://atlas-project-felix.web.cern.ch/atlas-project-felix/user/felix-user-manual/versions/4.0.6/4_firmware_programming.html#_4_2_firmware_programming">User Manual's Firmware Programming section</a>! The dunedaq FELIX dependency package is shipped with the <code>fflashprog</code> tool.) After programming, reboot the machine in order for the firmware in the volatile memory to load: <div class="fragment"><div class="line">reboot</div>
</div><!-- fragment --></li>
<li>The dunedaq FELIX dependency package comes with the local driver, which is favorable to be used. The details of that is discussed under the <a href="https://github.com/DUNE-DAQ/flxlibs/wiki/Local-driver">Local driver</a> readme. Installing the ATLAS TDAQ driver has a well detailed explanation under <a href="https://atlas-project-felix.web.cern.ch/atlas-project-felix/user/felix-user-manual/versions/4.0.6/5_software_installation.html#_5_2_1_driver_rpm_installation_instructions">User Manual's Driver Installation section</a> User Manual's Driver Installation section. Either of them needs <code>dkms</code> and <code>kernel-devel</code> installed on your system. The driver has 3 main kernel modules: <code>io_rcc</code>, <code>cmem_rcc</code> and <code>flx</code>. All three needs to show meaningful output, without errors, on the status output (see Local Driver doc).</li>
<li>Acquire the FELIX software suite with the appropriate version that is usable with your loaded firmware and driver, then ensure that low-level functionalities work as expected. One can use the <code>felix</code> DUNE DAQ external package that contains these low level tools. Preferably, acquire all the following tools' output:<ul>
<li>flx-info -c &lt;0 or 1&gt;</li>
<li>flx-init -c &lt;0 or 1&gt;</li>
<li>flx-dma-test </li>
</ul>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 24 2024 for DUNE-DAQ by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
