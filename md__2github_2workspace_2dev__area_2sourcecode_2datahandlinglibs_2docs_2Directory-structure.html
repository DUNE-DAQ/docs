<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DUNE-DAQ: Directory structure of this repo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DUNE-DAQ
   </div>
   <div id="projectbrief">DUNE Trigger and Data Acquisition software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Directory structure of this repo</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md37"></a>This repository is structured as follows:</p><ul>
<li><code>cmake</code></li>
<li><code>docs</code></li>
<li><code>include/datahandlinglibs</code><ul>
<li><code>concepts</code></li>
<li><code>models</code></li>
<li><code>utils</code></li>
</ul>
</li>
<li><code>schema/datahandlinglibs/opmon</code></li>
<li><code>scripts</code></li>
<li><code>test</code></li>
<li><code>unittest</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md38"></a>
Where to find the code</h1>
<p>The main code of the datahandlinglibs package is located in <code>include/datahandlinglibs</code>. This code is meant to be reusable by other packages. The goal is to have everything in <code>include/datahandlinglibs</code> in a generic form such that other frontends can be implemented with it. To do so, new frontend datatypes can be defined and the generic templated classes instantiated with them. The organisation of <code>include/datahandlinglibs</code> itself separates "concepts", "models" and "utils", each in subdirectories of the same names.</p>
<p>Concepts are interfaces or abstract classes. Their implementations are models in the nomenclature of this package. All models in <code>models</code> inherit from a class in <code>concepts</code>, and usually the names of the two classes are related. Readout facilities use the capabilities of generic concepts and can be instantiated (through the use of templating) with models that implement them. This makes it easy to implement new models with different properties that are necessary for different frontend types. A good example for this is the latency buffer which buffers raw data received from the frontend and provides it to the request handler that can look up chunks based on timestamps. The file <a href="https://github.com/DUNE-DAQ/datahandlinglibs/blob/develop/include/datahandlinglibs/concepts/LatencyBufferConcept.hpp"><code>LatencyBufferConcept.hpp</code></a> in <code>include/datahandlinglibs/concepts</code> defines some properties that have to be implemented, for example access to front and back or the ability to add and remove elements. There are several latency buffer implementations in <code>include/datahandlinglibs/models</code>. The different latency buffer implementations have different requirements for different frontend types. One uses a binary search and requires that the chunks which are written to it are already sorted, i.e. the timestamps of chunks only increase. The implementation can use this fact to make pushing and popping from the queue constant time operations and use a binary search to find and element for a given timestamp. If data can come in unordered, the skip list can be used as it can insert elements in any order. The tradeoff here is reduced performance.</p>
<p>When a readout unit is created, the models to use are defined and can be interchanged.</p>
<p><code>utils</code> contains code that provides functionality which is not directly related or exclusive to readout applications.</p>
<p><code>schema</code> contains the protobuf info structs for the operational monitoring.</p>
<h1><a class="anchor" id="autotoc_md39"></a>
Testing</h1>
<p><code>test</code> contains some standalone test applications. In <code>unittest</code> one can very unsurprisingly find unit tests. Lastly, <code>scripts/</code> contains code to do thread pinning of the application. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 24 2024 for DUNE-DAQ by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
