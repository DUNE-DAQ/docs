<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DUNE-DAQ: hdf5_dump.DAQDataFile Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DUNE-DAQ
   </div>
   <div id="projectbrief">DUNE Trigger and Data Acquisition software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehdf5__dump.html">hdf5_dump</a></li><li class="navelem"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html">DAQDataFile</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classhdf5__dump_1_1DAQDataFile-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">hdf5_dump.DAQDataFile Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile_1_1Record.html">Record</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a88201b6e2a200a7703783a9eae25f63d" id="r_a88201b6e2a200a7703783a9eae25f63d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#a88201b6e2a200a7703783a9eae25f63d">__init__</a> (self, <a class="el" href="classhdf5__dump_1_1DAQDataFile.html#a1d5a2bd7da0d48256998bc86403999cb">name</a>)</td></tr>
<tr class="separator:a88201b6e2a200a7703783a9eae25f63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb744e8e485f7431babe5c33301cfdd8" id="r_afb744e8e485f7431babe5c33301cfdd8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#afb744e8e485f7431babe5c33301cfdd8">__del__</a> (self)</td></tr>
<tr class="separator:afb744e8e485f7431babe5c33301cfdd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedeefb344b00196bfa2fc15d1e97b1ad" id="r_aedeefb344b00196bfa2fc15d1e97b1ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#aedeefb344b00196bfa2fc15d1e97b1ad">set_clock_speed_hz</a> (self, k_clock_speed_hz)</td></tr>
<tr class="separator:aedeefb344b00196bfa2fc15d1e97b1ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a908a4df2626c2fbe097b01c6ba77db34" id="r_a908a4df2626c2fbe097b01c6ba77db34"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#a908a4df2626c2fbe097b01c6ba77db34">convert_to_binary</a> (self, binary_file, k_nrecords)</td></tr>
<tr class="separator:a908a4df2626c2fbe097b01c6ba77db34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad7e9a8d23bcb729e0f40ebd096c1cf" id="r_a3ad7e9a8d23bcb729e0f40ebd096c1cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#a3ad7e9a8d23bcb729e0f40ebd096c1cf">printout</a> (self, k_header_type, k_nrecords, k_list_components=False)</td></tr>
<tr class="separator:a3ad7e9a8d23bcb729e0f40ebd096c1cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afab163ceb908e8774ca7a614b7228148" id="r_afab163ceb908e8774ca7a614b7228148"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#afab163ceb908e8774ca7a614b7228148">check_fragments</a> (self, k_nrecords)</td></tr>
<tr class="separator:afab163ceb908e8774ca7a614b7228148"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a1d5a2bd7da0d48256998bc86403999cb" id="r_a1d5a2bd7da0d48256998bc86403999cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#a1d5a2bd7da0d48256998bc86403999cb">name</a></td></tr>
<tr class="separator:a1d5a2bd7da0d48256998bc86403999cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58e8e30fc2d38b0515f3ee0af12c902e" id="r_a58e8e30fc2d38b0515f3ee0af12c902e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#a58e8e30fc2d38b0515f3ee0af12c902e">h5file</a></td></tr>
<tr class="separator:a58e8e30fc2d38b0515f3ee0af12c902e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d0fc171123c7152a160f262e92f4e93" id="r_a5d0fc171123c7152a160f262e92f4e93"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#a5d0fc171123c7152a160f262e92f4e93">record_type</a></td></tr>
<tr class="separator:a5d0fc171123c7152a160f262e92f4e93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab70514fe8e2224386bca376cdd531e67" id="r_ab70514fe8e2224386bca376cdd531e67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#ab70514fe8e2224386bca376cdd531e67">clock_speed_hz</a></td></tr>
<tr class="separator:ab70514fe8e2224386bca376cdd531e67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a684c069ffa9c9fde9ee6eb369971a7" id="r_a4a684c069ffa9c9fde9ee6eb369971a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhdf5__dump_1_1DAQDataFile.html#a4a684c069ffa9c9fde9ee6eb369971a7">records</a></td></tr>
<tr class="separator:a4a684c069ffa9c9fde9ee6eb369971a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00069">69</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a88201b6e2a200a7703783a9eae25f63d" name="a88201b6e2a200a7703783a9eae25f63d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88201b6e2a200a7703783a9eae25f63d">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00070">70</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   70</span>    <span class="keyword">def </span>__init__(self, name):</div>
<div class="line"><span class="lineno">   71</span>        self.name = name</div>
<div class="line"><span class="lineno">   72</span>        <span class="keywordflow">if</span> os.path.exists(self.name):</div>
<div class="line"><span class="lineno">   73</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   74</span>                self.h5file = h5py.File(self.name, <span class="stringliteral">&#39;r&#39;</span>)</div>
<div class="line"><span class="lineno">   75</span>            <span class="keywordflow">except</span> OSError:</div>
<div class="line"><span class="lineno">   76</span>                sys.exit(f<span class="stringliteral">&quot;ERROR: file \&quot;{self.name}\&quot; couldn&#39;t be opened; is it an HDF5 file?&quot;</span>)</div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   78</span>            sys.exit(f<span class="stringliteral">&quot;ERROR: HDF5 file \&quot;{self.name}\&quot; is not found!&quot;</span>)</div>
<div class="line"><span class="lineno">   79</span>        <span class="comment"># Assume HDf5 files without file attributes field &quot;record_type&quot;</span></div>
<div class="line"><span class="lineno">   80</span>        <span class="comment"># are old data files which only contain &quot;TriggerRecord&quot; data.</span></div>
<div class="line"><span class="lineno">   81</span>        self.record_type = <span class="stringliteral">&#39;TriggerRecord&#39;</span></div>
<div class="line"><span class="lineno">   82</span>        self.clock_speed_hz = 50000000.0</div>
<div class="line"><span class="lineno">   83</span>        self.records = []</div>
<div class="line"><span class="lineno">   84</span>        observed_filelayout_version = self.h5file.attrs[<span class="stringliteral">&#39;filelayout_version&#39;</span>]</div>
<div class="line"><span class="lineno">   85</span>        <span class="keywordflow">if</span> <span class="stringliteral">&#39;filelayout_version&#39;</span> <span class="keywordflow">in</span> self.h5file.attrs.keys() <span class="keywordflow">and</span> \</div>
<div class="line"><span class="lineno">   86</span>                observed_filelayout_version &gt;= FILELAYOUT_MIN_VERSION <span class="keywordflow">and</span> \</div>
<div class="line"><span class="lineno">   87</span>                observed_filelayout_version &lt;= FILELAYOUT_MAX_VERSION:</div>
<div class="line"><span class="lineno">   88</span>            print(f<span class="stringliteral">&quot;INFO: input file matches the supported file layout versions: {FILELAYOUT_MIN_VERSION} &lt;= {observed_filelayout_version} &lt;= {FILELAYOUT_MAX_VERSION}&quot;</span>)</div>
<div class="line"><span class="lineno">   89</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   90</span>            sys.exit(f<span class="stringliteral">&quot;ERROR: this script expects a file layout version {FILELAYOUT_VERSION} but this wasn&#39;t confirmed in the HDF5 file \&quot;{self.name}\&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">if</span> <span class="stringliteral">&#39;record_type&#39;</span> <span class="keywordflow">in</span> self.h5file.attrs.keys():</div>
<div class="line"><span class="lineno">   92</span>            self.record_type = self.h5file.attrs[<span class="stringliteral">&#39;record_type&#39;</span>]</div>
<div class="line"><span class="lineno">   93</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.h5file.keys():</div>
<div class="line"><span class="lineno">   94</span>            record = self.Record()</div>
<div class="line"><span class="lineno">   95</span>            record.path = i</div>
<div class="line"><span class="lineno">   96</span>            self.h5file[i].visititems(record)</div>
<div class="line"><span class="lineno">   97</span>            self.records.append(record)</div>
<div class="line"><span class="lineno">   98</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afb744e8e485f7431babe5c33301cfdd8" name="afb744e8e485f7431babe5c33301cfdd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb744e8e485f7431babe5c33301cfdd8">&#9670;&#160;</a></span>__del__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.__del__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00099">99</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   99</span>    <span class="keyword">def </span>__del__(self):</div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  101</span>            self.h5file.close()</div>
<div class="line"><span class="lineno">  102</span>        <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">  103</span>            <span class="keywordflow">pass</span>  <span class="comment"># OK if the file was never opened</span></div>
<div class="line"><span class="lineno">  104</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afab163ceb908e8774ca7a614b7228148" name="afab163ceb908e8774ca7a614b7228148"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afab163ceb908e8774ca7a614b7228148">&#9670;&#160;</a></span>check_fragments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.check_fragments </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k_nrecords</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00163">163</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  163</span>    <span class="keyword">def </span>check_fragments(self, k_nrecords):</div>
<div class="line"><span class="lineno">  164</span>        <span class="keywordflow">if</span> self.record_type != <span class="stringliteral">&quot;TriggerRecord&quot;</span>:</div>
<div class="line"><span class="lineno">  165</span>            print(<span class="stringliteral">&quot;Check fragments only works on TriggerRecord data.&quot;</span>)</div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  167</span>            report = []</div>
<div class="line"><span class="lineno">  168</span>            n = 0</div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.records:</div>
<div class="line"><span class="lineno">  170</span>                <span class="keywordflow">if</span> n &gt;= k_nrecords <span class="keywordflow">and</span> k_nrecords &gt; 0:</div>
<div class="line"><span class="lineno">  171</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  172</span>                dset = self.h5file[i.header]</div>
<div class="line"><span class="lineno">  173</span>                data_array = bytearray(dset[:])</div>
<div class="line"><span class="lineno">  174</span>                (trh_version, ) = struct.unpack(<span class="stringliteral">&#39;&lt;I&#39;</span>, data_array[4:8])</div>
<div class="line"><span class="lineno">  175</span>                <span class="keywordflow">if</span> trh_version != TRIGGER_RECORD_HEADER_VERSION:</div>
<div class="line"><span class="lineno">  176</span>                    <span class="keywordflow">raise</span> ValueError(f<span class="stringliteral">&quot;Invalid TriggerRecord Header format version: expected {TRIGGER_RECORD_HEADER_VERSION} and found {trh_version}&quot;</span>)</div>
<div class="line"><span class="lineno">  177</span>                (h, j, k) = struct.unpack(<span class="stringliteral">&#39;&lt;3Q&#39;</span>, data_array[8:32])</div>
<div class="line"><span class="lineno">  178</span>                (s, ) = struct.unpack(<span class="stringliteral">&#39;&lt;H&#39;</span>, data_array[48:50])</div>
<div class="line"><span class="lineno">  179</span>                nf = len(i.fragments)</div>
<div class="line"><span class="lineno">  180</span>                empty_frag_count = 0</div>
<div class="line"><span class="lineno">  181</span>                <span class="keywordflow">for</span> frag <span class="keywordflow">in</span> i.fragments:</div>
<div class="line"><span class="lineno">  182</span>                    frag_dset = self.h5file[frag]</div>
<div class="line"><span class="lineno">  183</span>                    frag_data = bytearray(frag_dset[:])</div>
<div class="line"><span class="lineno">  184</span>                    (frag_version, ) = struct.unpack(<span class="stringliteral">&#39;&lt;I&#39;</span>, frag_data[4:8])</div>
<div class="line"><span class="lineno">  185</span>                    <span class="keywordflow">if</span> frag_version != FRAGMENT_HEADER_VERSION:</div>
<div class="line"><span class="lineno">  186</span>                        <span class="keywordflow">raise</span> ValueError(f<span class="stringliteral">&quot;Invalid Fragment Header format version: expected {FRAGMENT_HEADER_VERSION} and found {frag_version}&quot;</span>)</div>
<div class="line"><span class="lineno">  187</span>                    (frag_size, ) = struct.unpack(<span class="stringliteral">&#39;&lt;Q&#39;</span>, frag_data[8:16])</div>
<div class="line"><span class="lineno">  188</span>                    <span class="keywordflow">if</span> frag_size &lt;= 72:</div>
<div class="line"><span class="lineno">  189</span>                        empty_frag_count += 1</div>
<div class="line"><span class="lineno">  190</span>                report.append((h, s, k, nf, nf - k, empty_frag_count))</div>
<div class="line"><span class="lineno">  191</span>                n += 1</div>
<div class="line"><span class="lineno">  192</span>            print(<span class="stringliteral">&quot;{:-^80}&quot;</span>.format(<span class="stringliteral">&quot;Column Definitions&quot;</span>))</div>
<div class="line"><span class="lineno">  193</span>            print(<span class="stringliteral">&quot;i:            Trigger record number;&quot;</span>)</div>
<div class="line"><span class="lineno">  194</span>            print(<span class="stringliteral">&quot;s:            Sequence number;&quot;</span>)</div>
<div class="line"><span class="lineno">  195</span>            print(<span class="stringliteral">&quot;N_frag_exp:   expected no. of fragments stored in header;&quot;</span>)</div>
<div class="line"><span class="lineno">  196</span>            print(<span class="stringliteral">&quot;N_frag_act:   no. of fragments written in trigger record;&quot;</span>)</div>
<div class="line"><span class="lineno">  197</span>            print(<span class="stringliteral">&quot;N_diff:       N_frag_act - N_frag_exp&quot;</span>)</div>
<div class="line"><span class="lineno">  198</span>            print(<span class="stringliteral">&quot;N_frag_empty: no. of empty fragments (size &lt;= 72)&quot;</span>)</div>
<div class="line"><span class="lineno">  199</span>            print(<span class="stringliteral">&quot;{:-^80}&quot;</span>.format(<span class="stringliteral">&quot;Column Definitions&quot;</span>))</div>
<div class="line"><span class="lineno">  200</span>            print(<span class="stringliteral">&quot;{:^10}{:^10}{:^15}{:^15}{:^10}{:^12}&quot;</span>.format(</div>
<div class="line"><span class="lineno">  201</span>                <span class="stringliteral">&quot;i&quot;</span>, <span class="stringliteral">&quot;s&quot;</span>, <span class="stringliteral">&quot;N_frag_exp&quot;</span>, <span class="stringliteral">&quot;N_frag_act&quot;</span>, <span class="stringliteral">&quot;N_diff&quot;</span>, <span class="stringliteral">&quot;N_frag_empty&quot;</span>))</div>
<div class="line"><span class="lineno">  202</span>            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(report)):</div>
<div class="line"><span class="lineno">  203</span>                print(<span class="stringliteral">&quot;{:^10}{:^10}{:^15}{:^15}{:^10}{:^12}&quot;</span>.format(*report[i]))</div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  205</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a908a4df2626c2fbe097b01c6ba77db34" name="a908a4df2626c2fbe097b01c6ba77db34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a908a4df2626c2fbe097b01c6ba77db34">&#9670;&#160;</a></span>convert_to_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.convert_to_binary </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>binary_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k_nrecords</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00108">108</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  108</span>    <span class="keyword">def </span>convert_to_binary(self, binary_file, k_nrecords):</div>
<div class="line"><span class="lineno">  109</span>        <span class="keyword">with</span> open(binary_file, <span class="stringliteral">&#39;wb&#39;</span>) <span class="keyword">as</span> bf:</div>
<div class="line"><span class="lineno">  110</span>            n = 0</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.records:</div>
<div class="line"><span class="lineno">  112</span>                <span class="keywordflow">if</span> n &gt;= k_nrecords <span class="keywordflow">and</span> k_nrecords &gt; 0:</div>
<div class="line"><span class="lineno">  113</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  114</span>                dset = self.h5file[i.header]</div>
<div class="line"><span class="lineno">  115</span>                idata_array = bytearray(dset[:])</div>
<div class="line"><span class="lineno">  116</span>                bf.write(idata_array)</div>
<div class="line"><span class="lineno">  117</span>                <span class="keywordflow">for</span> j <span class="keywordflow">in</span> i.fragments:</div>
<div class="line"><span class="lineno">  118</span>                    dset = self.h5file[j]</div>
<div class="line"><span class="lineno">  119</span>                    jdata_array = bytearray(dset[:])</div>
<div class="line"><span class="lineno">  120</span>                    bf.write(jdata_array)</div>
<div class="line"><span class="lineno">  121</span>                n += 1</div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  123</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ad7e9a8d23bcb729e0f40ebd096c1cf" name="a3ad7e9a8d23bcb729e0f40ebd096c1cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ad7e9a8d23bcb729e0f40ebd096c1cf">&#9670;&#160;</a></span>printout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.printout </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k_header_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k_nrecords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k_list_components</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00124">124</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  124</span>    <span class="keyword">def </span>printout(self, k_header_type, k_nrecords, k_list_components=False):</div>
<div class="line"><span class="lineno">  125</span>        k_header_type = set(k_header_type)</div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> {<span class="stringliteral">&quot;attributes&quot;</span>, <span class="stringliteral">&quot;all&quot;</span>}.isdisjoint(k_header_type):</div>
<div class="line"><span class="lineno">  127</span>            banner_str = <span class="stringliteral">&quot; File Attributes &quot;</span></div>
<div class="line"><span class="lineno">  128</span>            print(banner_str.center(80, <span class="stringliteral">&#39;=&#39;</span>))</div>
<div class="line"><span class="lineno">  129</span>            <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self.h5file.attrs.keys():</div>
<div class="line"><span class="lineno">  130</span>                print(<span class="stringliteral">&quot;{:&lt;30}: {}&quot;</span>.format(k, self.h5file.attrs[k]))</div>
<div class="line"><span class="lineno">  131</span>        n = 0</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.records:</div>
<div class="line"><span class="lineno">  133</span>            <span class="keywordflow">if</span> n &gt;= k_nrecords <span class="keywordflow">and</span> k_nrecords &gt; 0:</div>
<div class="line"><span class="lineno">  134</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  135</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> {<span class="stringliteral">&quot;attributes&quot;</span>, <span class="stringliteral">&quot;all&quot;</span>}.isdisjoint(k_header_type):</div>
<div class="line"><span class="lineno">  136</span>                banner_str = <span class="stringliteral">&quot; Trigger Record Attributes &quot;</span></div>
<div class="line"><span class="lineno">  137</span>                print(banner_str.center(80, <span class="stringliteral">&#39;=&#39;</span>))</div>
<div class="line"><span class="lineno">  138</span>                <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self.h5file[i.path].attrs.keys():</div>
<div class="line"><span class="lineno">  139</span>                    print(<span class="stringliteral">&quot;{:&lt;30}: {}&quot;</span>.format(k, self.h5file[i.path].attrs[k]))</div>
<div class="line"><span class="lineno">  140</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> {<span class="stringliteral">&quot;header&quot;</span>, <span class="stringliteral">&quot;both&quot;</span>, <span class="stringliteral">&quot;all&quot;</span>}.isdisjoint(k_header_type):</div>
<div class="line"><span class="lineno">  141</span>                dset = self.h5file[i.header]</div>
<div class="line"><span class="lineno">  142</span>                data_array = bytearray(dset[:])</div>
<div class="line"><span class="lineno">  143</span>                banner_str = f<span class="stringliteral">&quot; {self.record_type} Header &quot;</span></div>
<div class="line"><span class="lineno">  144</span>                print(banner_str.center(80, <span class="stringliteral">&#39;=&#39;</span>))</div>
<div class="line"><span class="lineno">  145</span>                print(<span class="stringliteral">&#39;{:&lt;30}:\t{}&#39;</span>.format(<span class="stringliteral">&quot;Path&quot;</span>, i.path))</div>
<div class="line"><span class="lineno">  146</span>                print(<span class="stringliteral">&#39;{:&lt;30}:\t{}&#39;</span>.format(<span class="stringliteral">&quot;Size&quot;</span>, dset.shape))</div>
<div class="line"><span class="lineno">  147</span>                print(<span class="stringliteral">&#39;{:&lt;30}:\t{}&#39;</span>.format(<span class="stringliteral">&quot;Data type&quot;</span>, dset.dtype))</div>
<div class="line"><span class="lineno">  148</span>                print_header(data_array, self.record_type, self.clock_speed_hz,</div>
<div class="line"><span class="lineno">  149</span>                             k_list_components)</div>
<div class="line"><span class="lineno">  150</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> {<span class="stringliteral">&quot;fragment&quot;</span>, <span class="stringliteral">&quot;both&quot;</span>, <span class="stringliteral">&quot;all&quot;</span>}.isdisjoint(k_header_type):</div>
<div class="line"><span class="lineno">  151</span>                <span class="keywordflow">for</span> j <span class="keywordflow">in</span> i.fragments:</div>
<div class="line"><span class="lineno">  152</span>                    dset = self.h5file[j]</div>
<div class="line"><span class="lineno">  153</span>                    data_array = bytearray(dset[:])</div>
<div class="line"><span class="lineno">  154</span>                    banner_str = <span class="stringliteral">&quot; Fragment Header &quot;</span></div>
<div class="line"><span class="lineno">  155</span>                    print(banner_str.center(80, <span class="stringliteral">&#39;-&#39;</span>))</div>
<div class="line"><span class="lineno">  156</span>                    print(<span class="stringliteral">&#39;{:&lt;30}:\t{}&#39;</span>.format(<span class="stringliteral">&quot;Path&quot;</span>, j))</div>
<div class="line"><span class="lineno">  157</span>                    print(<span class="stringliteral">&#39;{:&lt;30}:\t{}&#39;</span>.format(<span class="stringliteral">&quot;Size&quot;</span>, dset.shape))</div>
<div class="line"><span class="lineno">  158</span>                    print(<span class="stringliteral">&#39;{:&lt;30}:\t{}&#39;</span>.format(<span class="stringliteral">&quot;Data type&quot;</span>, dset.dtype))</div>
<div class="line"><span class="lineno">  159</span>                    print_fragment_header(data_array, self.clock_speed_hz)</div>
<div class="line"><span class="lineno">  160</span>            n += 1</div>
<div class="line"><span class="lineno">  161</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  162</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aedeefb344b00196bfa2fc15d1e97b1ad" name="aedeefb344b00196bfa2fc15d1e97b1ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedeefb344b00196bfa2fc15d1e97b1ad">&#9670;&#160;</a></span>set_clock_speed_hz()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.set_clock_speed_hz </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k_clock_speed_hz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00105">105</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  105</span>    <span class="keyword">def </span>set_clock_speed_hz(self, k_clock_speed_hz):</div>
<div class="line"><span class="lineno">  106</span>        self.clock_speed_hz = k_clock_speed_hz</div>
<div class="line"><span class="lineno">  107</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab70514fe8e2224386bca376cdd531e67" name="ab70514fe8e2224386bca376cdd531e67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab70514fe8e2224386bca376cdd531e67">&#9670;&#160;</a></span>clock_speed_hz</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.clock_speed_hz</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00082">82</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>

</div>
</div>
<a id="a58e8e30fc2d38b0515f3ee0af12c902e" name="a58e8e30fc2d38b0515f3ee0af12c902e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58e8e30fc2d38b0515f3ee0af12c902e">&#9670;&#160;</a></span>h5file</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.h5file</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00074">74</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>

</div>
</div>
<a id="a1d5a2bd7da0d48256998bc86403999cb" name="a1d5a2bd7da0d48256998bc86403999cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d5a2bd7da0d48256998bc86403999cb">&#9670;&#160;</a></span>name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00071">71</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>

</div>
</div>
<a id="a5d0fc171123c7152a160f262e92f4e93" name="a5d0fc171123c7152a160f262e92f4e93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d0fc171123c7152a160f262e92f4e93">&#9670;&#160;</a></span>record_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.record_type</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00081">81</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>

</div>
</div>
<a id="a4a684c069ffa9c9fde9ee6eb369971a7" name="a4a684c069ffa9c9fde9ee6eb369971a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a684c069ffa9c9fde9ee6eb369971a7">&#9670;&#160;</a></span>records</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hdf5_dump.DAQDataFile.records</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hdf5__dump_8py_source.html#l00083">83</a> of file <a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/github/workspace/dev_area/sourcecode/hdf5libs/scripts/<a class="el" href="hdf5__dump_8py_source.html">hdf5_dump.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 24 2024 for DUNE-DAQ by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
