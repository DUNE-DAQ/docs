<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DUNE-DAQ: DAQ Configuration Inspector</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DUNE-DAQ
   </div>
   <div id="projectbrief">DUNE Trigger and Data Acquisition software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">DAQ Configuration Inspector</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md116"></a> :warning: <code>daqconf_inspector</code> is in active development and is likely to evolve significantly the near future. :warning:</p>
<p><code>daqconf_inspector</code> is a commandline utility created to explore new ways to visualize and verify DAQ configurations and the objects they contain. <code>daqconf_inspector</code> provides a set of commands to probe different aspects of a configuration database. The commands are accessible using with the usual syntax</p>
<div class="fragment"><div class="line">daqconf_inspector [OPTIONS] CONFIG_FILE COMMAND [ARGS]...</div>
</div><!-- fragment --><p>where <code>CONFIG_FILE</code> is the path to the configuration database being inspected. Detailed help is available for each command (including <code>daqconf_inspector</code> via the <code>-h/--help</code> flags).</p>
<h2><a class="anchor" id="autotoc_md117"></a>
Usage</h2>
<div class="fragment"><div class="line">daqconf_inspector [OPTIONS] CONFIG_FILE COMMAND [ARGS]...</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  -i, --interactive  Start an interactive IPython session after executing the</div>
<div class="line">                     commands</div>
<div class="line">  -h, --help         Show this message and exit.</div>
<div class="line"> </div>
<div class="line">Commands:</div>
<div class="line">  list-classes           List known classes and objects for each class</div>
<div class="line">  show-object-tree       Show relationship tree</div>
<div class="line">  show-objects-of-class  Show properties of objects belonging to a class</div>
<div class="line">  show-sessions          Show sessions information</div>
<div class="line">  show-smartapp-mods     Shows the modules generated by a smart application</div>
<div class="line">  verify-detstreams      Verify detector streams in the database</div>
<div class="line">  verify-smart-apps      Verify smart applications in database</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md118"></a>
Inspection</h1>
<h2><a class="anchor" id="autotoc_md119"></a>
&lt;tt&gt;list-classes&lt;/tt&gt;</h2>
<p>Displays the list of classes known to the schema loaded fom the database, together with the ids of objects belonging to that class fond in the database.</p>
<div class="fragment"><div class="line">Usage: daqconf_inspector CONFIG_FILE list-classes [OPTIONS]</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  -d, --show-derived-objects-as-parents</div>
<div class="line">                                  Include derived objects in parent class</div>
<div class="line">                                  listing</div>
<div class="line">  -h, --help                      Show this message and exit.</div>
</div><!-- fragment --> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Example</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>daqconf_inspector ./ehn1-daqconfigs/sessions/np02-session.data.xml list-classes</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><img src="./img/inspector_list-classes.png" alt="list-classes example" class="inline"/>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md120"></a>
&lt;tt&gt;show-object-tree&lt;/tt&gt;</h2>
<p>Show the relationship tree of the OKS object with identifier UID.</p>
<p>UID is the unique object identifier in the database, composed by object name and class name. The UID format argument is &lt;object name&gt;&lt;class&gt;.</p>
<p>Starting from the selected object, attributes and objects refererd by relationships are shown recursively as hierarchical tree. By default the command recursively crawls through relationship without limits. The recursion level can be limited with the corresponding optional parameter (see below). In case focussing on a relationship branch is helpful, the focus path option (see below for details) allows to specify the branch to focus on, starting trom the top object. If a focus path is specified, the recursion level is applied starting from the last element of the focus path. The focus path syntax combines relationhsip and object names, using <code>.</code> separators, and <code>[]</code> to select a single item in multi-value relatiosnips. The structure of the focus path specifier is <code>&lt;relationship&gt;[&lt;optional object name&gt;].&lt;relationship&gt;[&lt;optional object name&gt;]</code>. Note: specifiying the object name is required</p>
<div class="fragment"><div class="line">Usage: daqconf_inspector CONFIG_FILE show-object-tree [OPTIONS] UID</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  +a, --show-attributes / -a, --hide-attributes</div>
<div class="line">                                  Show/Hide attributes</div>
<div class="line">  -l, --level INTEGER             Recursion level in the object tree</div>
<div class="line">  -f, --focus TEXT                Path within the object relationships to</div>
<div class="line">                                  focus on</div>
<div class="line">  -h, --help                      Show this message and exit.</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Example</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>daqconf_inspector ./ehn1-daqconfigs/sessions/np02-session.data.xml show-object-tree df-03@DFApplication -f network_rules[td-trb-net-rule].descriptor -l 6</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><img src="./img/inspector_show-object-tree.png" alt="list-classes example" class="inline"/>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md121"></a>
&lt;tt&gt;show-objects-of-class&lt;/tt&gt;</h2>
<p>Show attributes and relationships of all objects in the database belonging to KLASS</p>
<div class="fragment"><div class="line">Usage: daqconf_inspector CONFIG_FILE show-objects-of-class</div>
<div class="line">           [OPTIONS] KLASS</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  -v, --vertical / -h, --horizontal</div>
<div class="line">                                  Toggle vertical or horizontal orientation</div>
<div class="line">  --help                          Show this message and exit.</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Example</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>daqconf_inspector ./ehn1-daqconfigs/sessions/np02-session.data.xml show-objects-of-class Segment</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><img src="./img/inspector_show-objects-of-class.png" alt="list-classes example" class="inline"/>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md122"></a>
&lt;tt&gt;show-session&lt;/tt&gt;</h2>
<p>Show details of each session available in the configuration database</p>
<p>For each session found in the the database, <code>show-session</code> displays:</p>
<ul>
<li><p class="startli">The high-level session view, including segments, controllers and applications as hierarchical tree. ID and Class are shown for applications and controllers, along with their host and services (open ports) The icon in front of segments and appliations indicate the enable/disable.</p>
<p class="startli">Optionally, it displays the path of the the database file where the object is define</p>
<p class="startli"><b>Legend</b></p>
</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Icon   </th><th class="markdownTableHeadNone">Meaning    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✅   </td><td class="markdownTableBodyNone">Resource enabled    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">❌   </td><td class="markdownTableBodyNone">Resource directly disabled (included in the Session disable list)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">⭕️   </td><td class="markdownTableBodyNone">Resource indirectly disabled by algorithm    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">🔵   </td><td class="markdownTableBodyNone">Not a resource   </td></tr>
</table>
<ul>
<li>The summary of objects included in the session, including the count of referenced objects, the list of directly disabled objects and the list of all disabled objects (directly or indirectly)</li>
<li>The session environment.</li>
</ul>
<div class="fragment"><div class="line">Usage: daqconf_inspector CONFIG_FILE show-sessions [OPTIONS]</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  -p, --show-file_paths</div>
<div class="line">  -h, --help             Show this message and exit.</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Example</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>daqconf_inspector ./ehn1-daqconfigs/sessions/np02-session.data.xml show-sessions</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><img src="./img/inspector_show-sessions.png" alt="show-sessionss example" class="inline"/>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md123"></a>
&lt;tt&gt;show-smartapp-mods&lt;/tt&gt;</h2>
<p>Executes the generate modules method for the selected smart application and session, and displays the results as a hierarchical tree. Resource objects are displaied with their status.</p>
<p>In case visualising a single relationship branch is desired, the focus path option (see below for details) allows to specify the branch to focus on, starting trom the top object. If a focus path is specified, the recursion level is applied starting from the last element of the focus path. The focus path syntax combines relationhsip and object names, using <code>.</code> separators, and <code>[]</code> to select a single item in multi-value relatiosnips. The structure of the focus path specifier is <code>&lt;relationship&gt;[&lt;optional object name&gt;].&lt;relationship&gt;[&lt;optional object name&gt;]</code>. Note: specifiying the object name is required .</p>
<p><b>Legend</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Icon   </th><th class="markdownTableHeadNone">Meaning    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">✅   </td><td class="markdownTableBodyNone">Resource enabled    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">❌   </td><td class="markdownTableBodyNone">Resource directly disabled (included in the Session disable list)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">⭕️   </td><td class="markdownTableBodyNone">Resource indirectly disabled by algorithm    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">🔵   </td><td class="markdownTableBodyNone">Not a resource   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Example</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>daqconf_inspector ehn1-daqconfigs/sessions/np02-session.data.xml show-smartapp-mods np02-session crp4-wiec -f hermes-ctrl-crp4-wiec-np02-wib-1006 -l 2</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><img src="./img/inspector_show-smartapp-mods.png" alt="show-smartapp-mods example" class="inline"/>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md124"></a>
Verification</h1>
<h2><a class="anchor" id="autotoc_md125"></a>
&lt;tt&gt;verify-detstreams&lt;/tt&gt;</h2>
<p>Performs basic validation of detector datastreams in a database.</p>
<p>It checks the collection of all detastreans in the database for uiniqueness. It also checks that all geo_ids references by detecor streams are unique.</p>
<div class="fragment"><div class="line">Usage: daqconf_inspector CONFIG_FILE verify-detstreams [OPTIONS]</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  -h, --help  Show this message and exit.</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Example</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>daqconf_inspector ehn1-daqconfigs/sessions/np02-session.data.xml verify-detstreams</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><img src="./img/inspector_verify-detstreams-1.png" alt="verify-detstreams example" class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><img src="./img/inspector_verify-detstreams-2.png" alt="verify-detstreams example" class="inline"/>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md126"></a>
&lt;tt&gt;verify-smart-apps&lt;/tt&gt;</h2>
<p>Performs basic validation on smart daq applications a database.</p>
<p>Implemented tests:</p>
<ul>
<li><em>services</em>: The exposed service consistency between application interface and network rules is checked. the services referenced in network rules are compared with the list in the <code>exposes_service</code> attribute. The tedt fails if any of the network rules services is not present in <code>exposes_service</code>.</li>
</ul>
<div class="fragment"><div class="line">Usage: daqconf_inspector CONFIG_FILE verify-smart-apps [OPTIONS]</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  -h, --help  Show this message and exit.</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Example</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>daqconf_inspector ehn1-daqconfigs/sessions/np04-session.data.xml verify-smart-apps</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><img src="./img/inspector_verify-smart-apps.png" alt="verify-smart-apps example" class="inline"/>   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 24 2024 for DUNE-DAQ by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
