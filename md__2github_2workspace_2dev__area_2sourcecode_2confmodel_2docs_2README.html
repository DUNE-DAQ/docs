<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DUNE-DAQ: confmodel</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DUNE-DAQ
   </div>
   <div id="projectbrief">DUNE Trigger and Data Acquisition software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">confmodel</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md518"></a>This package contains the 'core' schema for the DUNE daq OKS configuration.</p>
<p><img src="schema.png" alt="schema" class="inline"/></p>
<p>The top level of the schema is the <b>Session</b> which defines some global DAQ parameters and has a relationship to a single top-level <b>Segment</b>. It also has a list of disabled Resources. It is intended that parts of the DAQ system that are not required in the current run are simply disabled rather than deleted from the database altogether.</p>
<p>A <b>Segment</b> is a logical grouping of applications and resources which are controlled by a single controller. A <b>Segment</b> may contain other nested <b>Segment**s. A **Segment</b> is a Resource that can be enabled/disabled, disabling a <b>Segment</b> disables all of its nested **Segment**s.</p>
<p>The <b>Application</b> class has attibutes defining the application's <code>application_name</code> (executable name) and <code>commandline_parameters</code>. Its <code>application_environment</code> relationship lists environment variables needed by the application in addition to those defined by the <b>Session</b>. An <a href="https://github.com/DUNE-DAQ/confmodel/blob/develop/scripts/app_environment.py">example Python script</a> that prints out the environment for enabled applications in the <b>Session</b> is provided in the <code>scripts</code> directory.</p>
<h1><a class="anchor" id="autotoc_md519"></a>
Readout Map</h1>
<p><img src="ReadoutMap.png" alt="ReadoutMap schema" class="inline"/></p>
<p>The detector to DAQ connections are described using different types of <b>Resources</b>. Each <b>DetectorToDaqConnection</b> contains one <b>ResourceSetAND</b> containing one or more <b>DetDataSender**s and one **DetDataReceiver</b>. The <b>DetectorToDaqConnection</b> is a <b>ResourceSetOR</b>, meaning that if either the receiver or all the senders are disabled, then also the connection is disabled.</p>
<p>Each <b>DetDataSender</b> contains a set of <b>DetectorStream**s, which consist of a **Resource</b> associated to one <b>GeoId</b>.</p>
<h1><a class="anchor" id="autotoc_md520"></a>
Finite State Machines</h1>
<p>Each controller (<b>RCApplication</b>) uses one <b>FSMConfiguration</b> object that describes action, trasnisions and sequences.</p>
<p><img src="fsm.png" alt="FSM schema" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md521"></a>
Notes</h1>
<h2><a class="anchor" id="autotoc_md522"></a>
VirtualHost</h2>
<p>The idea is that this decribes the subset of resources of a physical host server that are available to an Application. For example two applications may be assigned to the same physical server but each be allocated resources of a different NUMA node.</p>
<h2><a class="anchor" id="autotoc_md523"></a>
&lt;strong&gt;DaqApplication&lt;/strong&gt; and &lt;strong&gt;DaqModule&lt;/strong&gt;</h2>
<p>The <b>DaqApplication</b> contains a list of <b>DaqModule**s each of which has a list of used resources. The **DaqApplication</b> provides a method <code>get_used_hostresources</code> which can be called by <code>appfwk</code> in order to check that these resources are indeed associated with the VirtualHost by comparing with those listed in its <code>hw_resources</code> relationship.</p>
<h2><a class="anchor" id="autotoc_md524"></a>
NetworkConnection</h2>
<p>Describes the connection type and points to the <b>Service</b> running over this connection. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 24 2024 for DUNE-DAQ by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
