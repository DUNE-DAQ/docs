<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DUNE-DAQ: WIB Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DUNE-DAQ
   </div>
   <div id="projectbrief">DUNE Trigger and Data Acquisition software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classWIB-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">WIB Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="WIB_8hh_source.html">WIB.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for WIB:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classWIB__inherit__graph.svg" width="87" height="111"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for WIB:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classWIB__coll__graph.svg" width="116" height="408"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a22450657af92080a3406b875edc1b2c5" id="r_a22450657af92080a3406b875edc1b2c5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a22450657af92080a3406b875edc1b2c5">WIB_DAQ_t</a> { <a class="el" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2">UNKNOWN</a>
, <a class="el" href="classWIB.html#a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370">RCE</a>
, <a class="el" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>
 }</td></tr>
<tr class="separator:a22450657af92080a3406b875edc1b2c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2a07625c3f3e7eacd8267f3629d13e79" id="r_a2a07625c3f3e7eacd8267f3629d13e79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a2a07625c3f3e7eacd8267f3629d13e79">WIB</a> (std::string const &amp;address, std::string const &amp;WIBAddressTable=&quot;WIB.adt&quot;, std::string const &amp;FEMBAddressTable=&quot;FEMB.adt&quot;, bool fullStart=true)</td></tr>
<tr class="separator:a2a07625c3f3e7eacd8267f3629d13e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af19a5075161790220fecc86fdbe04503" id="r_af19a5075161790220fecc86fdbe04503"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#af19a5075161790220fecc86fdbe04503">~WIB</a> ()</td></tr>
<tr class="separator:af19a5075161790220fecc86fdbe04503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aede5bdd4e41e94b1fced1e7c883870e7" id="r_aede5bdd4e41e94b1fced1e7c883870e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aede5bdd4e41e94b1fced1e7c883870e7">FullStart</a> ()</td></tr>
<tr class="separator:aede5bdd4e41e94b1fced1e7c883870e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae01a686dac406f779e8e8ff084b28f29" id="r_ae01a686dac406f779e8e8ff084b28f29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ae01a686dac406f779e8e8ff084b28f29">InitializeWIB</a> ()</td></tr>
<tr class="separator:ae01a686dac406f779e8e8ff084b28f29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df27e11950165c5f3ea714d88da5c4e" id="r_a1df27e11950165c5f3ea714d88da5c4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a1df27e11950165c5f3ea714d88da5c4e">ResetWIB</a> (bool reset_udp=false)</td></tr>
<tr class="separator:a1df27e11950165c5f3ea714d88da5c4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f684559b36ca03641249e2db91f6516" id="r_a4f684559b36ca03641249e2db91f6516"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a4f684559b36ca03641249e2db91f6516">InitializeDTS</a> (uint8_t PDTSsource=0, uint8_t clockSource=0, uint32_t PDTSAlignment_timeout=0)</td></tr>
<tr class="separator:a4f684559b36ca03641249e2db91f6516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24eb1180f377c12249e0d50d73bf90e2" id="r_a24eb1180f377c12249e0d50d73bf90e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a24eb1180f377c12249e0d50d73bf90e2">EnableDAQLink</a> (uint8_t iDAQLink)</td></tr>
<tr class="separator:a24eb1180f377c12249e0d50d73bf90e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7313e28e40b4bc66b57052785602ec8a" id="r_a7313e28e40b4bc66b57052785602ec8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a7313e28e40b4bc66b57052785602ec8a">EnableDAQLink_Lite</a> (uint8_t iDAQLink, uint8_t enable)</td></tr>
<tr class="separator:a7313e28e40b4bc66b57052785602ec8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a640f151de6e3b5f142bd80c43496f7d8" id="r_a640f151de6e3b5f142bd80c43496f7d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a640f151de6e3b5f142bd80c43496f7d8">StartSyncDTS</a> ()</td></tr>
<tr class="separator:a640f151de6e3b5f142bd80c43496f7d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6856acc9079ff9d95dcb62a5efe23fa0" id="r_a6856acc9079ff9d95dcb62a5efe23fa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a6856acc9079ff9d95dcb62a5efe23fa0">ResetWIBAndCfgDTS</a> (uint8_t localClock, uint8_t PDTS_TGRP, uint8_t PDTSsource=0, uint32_t PDTSAlignment_timeout=0)</td></tr>
<tr class="separator:a6856acc9079ff9d95dcb62a5efe23fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338ec480efa5ac5b7eaa02a362323647" id="r_a338ec480efa5ac5b7eaa02a362323647"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a338ec480efa5ac5b7eaa02a362323647">CheckedResetWIBAndCfgDTS</a> (uint8_t localClock, uint8_t PDTS_TGRP, uint8_t PDTSsource=0, uint32_t PDTSAlignment_timeout=0)</td></tr>
<tr class="separator:a338ec480efa5ac5b7eaa02a362323647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af059dc7ffcb545a19786160c3600ab3a" id="r_af059dc7ffcb545a19786160c3600ab3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#af059dc7ffcb545a19786160c3600ab3a">StartStreamToDAQ</a> (bool l1=true, bool l2=true, bool l3=false, bool l4=false)</td></tr>
<tr class="separator:af059dc7ffcb545a19786160c3600ab3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1f1c77f6e9421a3de1c09af48ab7854" id="r_ab1f1c77f6e9421a3de1c09af48ab7854"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ab1f1c77f6e9421a3de1c09af48ab7854">PDTSInRunningState</a> ()</td></tr>
<tr class="separator:ab1f1c77f6e9421a3de1c09af48ab7854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bcbee21616908d662bb6e6160413cfc" id="r_a0bcbee21616908d662bb6e6160413cfc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a0bcbee21616908d662bb6e6160413cfc">EnableFEMBCNC</a> ()</td></tr>
<tr class="separator:a0bcbee21616908d662bb6e6160413cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cfbf44f35f1780db584dc7a30281d87" id="r_a2cfbf44f35f1780db584dc7a30281d87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a2cfbf44f35f1780db584dc7a30281d87">DisableFEMBCNC</a> ()</td></tr>
<tr class="separator:a2cfbf44f35f1780db584dc7a30281d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d7dc613257e9c11c359252069ec45e" id="r_aa6d7dc613257e9c11c359252069ec45e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aa6d7dc613257e9c11c359252069ec45e">FEMBPower</a> (uint8_t iFEMB, bool turnOn)</td></tr>
<tr class="separator:aa6d7dc613257e9c11c359252069ec45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac292fdbd2e2c5dca03433c78d2afef6b" id="r_ac292fdbd2e2c5dca03433c78d2afef6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ac292fdbd2e2c5dca03433c78d2afef6b">SourceFEMB</a> (uint64_t iDAQLink, uint64_t real)</td></tr>
<tr class="separator:ac292fdbd2e2c5dca03433c78d2afef6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6507aafc38c493cccd900938811b5e11" id="r_a6507aafc38c493cccd900938811b5e11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a6507aafc38c493cccd900938811b5e11">StartEventBuilder</a> (uint8_t mask=0xF)</td></tr>
<tr class="separator:a6507aafc38c493cccd900938811b5e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51db2dc5f8128906c2d9ac2c910b880a" id="r_a51db2dc5f8128906c2d9ac2c910b880a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a51db2dc5f8128906c2d9ac2c910b880a">StopEventBuilder</a> (uint8_t mask=0xF)</td></tr>
<tr class="separator:a51db2dc5f8128906c2d9ac2c910b880a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc0ad993681573ef11184caee329b7f" id="r_a4fc0ad993681573ef11184caee329b7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a4fc0ad993681573ef11184caee329b7f">WriteQSFP</a> (uint16_t address, uint32_t value, uint8_t byte_count)</td></tr>
<tr class="separator:a4fc0ad993681573ef11184caee329b7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abadf4d23089016db4b9a340e8427069c" id="r_abadf4d23089016db4b9a340e8427069c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#abadf4d23089016db4b9a340e8427069c">ReadQSFP</a> (uint16_t address, uint8_t byte_count)</td></tr>
<tr class="separator:abadf4d23089016db4b9a340e8427069c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb5815b41d2fbd78687171c9948d5629" id="r_afb5815b41d2fbd78687171c9948d5629"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#afb5815b41d2fbd78687171c9948d5629">WriteDTS_CDS</a> (uint16_t address, uint32_t value, uint8_t byte_count=4, bool ignore_error=false)</td></tr>
<tr class="separator:afb5815b41d2fbd78687171c9948d5629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99fd5ea65e2d224ec88550261ec66f0f" id="r_a99fd5ea65e2d224ec88550261ec66f0f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a99fd5ea65e2d224ec88550261ec66f0f">ReadDTS_CDS</a> (uint16_t address, uint8_t byte_count=4)</td></tr>
<tr class="separator:a99fd5ea65e2d224ec88550261ec66f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafb7beccff730f2cd3641ae63f34dedf" id="r_aafb7beccff730f2cd3641ae63f34dedf"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aafb7beccff730f2cd3641ae63f34dedf">ConfigureDTSCDS</a> (uint8_t source=0)</td></tr>
<tr class="separator:aafb7beccff730f2cd3641ae63f34dedf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6df6b4ae89ccb9670b7b6b63c0936107" id="r_a6df6b4ae89ccb9670b7b6b63c0936107"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a6df6b4ae89ccb9670b7b6b63c0936107">WriteDTS_SI5344</a> (uint16_t address, uint32_t value, uint8_t byte_count=4)</td></tr>
<tr class="separator:a6df6b4ae89ccb9670b7b6b63c0936107"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d398812aecd76fb691e9faee83dde0b" id="r_a1d398812aecd76fb691e9faee83dde0b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a1d398812aecd76fb691e9faee83dde0b">ReadDTS_SI5344</a> (uint16_t address, uint8_t byte_count=4)</td></tr>
<tr class="separator:a1d398812aecd76fb691e9faee83dde0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cce03773aaf423c8a848517ddd43e6c" id="r_a5cce03773aaf423c8a848517ddd43e6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a5cce03773aaf423c8a848517ddd43e6c">SetDTS_SI5344Page</a> (uint8_t page)</td></tr>
<tr class="separator:a5cce03773aaf423c8a848517ddd43e6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a519a38027b8d179e87067f46c70d29e0" id="r_a519a38027b8d179e87067f46c70d29e0"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a519a38027b8d179e87067f46c70d29e0">GetDTS_SI5344Page</a> ()</td></tr>
<tr class="separator:a519a38027b8d179e87067f46c70d29e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ed18b639f8176630a6f3cbc46cd85f7" id="r_a2ed18b639f8176630a6f3cbc46cd85f7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a2ed18b639f8176630a6f3cbc46cd85f7">GetDTS_SI5344AddressPage</a> (uint16_t address)</td></tr>
<tr class="separator:a2ed18b639f8176630a6f3cbc46cd85f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2846252140d13dbf862b4351aa0b0500" id="r_a2846252140d13dbf862b4351aa0b0500"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a2846252140d13dbf862b4351aa0b0500">LoadConfigDTS_SI5344</a> (std::string const &amp;fileName)</td></tr>
<tr class="separator:a2846252140d13dbf862b4351aa0b0500"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd76012e72b36c4f1d15028e53502868" id="r_abd76012e72b36c4f1d15028e53502868"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#abd76012e72b36c4f1d15028e53502868">ResetSi5344</a> ()</td></tr>
<tr class="separator:abd76012e72b36c4f1d15028e53502868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862a957d3838b82d858f5886d3f665ad" id="r_a862a957d3838b82d858f5886d3f665ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a862a957d3838b82d858f5886d3f665ad">SelectSI5344</a> (uint64_t input, bool enable)</td></tr>
<tr class="separator:a862a957d3838b82d858f5886d3f665ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3f86d5520b898dd2b8fd365db180158" id="r_aa3f86d5520b898dd2b8fd365db180158"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aa3f86d5520b898dd2b8fd365db180158">SelectSI5342</a> (uint64_t input, bool enable)</td></tr>
<tr class="separator:aa3f86d5520b898dd2b8fd365db180158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa72da71627de98385e0c973636b4f26" id="r_aaa72da71627de98385e0c973636b4f26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aaa72da71627de98385e0c973636b4f26">WriteDAQ_SI5342</a> (uint16_t address, uint32_t value, uint8_t byte_count=4)</td></tr>
<tr class="separator:aaa72da71627de98385e0c973636b4f26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e4bc04399c3670edc71b4bd96032552" id="r_a0e4bc04399c3670edc71b4bd96032552"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a0e4bc04399c3670edc71b4bd96032552">ReadDAQ_SI5342</a> (uint16_t address, uint8_t byte_count=4)</td></tr>
<tr class="separator:a0e4bc04399c3670edc71b4bd96032552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7ae9769f449879233a1ae67af88fb17" id="r_ae7ae9769f449879233a1ae67af88fb17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ae7ae9769f449879233a1ae67af88fb17">SetDAQ_SI5342Page</a> (uint8_t page)</td></tr>
<tr class="separator:ae7ae9769f449879233a1ae67af88fb17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75ebb93b76159089ab6ce867458d9364" id="r_a75ebb93b76159089ab6ce867458d9364"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a75ebb93b76159089ab6ce867458d9364">GetDAQ_SI5342Page</a> ()</td></tr>
<tr class="separator:a75ebb93b76159089ab6ce867458d9364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8d774d449d7a7bb5b0fb8a521f14156" id="r_aa8d774d449d7a7bb5b0fb8a521f14156"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aa8d774d449d7a7bb5b0fb8a521f14156">GetDAQ_SI5342AddressPage</a> (uint16_t address)</td></tr>
<tr class="separator:aa8d774d449d7a7bb5b0fb8a521f14156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add4c1712e34c6352782f2c8af427fe61" id="r_add4c1712e34c6352782f2c8af427fe61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#add4c1712e34c6352782f2c8af427fe61">LoadConfigDAQ_SI5342</a> (std::string const &amp;fileName)</td></tr>
<tr class="separator:add4c1712e34c6352782f2c8af427fe61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9813e18a6aa91528e0cd9df0a91eb86" id="r_ab9813e18a6aa91528e0cd9df0a91eb86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ab9813e18a6aa91528e0cd9df0a91eb86">ResetSi5342</a> ()</td></tr>
<tr class="separator:ab9813e18a6aa91528e0cd9df0a91eb86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b0426ba31e00d8fb2369b1d99060836" id="r_a2b0426ba31e00d8fb2369b1d99060836"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a2b0426ba31e00d8fb2369b1d99060836">CaptureHistory</a> (std::string const &amp;address)</td></tr>
<tr class="separator:a2b0426ba31e00d8fb2369b1d99060836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace6809b1762a4a5418c92477deb6ea25" id="r_ace6809b1762a4a5418c92477deb6ea25"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="WIB_8hh.html#a396787e5ec029b1205bd3e4cd9763e7d">uint128_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ace6809b1762a4a5418c92477deb6ea25">CaptureHistory</a> (std::string const &amp;address, size_t wordCount)</td></tr>
<tr class="separator:ace6809b1762a4a5418c92477deb6ea25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6bd613b0fd87797ece9f361e1537c7" id="r_a8b6bd613b0fd87797ece9f361e1537c7"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a8b6bd613b0fd87797ece9f361e1537c7">ReadLocalFlash</a> (uint16_t address)</td></tr>
<tr class="separator:a8b6bd613b0fd87797ece9f361e1537c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb6cff8e45f3d91cc7951de7b2f188d6" id="r_adb6cff8e45f3d91cc7951de7b2f188d6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#adb6cff8e45f3d91cc7951de7b2f188d6">ReadLocalFlash</a> (uint16_t address, size_t n)</td></tr>
<tr class="separator:adb6cff8e45f3d91cc7951de7b2f188d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43d4a5adde26ec3686ec6f95eaa2f2a" id="r_ae43d4a5adde26ec3686ec6f95eaa2f2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ae43d4a5adde26ec3686ec6f95eaa2f2a">WriteLocalFlash</a> (uint16_t address, uint32_t data)</td></tr>
<tr class="separator:ae43d4a5adde26ec3686ec6f95eaa2f2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c7b296ba087bdbc3718fb9adbfa2768" id="r_a4c7b296ba087bdbc3718fb9adbfa2768"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a4c7b296ba087bdbc3718fb9adbfa2768">WriteLocalFlash</a> (uint16_t address, std::vector&lt; uint32_t &gt; const &amp;data)</td></tr>
<tr class="separator:a4c7b296ba087bdbc3718fb9adbfa2768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b3d05f77b55fb2750fcc45c1a19d295" id="r_a9b3d05f77b55fb2750fcc45c1a19d295"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a9b3d05f77b55fb2750fcc45c1a19d295">FlashCheckBusy</a> ()</td></tr>
<tr class="separator:a9b3d05f77b55fb2750fcc45c1a19d295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa18a368ce8cac8a49d2ad8cd3b1c165b" id="r_aa18a368ce8cac8a49d2ad8cd3b1c165b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aa18a368ce8cac8a49d2ad8cd3b1c165b">ReadFlash</a> (std::string const &amp;fileName, uint8_t update_percentage=101)</td></tr>
<tr class="separator:aa18a368ce8cac8a49d2ad8cd3b1c165b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a587c9cb78f457531bfd0d79c30e5a03c" id="r_a587c9cb78f457531bfd0d79c30e5a03c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a587c9cb78f457531bfd0d79c30e5a03c">WriteFlash</a> (std::vector&lt; uint32_t &gt; data, uint8_t update_percentage=101)</td></tr>
<tr class="separator:a587c9cb78f457531bfd0d79c30e5a03c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acee46dcd9a9ed15bf10d21fa8ce42072" id="r_acee46dcd9a9ed15bf10d21fa8ce42072"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#acee46dcd9a9ed15bf10d21fa8ce42072">ProgramFlash</a> (std::string const &amp;fileName, uint8_t update_percentage=101)</td></tr>
<tr class="separator:acee46dcd9a9ed15bf10d21fa8ce42072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b7859296c5e2dbd9bf626a72fa76a4" id="r_a12b7859296c5e2dbd9bf626a72fa76a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a12b7859296c5e2dbd9bf626a72fa76a4">EraseFlash</a> (bool print_updates=false)</td></tr>
<tr class="separator:a12b7859296c5e2dbd9bf626a72fa76a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb500282eee287d96eb543cb097c50ce" id="r_aeb500282eee287d96eb543cb097c50ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aeb500282eee287d96eb543cb097c50ce">CheckFlash</a> (std::vector&lt; uint32_t &gt; data, uint8_t update_percentage=101)</td></tr>
<tr class="separator:aeb500282eee287d96eb543cb097c50ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52a39a327bc66b87c079b3b34db705f1" id="r_a52a39a327bc66b87c079b3b34db705f1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structdata__8b10b__t.html">data_8b10b_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a52a39a327bc66b87c079b3b34db705f1">ReadOutCDLinkSpyBuffer</a> ()</td></tr>
<tr class="separator:a52a39a327bc66b87c079b3b34db705f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4aca3179b372f39e7d8a052172e047e" id="r_af4aca3179b372f39e7d8a052172e047e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structdata__8b10b__t.html">data_8b10b_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#af4aca3179b372f39e7d8a052172e047e">ReadDAQLinkSpyBuffer</a> (uint8_t iDAQLink, uint8_t trigger_mode=0)</td></tr>
<tr class="separator:af4aca3179b372f39e7d8a052172e047e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a587fc3369aac2d83fa47d658ad240c65" id="r_a587fc3369aac2d83fa47d658ad240c65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a587fc3369aac2d83fa47d658ad240c65">SetupFEMBExtClock</a> (uint8_t iFEMB)</td></tr>
<tr class="memdesc:a587fc3369aac2d83fa47d658ad240c65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup FEMB External Clock.  <br /></td></tr>
<tr class="separator:a587fc3369aac2d83fa47d658ad240c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb5bdb31706d3a981484fdf26d9184dc" id="r_afb5bdb31706d3a981484fdf26d9184dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#afb5bdb31706d3a981484fdf26d9184dc">WriteFEMBPhase</a> (uint8_t iFEMB, uint16_t clk_phase_data)</td></tr>
<tr class="separator:afb5bdb31706d3a981484fdf26d9184dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00e70fff12bc79dc0a50d453cd6d5a78" id="r_a00e70fff12bc79dc0a50d453cd6d5a78"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a00e70fff12bc79dc0a50d453cd6d5a78">TryFEMBPhases</a> (uint8_t iFEMB, std::vector&lt; uint16_t &gt; phases)</td></tr>
<tr class="separator:a00e70fff12bc79dc0a50d453cd6d5a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97226fbedd664e93847a98064e764883" id="r_a97226fbedd664e93847a98064e764883"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a97226fbedd664e93847a98064e764883">HuntFEMBPhase</a> (uint8_t iFEMB, uint16_t clk_phase_data_start)</td></tr>
<tr class="separator:a97226fbedd664e93847a98064e764883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a285e68dc04c8330ab1b9b7f5f9deeeb0" id="r_a285e68dc04c8330ab1b9b7f5f9deeeb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a285e68dc04c8330ab1b9b7f5f9deeeb0">ConfigFEMB</a> (uint8_t iFEMB, std::vector&lt; uint32_t &gt; fe_config, std::vector&lt; uint16_t &gt; clk_phases, uint8_t pls_mode=0, uint8_t pls_dac_val=0, uint8_t start_frame_mode_sel=1, uint8_t start_frame_swap=1)</td></tr>
<tr class="memdesc:a285e68dc04c8330ab1b9b7f5f9deeeb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup FEMB in real or pulser data mode.  <br /></td></tr>
<tr class="separator:a285e68dc04c8330ab1b9b7f5f9deeeb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e2a99cc3f49d5e841c53d6e478ef85d" id="r_a5e2a99cc3f49d5e841c53d6e478ef85d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a5e2a99cc3f49d5e841c53d6e478ef85d">ConfigFEMBFakeData</a> (uint8_t iFEMB, uint8_t fake_mode, uint32_t fake_word, uint8_t femb_number, std::vector&lt; uint32_t &gt; fake_samples, uint8_t start_frame_mode_sel=1, uint8_t start_frame_swap=1)</td></tr>
<tr class="memdesc:a5e2a99cc3f49d5e841c53d6e478ef85d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup FEMB in fake data mode.  <br /></td></tr>
<tr class="separator:a5e2a99cc3f49d5e841c53d6e478ef85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf6ac0b21dcc8db20ad73a28072602d" id="r_a4cf6ac0b21dcc8db20ad73a28072602d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a4cf6ac0b21dcc8db20ad73a28072602d">ConfigFEMBMode</a> (uint8_t iFEMB, uint32_t pls_cs, uint32_t dac_sel, uint32_t fpga_dac, uint32_t asic_dac, uint32_t mon_cs)</td></tr>
<tr class="separator:a4cf6ac0b21dcc8db20ad73a28072602d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af983c68bc5186729c95df4bfc383eeda" id="r_af983c68bc5186729c95df4bfc383eeda"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#af983c68bc5186729c95df4bfc383eeda">SetupFEMBASICs</a> (uint8_t iFEMB, uint8_t gain, uint8_t shape, uint8_t highBaseline, bool highLeakage, bool leakagex10, bool acCoupling, bool buffer, bool useExtClock, uint8_t internalDACControl, uint8_t internalDACValue)</td></tr>
<tr class="memdesc:af983c68bc5186729c95df4bfc383eeda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup FEMB ASICs.  <br /></td></tr>
<tr class="separator:af983c68bc5186729c95df4bfc383eeda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6e6e694b21bf8e4b9f85aef5f748307" id="r_ae6e6e694b21bf8e4b9f85aef5f748307"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ae6e6e694b21bf8e4b9f85aef5f748307">SetupFPGAPulser</a> (uint8_t iFEMB, uint8_t dac_val)</td></tr>
<tr class="separator:ae6e6e694b21bf8e4b9f85aef5f748307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa60b1350feac33a4908cde93bf369211" id="r_aa60b1350feac33a4908cde93bf369211"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aa60b1350feac33a4908cde93bf369211">SetupInternalPulser</a> (uint8_t iFEMB)</td></tr>
<tr class="separator:aa60b1350feac33a4908cde93bf369211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac17c0b557e61cbfc9e8a740f8133e424" id="r_ac17c0b557e61cbfc9e8a740f8133e424"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ac17c0b557e61cbfc9e8a740f8133e424">SetupASICPulserBits</a> (uint8_t iFEMB)</td></tr>
<tr class="separator:ac17c0b557e61cbfc9e8a740f8133e424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3210d80e994554c442f6a3c49842762" id="r_aa3210d80e994554c442f6a3c49842762"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aa3210d80e994554c442f6a3c49842762">SetupFEMBASICs</a> (uint8_t iFEMB, std::vector&lt; uint32_t &gt; registerList)</td></tr>
<tr class="memdesc:aa3210d80e994554c442f6a3c49842762"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup FEMB ASICs.  <br /></td></tr>
<tr class="separator:aa3210d80e994554c442f6a3c49842762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a7479b24f334147c7838a05dab51ac" id="r_ad8a7479b24f334147c7838a05dab51ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ad8a7479b24f334147c7838a05dab51ac">ConfigWIBFakeData</a> (bool enableFakeFEMB1, bool enableFakeFEMB2, bool enableFakeFEMB3, bool enableFakeFEMB4, bool counter)</td></tr>
<tr class="separator:ad8a7479b24f334147c7838a05dab51ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accb0871dfe7a4cc68e07e8bd84270c45" id="r_accb0871dfe7a4cc68e07e8bd84270c45"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#accb0871dfe7a4cc68e07e8bd84270c45">SetFEMBFakeCOLDATAMode</a> (uint8_t iFEMB, uint8_t iCD, bool mode=0)</td></tr>
<tr class="separator:accb0871dfe7a4cc68e07e8bd84270c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37b3b98809632f1f14a0d0c78d0839af" id="r_a37b3b98809632f1f14a0d0c78d0839af"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a37b3b98809632f1f14a0d0c78d0839af">GetFEMBFakeCOLDATAMode</a> (uint8_t iFEMB, uint8_t iCD)</td></tr>
<tr class="separator:a37b3b98809632f1f14a0d0c78d0839af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b9b90306ff5dd77f12f0f27cf2e512d" id="r_a7b9b90306ff5dd77f12f0f27cf2e512d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a7b9b90306ff5dd77f12f0f27cf2e512d">SetFEMBStreamSource</a> (uint8_t iFEMB, uint8_t iStream, bool real=true)</td></tr>
<tr class="separator:a7b9b90306ff5dd77f12f0f27cf2e512d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86882aeeac426be30e14e70a832ac1cd" id="r_a86882aeeac426be30e14e70a832ac1cd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a86882aeeac426be30e14e70a832ac1cd">GetFEMBStreamSource</a> (uint8_t iFEMB, uint8_t iStream)</td></tr>
<tr class="separator:a86882aeeac426be30e14e70a832ac1cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee312f1b8173b7f9c68503232ee8ae10" id="r_aee312f1b8173b7f9c68503232ee8ae10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aee312f1b8173b7f9c68503232ee8ae10">SetEventBuilderDebugMode</a> (uint8_t mask=0xF)</td></tr>
<tr class="separator:aee312f1b8173b7f9c68503232ee8ae10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2c2a5e6fec6bafce5e05d84352dff02" id="r_ab2c2a5e6fec6bafce5e05d84352dff02"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ab2c2a5e6fec6bafce5e05d84352dff02">GetEventBuilderDebugMode</a> ()</td></tr>
<tr class="separator:ab2c2a5e6fec6bafce5e05d84352dff02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae61504060a5708edc9593dd52e6b8c4b" id="r_ae61504060a5708edc9593dd52e6b8c4b"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ae61504060a5708edc9593dd52e6b8c4b">GetFEMBChar</a> (uint8_t iFEMB)</td></tr>
<tr class="separator:ae61504060a5708edc9593dd52e6b8c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b99751c2d5be04128f90ecf28e6db2e" id="r_a6b99751c2d5be04128f90ecf28e6db2e"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a6b99751c2d5be04128f90ecf28e6db2e">GetDAQLinkChar</a> (uint8_t iDAQLink)</td></tr>
<tr class="separator:a6b99751c2d5be04128f90ecf28e6db2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413230f17a971d980489977c0a496b00" id="r_a413230f17a971d980489977c0a496b00"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a413230f17a971d980489977c0a496b00">GetFEMBCDChar</a> (uint8_t iCD)</td></tr>
<tr class="separator:a413230f17a971d980489977c0a496b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5f237c6cbfb59423aa6915f35e290cd" id="r_ad5f237c6cbfb59423aa6915f35e290cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ad5f237c6cbfb59423aa6915f35e290cd">CheckDAQLinkInRange</a> (uint8_t iDAQLink)</td></tr>
<tr class="separator:ad5f237c6cbfb59423aa6915f35e290cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb7df8531abf8697bba12eda66f1f657" id="r_afb7df8531abf8697bba12eda66f1f657"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#afb7df8531abf8697bba12eda66f1f657">CheckFEMBInRange</a> (uint8_t iFEMB)</td></tr>
<tr class="separator:afb7df8531abf8697bba12eda66f1f657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b19492deecb8672e78168c1a6f67b3" id="r_a14b19492deecb8672e78168c1a6f67b3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a14b19492deecb8672e78168c1a6f67b3">CheckFEMBStreamInRange</a> (uint8_t iStream)</td></tr>
<tr class="separator:a14b19492deecb8672e78168c1a6f67b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d41e90f7cdf4fef8d2fdc004563c5d" id="r_ad1d41e90f7cdf4fef8d2fdc004563c5d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ad1d41e90f7cdf4fef8d2fdc004563c5d">CheckFEMBCDInRange</a> (uint8_t iCD)</td></tr>
<tr class="separator:ad1d41e90f7cdf4fef8d2fdc004563c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c7a7db84743cf777f35bae9c249411c" id="r_a6c7a7db84743cf777f35bae9c249411c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a6c7a7db84743cf777f35bae9c249411c">GetFEMBCount</a> ()</td></tr>
<tr class="separator:a6c7a7db84743cf777f35bae9c249411c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a1283ccecd2bf533107bc26bd5169cb" id="r_a3a1283ccecd2bf533107bc26bd5169cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classWIB.html#a22450657af92080a3406b875edc1b2c5">WIB_DAQ_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a3a1283ccecd2bf533107bc26bd5169cb">GetDAQMode</a> ()</td></tr>
<tr class="separator:a3a1283ccecd2bf533107bc26bd5169cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade9019f4eddcd9e02e6671e4528ebc31" id="r_ade9019f4eddcd9e02e6671e4528ebc31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ade9019f4eddcd9e02e6671e4528ebc31">SetContinueOnFEMBRegReadError</a> (bool enable)</td></tr>
<tr class="separator:ade9019f4eddcd9e02e6671e4528ebc31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace75573244320419af0b677a755805c4" id="r_ace75573244320419af0b677a755805c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ace75573244320419af0b677a755805c4">SetContinueOnFEMBSPIError</a> (bool enable)</td></tr>
<tr class="separator:ace75573244320419af0b677a755805c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a214dcd0deca2f16e56d71f89c8d681" id="r_a3a214dcd0deca2f16e56d71f89c8d681"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a3a214dcd0deca2f16e56d71f89c8d681">SetContinueOnFEMBSyncError</a> (bool enable)</td></tr>
<tr class="separator:a3a214dcd0deca2f16e56d71f89c8d681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9834338ff2231ff5903a8d8683d0e557" id="r_a9834338ff2231ff5903a8d8683d0e557"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a9834338ff2231ff5903a8d8683d0e557">SetContinueIfListOfFEMBClockPhasesDontSync</a> (bool enable)</td></tr>
<tr class="separator:a9834338ff2231ff5903a8d8683d0e557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classWIBBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classWIBBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classWIBBase.html">WIBBase</a></td></tr>
<tr class="memitem:a2e2c070d51102439344057d1149fb9e1 inherit pub_methods_classWIBBase" id="r_a2e2c070d51102439344057d1149fb9e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a2e2c070d51102439344057d1149fb9e1">WIBBase</a> (std::string const &amp;address, std::string const &amp;WIBAddressTable, std::string const &amp;FEMBAddressTable)</td></tr>
<tr class="separator:a2e2c070d51102439344057d1149fb9e1 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10ac23f4fa1bd93e9c5a26a365d587ea inherit pub_methods_classWIBBase" id="r_a10ac23f4fa1bd93e9c5a26a365d587ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a10ac23f4fa1bd93e9c5a26a365d587ea">~WIBBase</a> ()</td></tr>
<tr class="separator:a10ac23f4fa1bd93e9c5a26a365d587ea inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a350063a4ce6eb7f3a5414a22aa684328 inherit pub_methods_classWIBBase" id="r_a350063a4ce6eb7f3a5414a22aa684328"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a350063a4ce6eb7f3a5414a22aa684328">GetAddress</a> ()</td></tr>
<tr class="separator:a350063a4ce6eb7f3a5414a22aa684328 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ae5776376bb89db20643a9628e1584 inherit pub_methods_classWIBBase" id="r_ad0ae5776376bb89db20643a9628e1584"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a> (uint16_t address)</td></tr>
<tr class="separator:ad0ae5776376bb89db20643a9628e1584 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fbde6f545c83fb7c514e7c29a8ae7db inherit pub_methods_classWIBBase" id="r_a6fbde6f545c83fb7c514e7c29a8ae7db"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a> (uint16_t address)</td></tr>
<tr class="separator:a6fbde6f545c83fb7c514e7c29a8ae7db inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5128571ecdaa2e3b1967b605bb4f2401 inherit pub_methods_classWIBBase" id="r_a5128571ecdaa2e3b1967b605bb4f2401"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a5128571ecdaa2e3b1967b605bb4f2401">Read</a> (std::string const &amp;address)</td></tr>
<tr class="separator:a5128571ecdaa2e3b1967b605bb4f2401 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9764052a07a39034d5e616ef81647121 inherit pub_methods_classWIBBase" id="r_a9764052a07a39034d5e616ef81647121"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a9764052a07a39034d5e616ef81647121">ReadWithRetry</a> (std::string const &amp;address)</td></tr>
<tr class="separator:a9764052a07a39034d5e616ef81647121 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9b48ced65ab7fc0b0b2ccc938791c1c inherit pub_methods_classWIBBase" id="r_ad9b48ced65ab7fc0b0b2ccc938791c1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a> (uint16_t address, uint32_t value)</td></tr>
<tr class="separator:ad9b48ced65ab7fc0b0b2ccc938791c1c inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64a67538bc8d70f7647963437133f4bd inherit pub_methods_classWIBBase" id="r_a64a67538bc8d70f7647963437133f4bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a> (uint16_t address, uint32_t value)</td></tr>
<tr class="separator:a64a67538bc8d70f7647963437133f4bd inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec75f41b86c321b07d933021784f10d inherit pub_methods_classWIBBase" id="r_aaec75f41b86c321b07d933021784f10d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#aaec75f41b86c321b07d933021784f10d">Write</a> (std::string const &amp;address, uint32_t value)</td></tr>
<tr class="separator:aaec75f41b86c321b07d933021784f10d inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a8efa38b9d165d39967c8908a257952 inherit pub_methods_classWIBBase" id="r_a3a8efa38b9d165d39967c8908a257952"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a3a8efa38b9d165d39967c8908a257952">WriteWithRetry</a> (std::string const &amp;address, uint32_t value)</td></tr>
<tr class="separator:a3a8efa38b9d165d39967c8908a257952 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a47907c4de187a8b7d6c99848806310 inherit pub_methods_classWIBBase" id="r_a6a47907c4de187a8b7d6c99848806310"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a6a47907c4de187a8b7d6c99848806310">Write</a> (uint16_t address, std::vector&lt; uint32_t &gt; const &amp;values)</td></tr>
<tr class="separator:a6a47907c4de187a8b7d6c99848806310 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab50e63c9e77cccd1fe1acee0174f44 inherit pub_methods_classWIBBase" id="r_a7ab50e63c9e77cccd1fe1acee0174f44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a7ab50e63c9e77cccd1fe1acee0174f44">Write</a> (std::string const &amp;address, std::vector&lt; uint32_t &gt; const &amp;values)</td></tr>
<tr class="separator:a7ab50e63c9e77cccd1fe1acee0174f44 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0302f1139fa2c2387e5c7bba745bc6e inherit pub_methods_classWIBBase" id="r_ac0302f1139fa2c2387e5c7bba745bc6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ac0302f1139fa2c2387e5c7bba745bc6e">Write</a> (uint16_t address, uint32_t const *values, size_t word_count)</td></tr>
<tr class="separator:ac0302f1139fa2c2387e5c7bba745bc6e inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1da2e7342c775c1a3774c9f2d9c26c9e inherit pub_methods_classWIBBase" id="r_a1da2e7342c775c1a3774c9f2d9c26c9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a1da2e7342c775c1a3774c9f2d9c26c9e">Write</a> (std::string const &amp;address, uint32_t const *values, size_t word_count)</td></tr>
<tr class="separator:a1da2e7342c775c1a3774c9f2d9c26c9e inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5878023661817ee83b873db2470e456 inherit pub_methods_classWIBBase" id="r_ad5878023661817ee83b873db2470e456"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ad5878023661817ee83b873db2470e456">ReadI2C</a> (std::string const &amp;base_address, uint16_t I2C_aaddress, uint8_t byte_count=4)</td></tr>
<tr class="separator:ad5878023661817ee83b873db2470e456 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab04ba935fc8cfc74eaace8b5dd8c984c inherit pub_methods_classWIBBase" id="r_ab04ba935fc8cfc74eaace8b5dd8c984c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ab04ba935fc8cfc74eaace8b5dd8c984c">WriteI2C</a> (std::string const &amp;base_address, uint16_t I2C_address, uint32_t data, uint8_t byte_count=4, bool ignore_error=false)</td></tr>
<tr class="separator:ab04ba935fc8cfc74eaace8b5dd8c984c inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae74337e79eddbdb2694bfc9ced9d0920 inherit pub_methods_classWIBBase" id="r_ae74337e79eddbdb2694bfc9ced9d0920"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ae74337e79eddbdb2694bfc9ced9d0920">GetNames</a> (std::string const &amp;regex)</td></tr>
<tr class="separator:ae74337e79eddbdb2694bfc9ced9d0920 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ee622195f695faf85c8c2591857b07 inherit pub_methods_classWIBBase" id="r_a97ee622195f695faf85c8c2591857b07"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a97ee622195f695faf85c8c2591857b07">GetFEMBNames</a> (std::string const &amp;regex)</td></tr>
<tr class="separator:a97ee622195f695faf85c8c2591857b07 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35565dfb7658d1b5fc9468270be4b182 inherit pub_methods_classWIBBase" id="r_a35565dfb7658d1b5fc9468270be4b182"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a35565dfb7658d1b5fc9468270be4b182">GetAddresses</a> (uint16_t lower, uint16_t upper)</td></tr>
<tr class="separator:a35565dfb7658d1b5fc9468270be4b182 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab69ff8ad1ad87960a9a79eb54ce0a522 inherit pub_methods_classWIBBase" id="r_ab69ff8ad1ad87960a9a79eb54ce0a522"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ab69ff8ad1ad87960a9a79eb54ce0a522">GetFEMBAddresses</a> (uint16_t lower, uint16_t upper)</td></tr>
<tr class="separator:ab69ff8ad1ad87960a9a79eb54ce0a522 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2a878094d9c570f47bc8d76b08617cd inherit pub_methods_classWIBBase" id="r_aa2a878094d9c570f47bc8d76b08617cd"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#aa2a878094d9c570f47bc8d76b08617cd">GetTableNames</a> (std::string const &amp;regex)</td></tr>
<tr class="separator:aa2a878094d9c570f47bc8d76b08617cd inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae40660b593d58b97c2ab04c98665397b inherit pub_methods_classWIBBase" id="r_ae40660b593d58b97c2ab04c98665397b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classItem.html">Item</a> const * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ae40660b593d58b97c2ab04c98665397b">GetTagged</a> (std::string const &amp;tag)</td></tr>
<tr class="separator:ae40660b593d58b97c2ab04c98665397b inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf49ca176ebabdf515d0ba7d1b14a580 inherit pub_methods_classWIBBase" id="r_adf49ca176ebabdf515d0ba7d1b14a580"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classItem.html">Item</a> const * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#adf49ca176ebabdf515d0ba7d1b14a580">GetFEMBTagged</a> (std::string const &amp;tag)</td></tr>
<tr class="separator:adf49ca176ebabdf515d0ba7d1b14a580 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2982b68763cf557c93346fa13e0dbc6 inherit pub_methods_classWIBBase" id="r_ae2982b68763cf557c93346fa13e0dbc6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a> (int iFEMB, uint16_t address)</td></tr>
<tr class="separator:ae2982b68763cf557c93346fa13e0dbc6 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ac497afa1d3188c7722819a3be3309c inherit pub_methods_classWIBBase" id="r_a2ac497afa1d3188c7722819a3be3309c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a2ac497afa1d3188c7722819a3be3309c">ReadFEMB</a> (int iFEMB, std::string const &amp;address)</td></tr>
<tr class="separator:a2ac497afa1d3188c7722819a3be3309c inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9669f8fe4a34026640169dd0d14bc5d inherit pub_methods_classWIBBase" id="r_ab9669f8fe4a34026640169dd0d14bc5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a> (int iFEMB, uint16_t address, uint32_t value)</td></tr>
<tr class="separator:ab9669f8fe4a34026640169dd0d14bc5d inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad770dffaebc06690c0f3d401ad51ff0f inherit pub_methods_classWIBBase" id="r_ad770dffaebc06690c0f3d401ad51ff0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ad770dffaebc06690c0f3d401ad51ff0f">WriteFEMB</a> (int iFEMB, std::string const &amp;address, uint32_t value)</td></tr>
<tr class="separator:ad770dffaebc06690c0f3d401ad51ff0f inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68eee019d86430f8cea4dbf46b979b7a inherit pub_methods_classWIBBase" id="r_a68eee019d86430f8cea4dbf46b979b7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a68eee019d86430f8cea4dbf46b979b7a">WriteFEMBBits</a> (int iFEMB, uint16_t address, uint32_t pos, uint32_t mask, uint32_t value)</td></tr>
<tr class="separator:a68eee019d86430f8cea4dbf46b979b7a inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8c45f121b501472594fed37b03a0073 inherit pub_methods_classWIBBase" id="r_ae8c45f121b501472594fed37b03a0073"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ae8c45f121b501472594fed37b03a0073">EnableADC</a> (uint64_t iFEMB, uint64_t enable)</td></tr>
<tr class="separator:ae8c45f121b501472594fed37b03a0073 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b3111542e2b1288c7f587dc4e478623 inherit pub_methods_classWIBBase" id="r_a8b3111542e2b1288c7f587dc4e478623"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classItem.html">Item</a> const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a8b3111542e2b1288c7f587dc4e478623">GetItem</a> (std::string const &amp;)</td></tr>
<tr class="separator:a8b3111542e2b1288c7f587dc4e478623 inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8056050f3fa9b915bc4bc1bc39571fa inherit pub_methods_classWIBBase" id="r_ac8056050f3fa9b915bc4bc1bc39571fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classItem.html">Item</a> const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#ac8056050f3fa9b915bc4bc1bc39571fa">GetFEMBItem</a> (int iFEMB, std::string const &amp;)</td></tr>
<tr class="separator:ac8056050f3fa9b915bc4bc1bc39571fa inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bdfccb86f9e2515431dbffe8d753f3d inherit pub_methods_classWIBBase" id="r_a2bdfccb86f9e2515431dbffe8d753f3d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIBBase.html#a2bdfccb86f9e2515431dbffe8d753f3d">GetSVNVersion</a> ()</td></tr>
<tr class="separator:a2bdfccb86f9e2515431dbffe8d753f3d inherit pub_methods_classWIBBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ac9e4c151daf70b6c2d9bd6ec0d49bc9d" id="r_ac9e4c151daf70b6c2d9bd6ec0d49bc9d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ac9e4c151daf70b6c2d9bd6ec0d49bc9d">started</a></td></tr>
<tr class="separator:ac9e4c151daf70b6c2d9bd6ec0d49bc9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a7cf5911c6c51e82fee1e45f2d0162faf" id="r_a7cf5911c6c51e82fee1e45f2d0162faf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a7cf5911c6c51e82fee1e45f2d0162faf">WIB</a> ()</td></tr>
<tr class="separator:a7cf5911c6c51e82fee1e45f2d0162faf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d0713b7a81a9854b7d5e4b7d7dcfad2" id="r_a4d0713b7a81a9854b7d5e4b7d7dcfad2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a4d0713b7a81a9854b7d5e4b7d7dcfad2">WIB</a> (const <a class="el" href="classWIB.html">WIB</a> &amp;other)</td></tr>
<tr class="separator:a4d0713b7a81a9854b7d5e4b7d7dcfad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa3a2bc03e98cd58616fb4b8b64d919d" id="r_aaa3a2bc03e98cd58616fb4b8b64d919d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classWIB.html">WIB</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aaa3a2bc03e98cd58616fb4b8b64d919d">operator=</a> (const <a class="el" href="classWIB.html">WIB</a> &amp;)</td></tr>
<tr class="separator:aaa3a2bc03e98cd58616fb4b8b64d919d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa9d129f681000b46c546258c308be38f" id="r_aa9d129f681000b46c546258c308be38f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classWIB.html#a22450657af92080a3406b875edc1b2c5">WIB_DAQ_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a></td></tr>
<tr class="separator:aa9d129f681000b46c546258c308be38f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a0a594cc9504dcdd31372f47ffbef4" id="r_ad8a0a594cc9504dcdd31372f47ffbef4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a></td></tr>
<tr class="separator:ad8a0a594cc9504dcdd31372f47ffbef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713e1bfdc01fa56b930635243be0cddd" id="r_a713e1bfdc01fa56b930635243be0cddd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a713e1bfdc01fa56b930635243be0cddd">FEMBStreamCount</a></td></tr>
<tr class="separator:a713e1bfdc01fa56b930635243be0cddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d3fea1eedeb97fb0409855061d5bc6a" id="r_a2d3fea1eedeb97fb0409855061d5bc6a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a2d3fea1eedeb97fb0409855061d5bc6a">FEMBCDACount</a></td></tr>
<tr class="separator:a2d3fea1eedeb97fb0409855061d5bc6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9618b5ee613fd1be0fd911e4332cad" id="r_adb9618b5ee613fd1be0fd911e4332cad"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">DAQLinkCount</a></td></tr>
<tr class="separator:adb9618b5ee613fd1be0fd911e4332cad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ad9fed71dd8c922993104f6b6822109" id="r_a1ad9fed71dd8c922993104f6b6822109"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a1ad9fed71dd8c922993104f6b6822109">ContinueOnFEMBRegReadError</a></td></tr>
<tr class="separator:a1ad9fed71dd8c922993104f6b6822109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f34bbc7c653592b8f8abe147e738666" id="r_a5f34bbc7c653592b8f8abe147e738666"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a5f34bbc7c653592b8f8abe147e738666">ContinueOnFEMBSPIError</a></td></tr>
<tr class="separator:a5f34bbc7c653592b8f8abe147e738666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d275455a5edd1a5143c96be7868cac1" id="r_a3d275455a5edd1a5143c96be7868cac1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#a3d275455a5edd1a5143c96be7868cac1">ContinueOnFEMBSyncError</a></td></tr>
<tr class="separator:a3d275455a5edd1a5143c96be7868cac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93f4f251c09c4f0ebcf2299a0fe4daf" id="r_ac93f4f251c09c4f0ebcf2299a0fe4daf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWIB.html#ac93f4f251c09c4f0ebcf2299a0fe4daf">ContinueIfListOfFEMBClockPhasesDontSync</a></td></tr>
<tr class="separator:ac93f4f251c09c4f0ebcf2299a0fe4daf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00026">26</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a22450657af92080a3406b875edc1b2c5" name="a22450657af92080a3406b875edc1b2c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22450657af92080a3406b875edc1b2c5">&#9670;&#160;</a></span>WIB_DAQ_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classWIB.html#a22450657af92080a3406b875edc1b2c5">WIB::WIB_DAQ_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2" name="a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2"></a>UNKNOWN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370" name="a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370"></a>RCE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735" name="a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735"></a>FELIX&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00208">208</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  208</span>{<a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2">UNKNOWN</a>,<a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370">RCE</a>,<a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>};</div>
<div class="ttc" id="aclassWIB_html_a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2"><div class="ttname"><a href="classWIB.html#a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2">WIB::UNKNOWN</a></div><div class="ttdeci">@ UNKNOWN</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00208">WIB.hh:208</a></div></div>
<div class="ttc" id="aclassWIB_html_a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735"><div class="ttname"><a href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">WIB::FELIX</a></div><div class="ttdeci">@ FELIX</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00208">WIB.hh:208</a></div></div>
<div class="ttc" id="aclassWIB_html_a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370"><div class="ttname"><a href="classWIB.html#a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370">WIB::RCE</a></div><div class="ttdeci">@ RCE</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00208">WIB.hh:208</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2a07625c3f3e7eacd8267f3629d13e79" name="a2a07625c3f3e7eacd8267f3629d13e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a07625c3f3e7eacd8267f3629d13e79">&#9670;&#160;</a></span>WIB() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WIB::WIB </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>WIBAddressTable</em> = <code>&quot;WIB.adt&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>FEMBAddressTable</em> = <code>&quot;FEMB.adt&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fullStart</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00009">9</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    9</span>                                                                                                                        : </div>
<div class="line"><span class="lineno">   10</span>  <a class="code hl_function" href="classWIBBase.html#ae331055c30ace950aba92f2c81272275">WIBBase</a>(address,WIBAddressTable,FEMBAddressTable),<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a>(<a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2">UNKNOWN</a>),<a class="code hl_variable" href="classWIB.html#a713e1bfdc01fa56b930635243be0cddd">FEMBStreamCount</a>(4),<a class="code hl_variable" href="classWIB.html#a2d3fea1eedeb97fb0409855061d5bc6a">FEMBCDACount</a>(2),</div>
<div class="line"><span class="lineno">   11</span>  <a class="code hl_variable" href="classWIB.html#a1ad9fed71dd8c922993104f6b6822109">ContinueOnFEMBRegReadError</a>(<span class="keyword">false</span>),<a class="code hl_variable" href="classWIB.html#a5f34bbc7c653592b8f8abe147e738666">ContinueOnFEMBSPIError</a>(<span class="keyword">false</span>),<a class="code hl_variable" href="classWIB.html#a3d275455a5edd1a5143c96be7868cac1">ContinueOnFEMBSyncError</a>(<span class="keyword">true</span>),</div>
<div class="line"><span class="lineno">   12</span>  <a class="code hl_variable" href="classWIB.html#ac93f4f251c09c4f0ebcf2299a0fe4daf">ContinueIfListOfFEMBClockPhasesDontSync</a>(<span class="keyword">true</span>){</div>
<div class="line"><span class="lineno">   13</span> </div>
<div class="line"><span class="lineno">   14</span> </div>
<div class="line"><span class="lineno">   15</span>  <span class="keywordflow">if</span>(fullStart){</div>
<div class="line"><span class="lineno">   16</span>    <span class="comment">//Figure out what kind of WIB firmware we are dealing with</span></div>
<div class="line"><span class="lineno">   17</span>    <a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a> = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.FEMB_COUNT&quot;</span>);</div>
<div class="line"><span class="lineno">   18</span>    <a class="code hl_variable" href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">DAQLinkCount</a> = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.DAQ_LINK_COUNT&quot;</span>);</div>
<div class="line"><span class="lineno">   19</span>    <span class="comment">//Hardcoded lookup for RCE and FELIX</span></div>
<div class="line"><span class="lineno">   20</span>    <span class="keywordflow">if</span>((<a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a> == 4) &amp;&amp; (<a class="code hl_variable" href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">DAQLinkCount</a> == 4)){</div>
<div class="line"><span class="lineno">   21</span>      <a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> = <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370">RCE</a>;</div>
<div class="line"><span class="lineno">   22</span>    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a> == 4) &amp;&amp; (<a class="code hl_variable" href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">DAQLinkCount</a> == 2)){</div>
<div class="line"><span class="lineno">   23</span>      <a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> = <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>;</div>
<div class="line"><span class="lineno">   24</span>    }</div>
<div class="line"><span class="lineno">   25</span>    <span class="comment">//TODO check FEMBStreamCount and FEMCDACount from registers on the WIB</span></div>
<div class="line"><span class="lineno">   26</span>    <span class="comment">//TODO create those registers</span></div>
<div class="line"><span class="lineno">   27</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;POWER.ENABLE.MASTER_BIAS&quot;</span>,1);</div>
<div class="line"><span class="lineno">   28</span>    <a class="code hl_variable" href="classWIB.html#ac9e4c151daf70b6c2d9bd6ec0d49bc9d">started</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   29</span>  }</div>
<div class="line"><span class="lineno">   30</span>}</div>
<div class="ttc" id="aclassWIBBase_html_ad0ae5776376bb89db20643a9628e1584"><div class="ttname"><a href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">WIBBase::Read</a></div><div class="ttdeci">uint32_t Read(uint16_t address)</div><div class="ttdef"><b>Definition</b> <a href="WIBBase_8cpp_source.html#l00119">WIBBase.cpp:119</a></div></div>
<div class="ttc" id="aclassWIBBase_html_ad9b48ced65ab7fc0b0b2ccc938791c1c"><div class="ttname"><a href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">WIBBase::Write</a></div><div class="ttdeci">void Write(uint16_t address, uint32_t value)</div><div class="ttdef"><b>Definition</b> <a href="WIBBase_8cpp_source.html#l00132">WIBBase.cpp:132</a></div></div>
<div class="ttc" id="aclassWIBBase_html_ae331055c30ace950aba92f2c81272275"><div class="ttname"><a href="classWIBBase.html#ae331055c30ace950aba92f2c81272275">WIBBase::WIBBase</a></div><div class="ttdeci">WIBBase()</div></div>
<div class="ttc" id="aclassWIB_html_a1ad9fed71dd8c922993104f6b6822109"><div class="ttname"><a href="classWIB.html#a1ad9fed71dd8c922993104f6b6822109">WIB::ContinueOnFEMBRegReadError</a></div><div class="ttdeci">bool ContinueOnFEMBRegReadError</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00237">WIB.hh:237</a></div></div>
<div class="ttc" id="aclassWIB_html_a2d3fea1eedeb97fb0409855061d5bc6a"><div class="ttname"><a href="classWIB.html#a2d3fea1eedeb97fb0409855061d5bc6a">WIB::FEMBCDACount</a></div><div class="ttdeci">uint8_t FEMBCDACount</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00234">WIB.hh:234</a></div></div>
<div class="ttc" id="aclassWIB_html_a3d275455a5edd1a5143c96be7868cac1"><div class="ttname"><a href="classWIB.html#a3d275455a5edd1a5143c96be7868cac1">WIB::ContinueOnFEMBSyncError</a></div><div class="ttdeci">bool ContinueOnFEMBSyncError</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00239">WIB.hh:239</a></div></div>
<div class="ttc" id="aclassWIB_html_a5f34bbc7c653592b8f8abe147e738666"><div class="ttname"><a href="classWIB.html#a5f34bbc7c653592b8f8abe147e738666">WIB::ContinueOnFEMBSPIError</a></div><div class="ttdeci">bool ContinueOnFEMBSPIError</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00238">WIB.hh:238</a></div></div>
<div class="ttc" id="aclassWIB_html_a713e1bfdc01fa56b930635243be0cddd"><div class="ttname"><a href="classWIB.html#a713e1bfdc01fa56b930635243be0cddd">WIB::FEMBStreamCount</a></div><div class="ttdeci">uint8_t FEMBStreamCount</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00233">WIB.hh:233</a></div></div>
<div class="ttc" id="aclassWIB_html_aa9d129f681000b46c546258c308be38f"><div class="ttname"><a href="classWIB.html#aa9d129f681000b46c546258c308be38f">WIB::DAQMode</a></div><div class="ttdeci">WIB_DAQ_t DAQMode</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00231">WIB.hh:231</a></div></div>
<div class="ttc" id="aclassWIB_html_ac93f4f251c09c4f0ebcf2299a0fe4daf"><div class="ttname"><a href="classWIB.html#ac93f4f251c09c4f0ebcf2299a0fe4daf">WIB::ContinueIfListOfFEMBClockPhasesDontSync</a></div><div class="ttdeci">bool ContinueIfListOfFEMBClockPhasesDontSync</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00240">WIB.hh:240</a></div></div>
<div class="ttc" id="aclassWIB_html_ac9e4c151daf70b6c2d9bd6ec0d49bc9d"><div class="ttname"><a href="classWIB.html#ac9e4c151daf70b6c2d9bd6ec0d49bc9d">WIB::started</a></div><div class="ttdeci">bool started</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00033">WIB.hh:33</a></div></div>
<div class="ttc" id="aclassWIB_html_ad8a0a594cc9504dcdd31372f47ffbef4"><div class="ttname"><a href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">WIB::FEMBCount</a></div><div class="ttdeci">uint8_t FEMBCount</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00232">WIB.hh:232</a></div></div>
<div class="ttc" id="aclassWIB_html_adb9618b5ee613fd1be0fd911e4332cad"><div class="ttname"><a href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">WIB::DAQLinkCount</a></div><div class="ttdeci">uint8_t DAQLinkCount</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00235">WIB.hh:235</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af19a5075161790220fecc86fdbe04503" name="af19a5075161790220fecc86fdbe04503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af19a5075161790220fecc86fdbe04503">&#9670;&#160;</a></span>~WIB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WIB::~WIB </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00032">32</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span>         {</div>
<div class="line"><span class="lineno">   33</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7cf5911c6c51e82fee1e45f2d0162faf" name="a7cf5911c6c51e82fee1e45f2d0162faf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cf5911c6c51e82fee1e45f2d0162faf">&#9670;&#160;</a></span>WIB() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WIB::WIB </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4d0713b7a81a9854b7d5e4b7d7dcfad2" name="a4d0713b7a81a9854b7d5e4b7d7dcfad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d0713b7a81a9854b7d5e4b7d7dcfad2">&#9670;&#160;</a></span>WIB() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WIB::WIB </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classWIB.html">WIB</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2b0426ba31e00d8fb2369b1d99060836" name="a2b0426ba31e00d8fb2369b1d99060836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b0426ba31e00d8fb2369b1d99060836">&#9670;&#160;</a></span>CaptureHistory() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; uint32_t &gt; WIB::CaptureHistory </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__History_8cpp_source.html#l00003">3</a> of file <a class="el" href="WIB__History_8cpp_source.html">WIB_History.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    3</span>                                                                {</div>
<div class="line"><span class="lineno">    4</span>  std::vector&lt;uint32_t&gt; <a class="code hl_variable" href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">ret</a>;</div>
<div class="line"><span class="lineno">    5</span>  uint32_t val;</div>
<div class="line"><span class="lineno">    6</span>  <span class="keywordflow">while</span>( (val = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(address)) &amp; 0x1){</div>
<div class="line"><span class="lineno">    7</span>    <a class="code hl_variable" href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">ret</a>.push_back(val);</div>
<div class="line"><span class="lineno">    8</span>  }</div>
<div class="line"><span class="lineno">    9</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">ret</a>;</div>
<div class="line"><span class="lineno">   10</span>}</div>
<div class="ttc" id="anamespacecheckLinks_html_a54e97434ff6ffa7352831fbf2a93c0c3"><div class="ttname"><a href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">checkLinks.ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition</b> <a href="checkLinks_8py_source.html#l00008">checkLinks.py:8</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace6809b1762a4a5418c92477deb6ea25" name="ace6809b1762a4a5418c92477deb6ea25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace6809b1762a4a5418c92477deb6ea25">&#9670;&#160;</a></span>CaptureHistory() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="WIB_8hh.html#a396787e5ec029b1205bd3e4cd9763e7d">uint128_t</a> &gt; WIB::CaptureHistory </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>wordCount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__History_8cpp_source.html#l00012">12</a> of file <a class="el" href="WIB__History_8cpp_source.html">WIB_History.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   12</span>                                                                                  {</div>
<div class="line"><span class="lineno">   13</span>  std::vector&lt;uint128_t&gt; <a class="code hl_variable" href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">ret</a>;</div>
<div class="line"><span class="lineno">   14</span>  <span class="keywordtype">bool</span> capture = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   15</span>  uint16_t addr = <a class="code hl_function" href="classWIBBase.html#a8b3111542e2b1288c7f587dc4e478623">GetItem</a>(address)-&gt;<a class="code hl_variable" href="classItem.html#a69d28b5450c414860a31292bff6d1c80">address</a>;</div>
<div class="line"><span class="lineno">   16</span>  <span class="keywordflow">while</span>(capture){</div>
<div class="line"><span class="lineno">   17</span>    <a class="code hl_typedef" href="WIB_8hh.html#a396787e5ec029b1205bd3e4cd9763e7d">uint128_t</a> val = 0;  </div>
<div class="line"><span class="lineno">   18</span>    <span class="comment">//Read address last since it causes the incr.</span></div>
<div class="line"><span class="lineno">   19</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> <a class="code hl_variable" href="conversions-impl_8hh.html#a129303e4bd38a8cdba722b6238ed56e9">offset</a> = wordCount;<a class="code hl_variable" href="conversions-impl_8hh.html#a129303e4bd38a8cdba722b6238ed56e9">offset</a> &gt; 0;<a class="code hl_variable" href="conversions-impl_8hh.html#a129303e4bd38a8cdba722b6238ed56e9">offset</a>--){</div>
<div class="line"><span class="lineno">   20</span>      val |= <a class="code hl_typedef" href="WIB_8hh.html#a396787e5ec029b1205bd3e4cd9763e7d">uint128_t</a>(<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(addr+(<a class="code hl_variable" href="conversions-impl_8hh.html#a129303e4bd38a8cdba722b6238ed56e9">offset</a>-1)) &lt;&lt; 32*(<a class="code hl_variable" href="conversions-impl_8hh.html#a129303e4bd38a8cdba722b6238ed56e9">offset</a>-1));</div>
<div class="line"><span class="lineno">   21</span>    }</div>
<div class="line"><span class="lineno">   22</span>    <a class="code hl_variable" href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">ret</a>.push_back(val);</div>
<div class="line"><span class="lineno">   23</span>    <span class="keywordflow">if</span>(!(val &amp; 0x1)){</div>
<div class="line"><span class="lineno">   24</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   25</span>    }</div>
<div class="line"><span class="lineno">   26</span>  }</div>
<div class="line"><span class="lineno">   27</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">ret</a>;</div>
<div class="line"><span class="lineno">   28</span>}</div>
<div class="ttc" id="aWIB_8hh_html_a396787e5ec029b1205bd3e4cd9763e7d"><div class="ttname"><a href="WIB_8hh.html#a396787e5ec029b1205bd3e4cd9763e7d">uint128_t</a></div><div class="ttdeci">unsigned __int128 uint128_t</div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00014">WIB.hh:14</a></div></div>
<div class="ttc" id="aclassItem_html_a69d28b5450c414860a31292bff6d1c80"><div class="ttname"><a href="classItem.html#a69d28b5450c414860a31292bff6d1c80">Item::address</a></div><div class="ttdeci">uint16_t address</div><div class="ttdef"><b>Definition</b> <a href="AddressTable_8hh_source.html#l00018">AddressTable.hh:18</a></div></div>
<div class="ttc" id="aclassWIBBase_html_a8b3111542e2b1288c7f587dc4e478623"><div class="ttname"><a href="classWIBBase.html#a8b3111542e2b1288c7f587dc4e478623">WIBBase::GetItem</a></div><div class="ttdeci">Item const * GetItem(std::string const &amp;)</div><div class="ttdef"><b>Definition</b> <a href="WIBBase_8cpp_source.html#l00103">WIBBase.cpp:103</a></div></div>
<div class="ttc" id="aconversions-impl_8hh_html_a129303e4bd38a8cdba722b6238ed56e9"><div class="ttname"><a href="conversions-impl_8hh.html#a129303e4bd38a8cdba722b6238ed56e9">offset</a></div><div class="ttdeci">double offset</div><div class="ttdef"><b>Definition</b> <a href="conversions-impl_8hh_source.html#l00028">conversions-impl.hh:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5f237c6cbfb59423aa6915f35e290cd" name="ad5f237c6cbfb59423aa6915f35e290cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5f237c6cbfb59423aa6915f35e290cd">&#9670;&#160;</a></span>CheckDAQLinkInRange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::CheckDAQLinkInRange </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iDAQLink</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00509">509</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  509</span>                                             {</div>
<div class="line"><span class="lineno">  510</span>  <span class="keywordflow">if</span>(!((iDAQLink &gt; 0) &amp;&amp; (iDAQLink &lt;= <a class="code hl_variable" href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">DAQLinkCount</a>))){</div>
<div class="line"><span class="lineno">  511</span>    BUException::WIB_INDEX_OUT_OF_RANGE e;</div>
<div class="line"><span class="lineno">  512</span>    e.Append(<span class="stringliteral">&quot;DAQ Link\n&quot;</span>);</div>
<div class="line"><span class="lineno">  513</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  514</span>  } </div>
<div class="line"><span class="lineno">  515</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  516</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a338ec480efa5ac5b7eaa02a362323647" name="a338ec480efa5ac5b7eaa02a362323647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338ec480efa5ac5b7eaa02a362323647">&#9670;&#160;</a></span>CheckedResetWIBAndCfgDTS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::CheckedResetWIBAndCfgDTS </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>localClock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>PDTS_TGRP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>PDTSsource</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>PDTSAlignment_timeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00272">272</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  272</span>                                                                                                                            {</div>
<div class="line"><span class="lineno">  273</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2">UNKNOWN</a>){</div>
<div class="line"><span class="lineno">  274</span>    BUException::WIB_DAQMODE_UNKNOWN e;</div>
<div class="line"><span class="lineno">  275</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  276</span>  }</div>
<div class="line"><span class="lineno">  277</span>  <span class="keywordflow">if</span>(localClock &gt; 1){</div>
<div class="line"><span class="lineno">  278</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  279</span>    e.Append(<span class="stringliteral">&quot;localClock &gt; 1; must be 0 (for DTS) or 1 (for local clock)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  281</span>  }</div>
<div class="line"><span class="lineno">  282</span>  <span class="keywordflow">if</span>(PDTSsource &gt; 1){</div>
<div class="line"><span class="lineno">  283</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  284</span>    e.Append(<span class="stringliteral">&quot;PDTSsource &gt; 1; must be 0 (for backplane) or 1 (for front panel)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  286</span>  }</div>
<div class="line"><span class="lineno">  287</span>  <span class="keywordflow">if</span>(16 &lt;= PDTS_TGRP){</div>
<div class="line"><span class="lineno">  288</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  289</span>    e.Append(<span class="stringliteral">&quot;PDTS TGRP &gt; 15; must be 0 to 15\n&quot;</span>);</div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  291</span>  }</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>  <span class="keywordtype">bool</span> reset_check = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  295</span>  <span class="comment">// Check if we are already in a good state</span></div>
<div class="line"><span class="lineno">  296</span>  <span class="keywordflow">if</span>(localClock &gt; 0){</div>
<div class="line"><span class="lineno">  297</span>    printf(<span class="stringliteral">&quot;Checking if locked on local clock\n&quot;</span>);</div>
<div class="line"><span class="lineno">  298</span>    reset_check = (  (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.EN_FAKE&quot;</span>) != 1) </div>
<div class="line"><span class="lineno">  299</span>                  || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.CCONVERT_CONTROL.LOCAL_TIMESTAMP&quot;</span>) != 1)</div>
<div class="line"><span class="lineno">  300</span>                  || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_CLOCK_SELECT&quot;</span>) != 1) </div>
<div class="line"><span class="lineno">  301</span>             <span class="comment">//                  || (Read(&quot;FEMB_CNC.ENABLE_DTS_CMDS&quot;) != 1) </span></div>
<div class="line"><span class="lineno">  302</span>                  || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.SI5344.INPUT_SELECT&quot;</span>) != 1)</div>
<div class="line"><span class="lineno">  303</span>                  || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.SI5344.ENABLE&quot;</span>) != 1) );                  </div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">if</span>(!reset_check){</div>
<div class="line"><span class="lineno">  305</span>      printf(<span class="stringliteral">&quot;Already in a good state\n&quot;</span>); </div>
<div class="line"><span class="lineno">  306</span>    }</div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  308</span>      printf(<span class="stringliteral">&quot;Need to reset for local clocking\n&quot;</span>);</div>
<div class="line"><span class="lineno">  309</span>    }</div>
<div class="line"><span class="lineno">  310</span>  }</div>
<div class="line"><span class="lineno">  311</span>  <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  312</span>    printf(<span class="stringliteral">&quot;Checking if locked on PDTS\n&quot;</span>);</div>
<div class="line"><span class="lineno">  313</span>    reset_check = (  (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.PDTS_TGRP&quot;</span>) != PDTS_TGRP) </div>
<div class="line"><span class="lineno">  314</span>                  || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_CLOCK_SELECT&quot;</span>) != 1)</div>
<div class="line"><span class="lineno">  315</span>                  || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.PDTS_ENABLE&quot;</span>) != 1)</div>
<div class="line"><span class="lineno">  316</span>                  || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.CDS.LOL&quot;</span>) != 0)</div>
<div class="line"><span class="lineno">  317</span>                  || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.CDS.LOS&quot;</span>) != 0)</div>
<div class="line"><span class="lineno">  318</span>                  || (<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.INPUT_SELECT&quot;</span>) != 0)</div>
<div class="line"><span class="lineno">  319</span>                  || (<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.LOS&quot;</span>) != 0)</div>
<div class="line"><span class="lineno">  320</span>                  || (<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.LOL&quot;</span>) != 0)</div>
<div class="line"><span class="lineno">  321</span>                  || (<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.ENABLE&quot;</span>) != 1)</div>
<div class="line"><span class="lineno">  322</span>                  || (<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;DTS.PDTS_STATE&quot;</span>) != 0x8) );</div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">if</span>(!reset_check){</div>
<div class="line"><span class="lineno">  324</span>      printf(<span class="stringliteral">&quot;Already in a good state\n&quot;</span>);      </div>
<div class="line"><span class="lineno">  325</span>    }</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  327</span>      printf(<span class="stringliteral">&quot;Need to reset for PDTS\n&quot;</span>);</div>
<div class="line"><span class="lineno">  328</span>    }</div>
<div class="line"><span class="lineno">  329</span>  }</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>  <span class="comment">//Check the SI5342 if we&#39;re attached to FELIX</span></div>
<div class="line"><span class="lineno">  332</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>){</div>
<div class="line"><span class="lineno">  333</span>         </div>
<div class="line"><span class="lineno">  334</span>    <span class="keywordflow">if</span>( </div>
<div class="line"><span class="lineno">  335</span>        (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DAQ.SI5342.ENABLE&quot;</span>) == 0)</div>
<div class="line"><span class="lineno">  336</span>        || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DAQ.SI5342.INPUT_SELECT&quot;</span>) != 1) </div>
<div class="line"><span class="lineno">  337</span>        || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DAQ.SI5342.LOL&quot;</span>) == 1) </div>
<div class="line"><span class="lineno">  338</span>        || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DAQ.SI5342.LOS_XAXB&quot;</span>) == 1) </div>
<div class="line"><span class="lineno">  339</span>        || (<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DAQ.SI5342.LOS_2&quot;</span>) == 1) ){</div>
<div class="line"><span class="lineno">  340</span>      printf(<span class="stringliteral">&quot;Need to reset for SI5342\n&quot;</span>); </div>
<div class="line"><span class="lineno">  341</span>      reset_check = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  342</span>    }</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  344</span>      printf(<span class="stringliteral">&quot;SI5342 in good state\n&quot;</span>);</div>
<div class="line"><span class="lineno">  345</span>    }</div>
<div class="line"><span class="lineno">  346</span>  }</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>  <span class="keywordflow">if</span>(reset_check){</div>
<div class="line"><span class="lineno">  349</span>    <span class="comment">// get this register so we can leave it in the state it started in</span></div>
<div class="line"><span class="lineno">  350</span>    uint32_t slow_control_dnd = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>);</div>
<div class="line"><span class="lineno">  351</span>  </div>
<div class="line"><span class="lineno">  352</span>    <a class="code hl_function" href="classWIB.html#a1df27e11950165c5f3ea714d88da5c4e">ResetWIB</a>();</div>
<div class="line"><span class="lineno">  353</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,1);</div>
<div class="line"><span class="lineno">  354</span>  </div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iFEMB=1; iFEMB&lt;=4; iFEMB++){</div>
<div class="line"><span class="lineno">  356</span>      <a class="code hl_function" href="classWIB.html#aa6d7dc613257e9c11c359252069ec45e">FEMBPower</a>(iFEMB,0);</div>
<div class="line"><span class="lineno">  357</span>    }</div>
<div class="line"><span class="lineno">  358</span>    </div>
<div class="line"><span class="lineno">  359</span>    <span class="comment">//make sure everything DTS is off</span></div>
<div class="line"><span class="lineno">  360</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.HALT&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  361</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  362</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.START_SYNC&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  363</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  364</span>  </div>
<div class="line"><span class="lineno">  365</span>    <span class="keywordflow">if</span>(localClock &gt; 0){</div>
<div class="line"><span class="lineno">  366</span>      printf(<span class="stringliteral">&quot;Configuring local clock\n&quot;</span>);</div>
<div class="line"><span class="lineno">  367</span>      <span class="comment">//Configure the SI5344 to use the local oscillator instead of the PDTS</span></div>
<div class="line"><span class="lineno">  368</span>      <a class="code hl_function" href="classWIB.html#a2846252140d13dbf862b4351aa0b0500">LoadConfigDTS_SI5344</a>(<span class="stringliteral">&quot;default&quot;</span>);</div>
<div class="line"><span class="lineno">  369</span>      <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  370</span>      <a class="code hl_function" href="classWIB.html#a862a957d3838b82d858f5886d3f665ad">SelectSI5344</a>(1,1);</div>
<div class="line"><span class="lineno">  371</span>      <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  372</span>      <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.EN_FAKE&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  373</span>      <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.LOCAL_TIMESTAMP&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  374</span>      <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_CLOCK_SELECT&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  375</span>      <span class="comment">//      Write(&quot;FEMB_CNC.ENABLE_DTS_CMDS&quot;,1);  </span></div>
<div class="line"><span class="lineno">  376</span>      <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  377</span>    }</div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  379</span>      <span class="comment">//Configure the clocking for the PDTS (assumes the PDTS is sending idle or something)</span></div>
<div class="line"><span class="lineno">  380</span>      printf(<span class="stringliteral">&quot;Configuring DTS\n&quot;</span>);</div>
<div class="line"><span class="lineno">  381</span>      <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.PDTS_TGRP&quot;</span>,PDTS_TGRP);</div>
<div class="line"><span class="lineno">  382</span>      printf(<span class="stringliteral">&quot;Using timing group 0x%X\n&quot;</span>,PDTS_TGRP);</div>
<div class="line"><span class="lineno">  383</span>      <a class="code hl_function" href="classWIB.html#a4f684559b36ca03641249e2db91f6516">InitializeDTS</a>(PDTSsource,0,PDTSAlignment_timeout);</div>
<div class="line"><span class="lineno">  384</span>      <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  385</span>      <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_CLOCK_SELECT&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  386</span>      <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  387</span>      <span class="comment">//We are ready for the PDTS, start searching</span></div>
<div class="line"><span class="lineno">  388</span>      <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.PDTS_ENABLE&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  389</span>      <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  390</span>    }</div>
<div class="line"><span class="lineno">  391</span>  </div>
<div class="line"><span class="lineno">  392</span>  </div>
<div class="line"><span class="lineno">  393</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,slow_control_dnd);</div>
<div class="line"><span class="lineno">  394</span>  }</div>
<div class="line"><span class="lineno">  395</span>  <span class="comment">//Now we have the 128MHz clock</span></div>
<div class="line"><span class="lineno">  396</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;Resetting DAQ Links&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  397</span>  <span class="keywordtype">size_t</span> nLinks = 4;</div>
<div class="line"><span class="lineno">  398</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>){ nLinks = 2; }</div>
<div class="line"><span class="lineno">  399</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iLink=1; iLink &lt;= nLinks; ++iLink){</div>
<div class="line"><span class="lineno">  400</span>    std::cout &lt;&lt; iLink &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  401</span>    <a class="code hl_function" href="classWIB.html#a7313e28e40b4bc66b57052785602ec8a">EnableDAQLink_Lite</a>(iLink, 0);</div>
<div class="line"><span class="lineno">  402</span>  }</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB1.DAQ.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  405</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB2.DAQ.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  406</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB3.DAQ.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  407</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB4.DAQ.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>}</div>
<div class="ttc" id="aWIB__FEMB_8cpp_html_a82b8e21bd452d01ad6d32a0d73fbfdc8"><div class="ttname"><a href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a></div><div class="ttdeci">#define sleep(x)</div><div class="ttdef"><b>Definition</b> <a href="WIB__FEMB_8cpp_source.html#l00012">WIB_FEMB.cpp:12</a></div></div>
<div class="ttc" id="aclassWIBBase_html_a6fbde6f545c83fb7c514e7c29a8ae7db"><div class="ttname"><a href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">WIBBase::ReadWithRetry</a></div><div class="ttdeci">uint32_t ReadWithRetry(uint16_t address)</div><div class="ttdef"><b>Definition</b> <a href="WIBBase_8cpp_source.html#l00116">WIBBase.cpp:116</a></div></div>
<div class="ttc" id="aclassWIB_html_a1df27e11950165c5f3ea714d88da5c4e"><div class="ttname"><a href="classWIB.html#a1df27e11950165c5f3ea714d88da5c4e">WIB::ResetWIB</a></div><div class="ttdeci">void ResetWIB(bool reset_udp=false)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00138">WIB.cpp:138</a></div></div>
<div class="ttc" id="aclassWIB_html_a2846252140d13dbf862b4351aa0b0500"><div class="ttname"><a href="classWIB.html#a2846252140d13dbf862b4351aa0b0500">WIB::LoadConfigDTS_SI5344</a></div><div class="ttdeci">void LoadConfigDTS_SI5344(std::string const &amp;fileName)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5344_8cpp_source.html#l00034">WIB_SI5344.cpp:34</a></div></div>
<div class="ttc" id="aclassWIB_html_a4f684559b36ca03641249e2db91f6516"><div class="ttname"><a href="classWIB.html#a4f684559b36ca03641249e2db91f6516">WIB::InitializeDTS</a></div><div class="ttdeci">void InitializeDTS(uint8_t PDTSsource=0, uint8_t clockSource=0, uint32_t PDTSAlignment_timeout=0)</div><div class="ttdef"><b>Definition</b> <a href="WIB__DTS_8cpp_source.html#l00012">WIB_DTS.cpp:12</a></div></div>
<div class="ttc" id="aclassWIB_html_a7313e28e40b4bc66b57052785602ec8a"><div class="ttname"><a href="classWIB.html#a7313e28e40b4bc66b57052785602ec8a">WIB::EnableDAQLink_Lite</a></div><div class="ttdeci">void EnableDAQLink_Lite(uint8_t iDAQLink, uint8_t enable)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00077">WIB.cpp:77</a></div></div>
<div class="ttc" id="aclassWIB_html_a862a957d3838b82d858f5886d3f665ad"><div class="ttname"><a href="classWIB.html#a862a957d3838b82d858f5886d3f665ad">WIB::SelectSI5344</a></div><div class="ttdeci">void SelectSI5344(uint64_t input, bool enable)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5344_8cpp_source.html#l00138">WIB_SI5344.cpp:138</a></div></div>
<div class="ttc" id="aclassWIB_html_aa6d7dc613257e9c11c359252069ec45e"><div class="ttname"><a href="classWIB.html#aa6d7dc613257e9c11c359252069ec45e">WIB::FEMBPower</a></div><div class="ttdeci">void FEMBPower(uint8_t iFEMB, bool turnOn)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00456">WIB.cpp:456</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1d41e90f7cdf4fef8d2fdc004563c5d" name="ad1d41e90f7cdf4fef8d2fdc004563c5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d41e90f7cdf4fef8d2fdc004563c5d">&#9670;&#160;</a></span>CheckFEMBCDInRange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::CheckFEMBCDInRange </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iCD</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00594">594</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  594</span>                                        {</div>
<div class="line"><span class="lineno">  595</span>  <span class="keywordflow">if</span>(!((iCDA &gt; 0) &amp;&amp; (iCDA &lt;= <a class="code hl_variable" href="classWIB.html#a2d3fea1eedeb97fb0409855061d5bc6a">FEMBCDACount</a>))){</div>
<div class="line"><span class="lineno">  596</span>    BUException::WIB_INDEX_OUT_OF_RANGE e;</div>
<div class="line"><span class="lineno">  597</span>    e.Append(<span class="stringliteral">&quot;FEMB CDA&quot;</span>);</div>
<div class="line"><span class="lineno">  598</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  599</span>  } </div>
<div class="line"><span class="lineno">  600</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  601</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afb7df8531abf8697bba12eda66f1f657" name="afb7df8531abf8697bba12eda66f1f657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb7df8531abf8697bba12eda66f1f657">&#9670;&#160;</a></span>CheckFEMBInRange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::CheckFEMBInRange </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00547">547</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  547</span>                                       {</div>
<div class="line"><span class="lineno">  548</span>  <span class="keywordflow">if</span>(!((iFEMB &gt; 0) &amp;&amp; (iFEMB &lt;= <a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a>))){</div>
<div class="line"><span class="lineno">  549</span>    BUException::WIB_INDEX_OUT_OF_RANGE e;</div>
<div class="line"><span class="lineno">  550</span>    e.Append(<span class="stringliteral">&quot;FEMB\n&quot;</span>);</div>
<div class="line"><span class="lineno">  551</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  552</span>  } </div>
<div class="line"><span class="lineno">  553</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  554</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a14b19492deecb8672e78168c1a6f67b3" name="a14b19492deecb8672e78168c1a6f67b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b19492deecb8672e78168c1a6f67b3">&#9670;&#160;</a></span>CheckFEMBStreamInRange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::CheckFEMBStreamInRange </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iStream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00585">585</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  585</span>                                               {</div>
<div class="line"><span class="lineno">  586</span>  <span class="keywordflow">if</span>(!((iStream &gt; 0) &amp;&amp; (iStream &lt;= <a class="code hl_variable" href="classWIB.html#a713e1bfdc01fa56b930635243be0cddd">FEMBStreamCount</a>))){</div>
<div class="line"><span class="lineno">  587</span>    BUException::WIB_INDEX_OUT_OF_RANGE e;</div>
<div class="line"><span class="lineno">  588</span>    e.Append(<span class="stringliteral">&quot;FEMB Stream&quot;</span>);</div>
<div class="line"><span class="lineno">  589</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  590</span>  } </div>
<div class="line"><span class="lineno">  591</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  592</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb500282eee287d96eb543cb097c50ce" name="aeb500282eee287d96eb543cb097c50ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb500282eee287d96eb543cb097c50ce">&#9670;&#160;</a></span>CheckFlash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::CheckFlash </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; uint32_t &gt;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>update_percentage</em> = <code>101</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__Flash_8cpp_source.html#l00294">294</a> of file <a class="el" href="WIB__Flash_8cpp_source.html">WIB_Flash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  294</span>                                                                           {</div>
<div class="line"><span class="lineno">  295</span>  <span class="keywordtype">bool</span> print_updates = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  296</span>  <span class="keywordflow">if</span>(update_percentage &lt; 100){</div>
<div class="line"><span class="lineno">  297</span>    print_updates = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  298</span>  }</div>
<div class="line"><span class="lineno">  299</span>  <span class="keywordtype">size_t</span> update_delta = (update_percentage * float(16*1024*1024/4))/100;</div>
<div class="line"><span class="lineno">  300</span>  <span class="keywordtype">size_t</span> next_update = update_delta;</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>  <span class="keywordflow">if</span>(print_updates){</div>
<div class="line"><span class="lineno">  303</span>    fprintf(stderr,<span class="stringliteral">&quot;   Checking flash\n&quot;</span>);</div>
<div class="line"><span class="lineno">  304</span>    fprintf(stderr,<span class="stringliteral">&quot;   [&quot;</span>);</div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; 100.0/update_percentage;i++){</div>
<div class="line"><span class="lineno">  306</span>      fprintf(stderr,<span class="stringliteral">&quot;=&quot;</span>);</div>
<div class="line"><span class="lineno">  307</span>    }</div>
<div class="line"><span class="lineno">  308</span>    fprintf(stderr,<span class="stringliteral">&quot;]\n   [&quot;</span>);</div>
<div class="line"><span class="lineno">  309</span>  }</div>
<div class="line"><span class="lineno">  310</span>  <span class="comment">//program flash in groups of 64 32bit words (256 bytes)</span></div>
<div class="line"><span class="lineno">  311</span>  uint32_t flashAddress = 0;  </div>
<div class="line"><span class="lineno">  312</span>  uint32_t blockRegMapAddress = <a class="code hl_function" href="classWIBBase.html#a8b3111542e2b1288c7f587dc4e478623">GetItem</a>(<span class="stringliteral">&quot;FLASH.DATA00&quot;</span>)-&gt;<a class="code hl_variable" href="classItem.html#a69d28b5450c414860a31292bff6d1c80">address</a>;</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> currentBlockStartIndex = 0; currentBlockStartIndex &lt; 16*1024*1024/4;){</div>
<div class="line"><span class="lineno">  315</span>    <a class="code hl_function" href="classWIB.html#a9b3d05f77b55fb2750fcc45c1a19d295">FlashCheckBusy</a>();</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>    <span class="comment">//Find size of this block to write (usually just 64 (256bytes)), but the last one might be smaller.</span></div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordtype">size_t</span> blockSize = std::min(<span class="keywordtype">size_t</span>(64),flashData.size()-currentBlockStartIndex);</div>
<div class="line"><span class="lineno">  319</span>    <span class="comment">//Set adddress</span></div>
<div class="line"><span class="lineno">  320</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.ADDRESS&quot;</span>,flashAddress);</div>
<div class="line"><span class="lineno">  321</span>    <span class="comment">//set block size (in bytes and is 1 less than value; 0 means 1 byte, 255 means 256 bytes)</span></div>
<div class="line"><span class="lineno">  322</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.BYTE_COUNT&quot;</span>,(blockSize*<span class="keyword">sizeof</span>(uint32_t))-1); </div>
<div class="line"><span class="lineno">  323</span>    <span class="comment">//Start read</span></div>
<div class="line"><span class="lineno">  324</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.RUN_COMMAND&quot;</span>,0x5);</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>    <a class="code hl_function" href="classWIB.html#a9b3d05f77b55fb2750fcc45c1a19d295">FlashCheckBusy</a>();</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="comment">//Check the data.</span></div>
<div class="line"><span class="lineno">  329</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iBlockWord = 0;iBlockWord &lt; blockSize;iBlockWord++){</div>
<div class="line"><span class="lineno">  330</span>      <span class="comment">//flashData:     Address in WIB register map of this 32bit word</span></div>
<div class="line"><span class="lineno">  331</span>      <span class="comment">//ReadWithRetry: Data from the flash for this word</span></div>
<div class="line"><span class="lineno">  332</span>      uint32_t dataRead;</div>
<div class="line"><span class="lineno">  333</span>      <span class="keywordflow">if</span>((dataRead = <a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(blockRegMapAddress + iBlockWord)) !=</div>
<div class="line"><span class="lineno">  334</span>     flashData[currentBlockStartIndex + iBlockWord]){</div>
<div class="line"><span class="lineno">  335</span>    BUException::WIB_FLASH_ERROR e; </div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordtype">char</span> errorbuffer[] = <span class="stringliteral">&quot;Error on index 0xXXXXXXXX: 0xXXXXXXXX != 0xXXXXXXXX&quot;</span>;</div>
<div class="line"><span class="lineno">  337</span>    snprintf(errorbuffer,</div>
<div class="line"><span class="lineno">  338</span>         strlen(errorbuffer),</div>
<div class="line"><span class="lineno">  339</span>         <span class="stringliteral">&quot;Error on index 0x%08X: 0x%08X != 0x%08X&quot;</span>,</div>
<div class="line"><span class="lineno">  340</span>         flashAddress,</div>
<div class="line"><span class="lineno">  341</span>         dataRead,</div>
<div class="line"><span class="lineno">  342</span>         flashData[currentBlockStartIndex + iBlockWord]);</div>
<div class="line"><span class="lineno">  343</span>    e.Append(errorbuffer);</div>
<div class="line"><span class="lineno">  344</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  345</span>      }</div>
<div class="line"><span class="lineno">  346</span>    }</div>
<div class="line"><span class="lineno">  347</span>    currentBlockStartIndex += blockSize;</div>
<div class="line"><span class="lineno">  348</span>    flashAddress += blockSize*<span class="keyword">sizeof</span>(uint32_t);</div>
<div class="line"><span class="lineno">  349</span>    </div>
<div class="line"><span class="lineno">  350</span>    <span class="keywordflow">if</span>(print_updates &amp;&amp; (currentBlockStartIndex &gt; next_update)){</div>
<div class="line"><span class="lineno">  351</span>      fprintf(stderr,<span class="stringliteral">&quot;=&quot;</span>);</div>
<div class="line"><span class="lineno">  352</span>      next_update += update_delta;</div>
<div class="line"><span class="lineno">  353</span>    }</div>
<div class="line"><span class="lineno">  354</span>  }</div>
<div class="line"><span class="lineno">  355</span>  <span class="keywordflow">if</span>(print_updates){</div>
<div class="line"><span class="lineno">  356</span>    printf(<span class="stringliteral">&quot;]\n&quot;</span>);</div>
<div class="line"><span class="lineno">  357</span>    printf(<span class="stringliteral">&quot;   Check passed\n&quot;</span>);</div>
<div class="line"><span class="lineno">  358</span>  }  </div>
<div class="line"><span class="lineno">  359</span>}</div>
<div class="ttc" id="aclassWIBBase_html_a64a67538bc8d70f7647963437133f4bd"><div class="ttname"><a href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WIBBase::WriteWithRetry</a></div><div class="ttdeci">void WriteWithRetry(uint16_t address, uint32_t value)</div><div class="ttdef"><b>Definition</b> <a href="WIBBase_8cpp_source.html#l00129">WIBBase.cpp:129</a></div></div>
<div class="ttc" id="aclassWIB_html_a9b3d05f77b55fb2750fcc45c1a19d295"><div class="ttname"><a href="classWIB.html#a9b3d05f77b55fb2750fcc45c1a19d295">WIB::FlashCheckBusy</a></div><div class="ttdeci">void FlashCheckBusy()</div><div class="ttdef"><b>Definition</b> <a href="WIB__Flash_8cpp_source.html#l00362">WIB_Flash.cpp:362</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a285e68dc04c8330ab1b9b7f5f9deeeb0" name="a285e68dc04c8330ab1b9b7f5f9deeeb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a285e68dc04c8330ab1b9b7f5f9deeeb0">&#9670;&#160;</a></span>ConfigFEMB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ConfigFEMB </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint32_t &gt;&#160;</td>
          <td class="paramname"><em>fe_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint16_t &gt;&#160;</td>
          <td class="paramname"><em>clk_phases</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pls_mode</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pls_dac_val</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>start_frame_mode_sel</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>start_frame_swap</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup FEMB in real or pulser data mode. </p>
<p>Sets up iFEMB (index from 1) fe_config: list of options to configure the FE ASICs: Gain: 0,1,2,3 for 4.7, 7.8, 14, 25 mV/fC, respectively Shaping Time: 0,1,2,3 for 0.5, 1, 2, 3 us, respectively High Baseline: 0 for 200 mV, 1 for 900 mV, 2 for 200 mV on collection and 900 mV on induction High Leakage: 0 for 100 pA, 1 for 500 pA Leakage x 10: if 1, multiply leakage times 10 AC Coupling : 0 for DC coupling, 1 for AC coupling (between FE and ADC) Buffer: 0 for disable and bypass, 1 for use (between FE and ADC) Use External Clock: 0 ADC use internal clock, 1 ADC use FPGA clocking (almost always want 1) clk_phases: a list of 16 bit values to try for the ADC clock phases. Tries these values until the sync check bits are all 0, and hunts for good values if these all fail. The most significant byte is ADC_ASIC_CLK_PHASE_SELECT (register 6) while the least significant byte is ADC_ASIC_CLK_PHASE_SELECT (register 15) pls_mode: pulser mode select: 0 off, 1 FE ASIC internal pulser, 2 FPGA pulser pls_dac_val: pulser DAC value (amplitude) 6-bits in ASIC test pulse mode, 5-bits in FPGA test pulse mode start_frame_mode_sel: 1 to make data frame start the way BU <a class="el" href="classWIB.html">WIB</a> firmware expects start_frame_swap: 1 to reverse the start bits </p>

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l00037">37</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   38</span>                                                                                                          {</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>  <span class="keywordflow">if</span> (iFEMB &lt; 1 || iFEMB &gt; 4)</div>
<div class="line"><span class="lineno">   41</span>  {</div>
<div class="line"><span class="lineno">   42</span>     BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">   43</span>     std::stringstream expstr;</div>
<div class="line"><span class="lineno">   44</span>     expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMB: iFEMB should be between 1 and 4: &quot;</span></div>
<div class="line"><span class="lineno">   45</span>            &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB);</div>
<div class="line"><span class="lineno">   46</span>     e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">   47</span>     <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   48</span>  }</div>
<div class="line"><span class="lineno">   49</span>  <span class="keywordflow">if</span> (pls_mode &gt; 2)</div>
<div class="line"><span class="lineno">   50</span>  {</div>
<div class="line"><span class="lineno">   51</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">   52</span>    std::stringstream expstr;</div>
<div class="line"><span class="lineno">   53</span>    expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMB: pls_dac_mode is allowed to be 0 (off), 1 (FPGA), 2 (internal), but is: &quot;</span></div>
<div class="line"><span class="lineno">   54</span>           &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(pls_mode);</div>
<div class="line"><span class="lineno">   55</span>    e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   57</span>  }</div>
<div class="line"><span class="lineno">   58</span>  <span class="keywordflow">if</span> (start_frame_mode_sel &gt; 1 || start_frame_swap &gt; 1)</div>
<div class="line"><span class="lineno">   59</span>  {</div>
<div class="line"><span class="lineno">   60</span>     BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">   61</span>     std::stringstream expstr;</div>
<div class="line"><span class="lineno">   62</span>     expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMB: start_frame_mode_sel and start_frame_swap must be 0 or 1&quot;</span>;</div>
<div class="line"><span class="lineno">   63</span>     e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">   64</span>     <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   65</span>  }</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>  <span class="keywordflow">if</span>(fe_config.size() != 8){</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">   70</span>    std::stringstream expstr;</div>
<div class="line"><span class="lineno">   71</span>    expstr &lt;&lt; <span class="stringliteral">&quot;Error: Expecting 9 Front End configuration options:&quot;</span> &lt;&lt; std::endl &lt;&lt;</div>
<div class="line"><span class="lineno">   72</span>    <span class="stringliteral">&quot;\t0: Gain&quot;</span> &lt;&lt; std::endl &lt;&lt; </div>
<div class="line"><span class="lineno">   73</span>    <span class="stringliteral">&quot;\t1: Shaping Time&quot;</span> &lt;&lt; std::endl &lt;&lt; </div>
<div class="line"><span class="lineno">   74</span>    <span class="stringliteral">&quot;\t2: High Baseline&quot;</span> &lt;&lt; std::endl &lt;&lt; </div>
<div class="line"><span class="lineno">   75</span>    <span class="stringliteral">&quot;\t3: High Leakage&quot;</span> &lt;&lt; std::endl &lt;&lt; </div>
<div class="line"><span class="lineno">   76</span>    <span class="stringliteral">&quot;\t4: Leakage x 10&quot;</span> &lt;&lt; std::endl &lt;&lt; </div>
<div class="line"><span class="lineno">   77</span>    <span class="stringliteral">&quot;\t5: AC Coupling&quot;</span> &lt;&lt; std::endl &lt;&lt; </div>
<div class="line"><span class="lineno">   78</span>    <span class="stringliteral">&quot;\t6: Buffer&quot;</span> &lt;&lt; std::endl &lt;&lt; </div>
<div class="line"><span class="lineno">   79</span>    <span class="stringliteral">&quot;\t7: Use External Clock&quot;</span> &lt;&lt; std::endl;     </div>
<div class="line"><span class="lineno">   80</span>    e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   82</span>  }</div>
<div class="line"><span class="lineno">   83</span>  <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   84</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Front End configuration options:&quot;</span> &lt;&lt; std::endl &lt;&lt;  </div>
<div class="line"><span class="lineno">   85</span>    <span class="stringliteral">&quot;\t0:&quot;</span> &lt;&lt; std::setw(22) &lt;&lt; std::setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt;  <span class="stringliteral">&quot;Gain &quot;</span>               &lt;&lt; fe_config[0] &lt;&lt; std::endl &lt;&lt;</div>
<div class="line"><span class="lineno">   86</span>    <span class="stringliteral">&quot;\t1:&quot;</span> &lt;&lt; std::setw(22) &lt;&lt; std::setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt;  <span class="stringliteral">&quot;Shaping Time &quot;</span>       &lt;&lt; fe_config[1] &lt;&lt; std::endl &lt;&lt;</div>
<div class="line"><span class="lineno">   87</span>    <span class="stringliteral">&quot;\t2:&quot;</span> &lt;&lt; std::setw(22) &lt;&lt; std::setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt;  <span class="stringliteral">&quot;High Baseline &quot;</span>      &lt;&lt; fe_config[2] &lt;&lt; std::endl &lt;&lt;</div>
<div class="line"><span class="lineno">   88</span>    <span class="stringliteral">&quot;\t3:&quot;</span> &lt;&lt; std::setw(22) &lt;&lt; std::setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt;  <span class="stringliteral">&quot;High Leakage &quot;</span>       &lt;&lt; fe_config[3] &lt;&lt; std::endl &lt;&lt;</div>
<div class="line"><span class="lineno">   89</span>    <span class="stringliteral">&quot;\t4:&quot;</span> &lt;&lt; std::setw(22) &lt;&lt; std::setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt;  <span class="stringliteral">&quot;Leakage x 10 &quot;</span>       &lt;&lt; fe_config[4] &lt;&lt; std::endl &lt;&lt;</div>
<div class="line"><span class="lineno">   90</span>    <span class="stringliteral">&quot;\t5:&quot;</span> &lt;&lt; std::setw(22) &lt;&lt; std::setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt;  <span class="stringliteral">&quot;AC Coupling &quot;</span>        &lt;&lt; fe_config[5] &lt;&lt; std::endl &lt;&lt;</div>
<div class="line"><span class="lineno">   91</span>    <span class="stringliteral">&quot;\t6:&quot;</span> &lt;&lt; std::setw(22) &lt;&lt; std::setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt;  <span class="stringliteral">&quot;Buffer &quot;</span>             &lt;&lt; fe_config[6] &lt;&lt; std::endl &lt;&lt;</div>
<div class="line"><span class="lineno">   92</span>    <span class="stringliteral">&quot;\t8:&quot;</span> &lt;&lt; std::setw(22) &lt;&lt; std::setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt;  <span class="stringliteral">&quot;Use External Clock &quot;</span> &lt;&lt; fe_config[7] &lt;&lt; std::endl; </div>
<div class="line"><span class="lineno">   93</span>  }</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;Pulser Mode: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(pls_mode) &lt;&lt; <span class="stringliteral">&quot; and DAC Value: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(pls_dac_val) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>  <span class="comment">// get this register so we can leave it in the state it started in</span></div>
<div class="line"><span class="lineno">   98</span>  uint32_t slow_control_dnd = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>);</div>
<div class="line"><span class="lineno">   99</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,1);</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,<span class="stringliteral">&quot;VERSION_ID&quot;</span>) == <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,<span class="stringliteral">&quot;SYS_RESET&quot;</span>)) { <span class="comment">// can&#39;t read register if equal</span></div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#a1ad9fed71dd8c922993104f6b6822109">ContinueOnFEMBRegReadError</a>){</div>
<div class="line"><span class="lineno">  103</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;Error: Can&#39;t read registers from FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  104</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  105</span>    }</div>
<div class="line"><span class="lineno">  106</span>    BUException::FEMB_REG_READ_ERROR e;</div>
<div class="line"><span class="lineno">  107</span>    std::stringstream expstr;</div>
<div class="line"><span class="lineno">  108</span>    expstr &lt;&lt; <span class="stringliteral">&quot; for FEMB: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB);</div>
<div class="line"><span class="lineno">  109</span>    e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  111</span>  }</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;REG_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  114</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;START_FRAME_MODE_SELECT&quot;</span>, start_frame_mode_sel);</div>
<div class="line"><span class="lineno">  117</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  118</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;START_FRAME_SWAP&quot;</span>, start_frame_swap);</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>  <span class="keywordflow">if</span>(fe_config[7]){ <span class="comment">// use external clock</span></div>
<div class="line"><span class="lineno">  121</span>    <a class="code hl_function" href="classWIB.html#a587fc3369aac2d83fa47d658ad240c65">SetupFEMBExtClock</a>(iFEMB);</div>
<div class="line"><span class="lineno">  122</span>  }</div>
<div class="line"><span class="lineno">  123</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.05);</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TIME_STAMP_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  126</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TIME_STAMP_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>  <span class="comment">// These are all Jack&#39;s WIB addresses, need to figure out Dan&#39;s addresses for functionality</span></div>
<div class="line"><span class="lineno">  130</span>  <span class="comment">//Write(1, 0);</span></div>
<div class="line"><span class="lineno">  131</span>  <span class="comment">//Write(1, 0);</span></div>
<div class="line"><span class="lineno">  132</span>  <span class="comment">//Write(1, 2);</span></div>
<div class="line"><span class="lineno">  133</span>  <span class="comment">//Write(1, 2);</span></div>
<div class="line"><span class="lineno">  134</span>  <span class="comment">//Write(1, 0);</span></div>
<div class="line"><span class="lineno">  135</span>  <span class="comment">//Write(1, 0);</span></div>
<div class="line"><span class="lineno">  136</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  138</span>  <span class="comment">//Write(18, 0x8000);</span></div>
<div class="line"><span class="lineno">  139</span>  <span class="comment">//Write(18, 0x8000);</span></div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>  <span class="comment">//Reset SPI</span></div>
<div class="line"><span class="lineno">  142</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  143</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.005);</div>
<div class="line"><span class="lineno">  144</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;ADC_ASIC_RESET&quot;</span>, 0x1);</div>
<div class="line"><span class="lineno">  145</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.005);</div>
<div class="line"><span class="lineno">  146</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;ADC_ASIC_RESET&quot;</span>, 0x1);</div>
<div class="line"><span class="lineno">  147</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.005);</div>
<div class="line"><span class="lineno">  148</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;FE_ASIC_RESET&quot;</span>, 0x1);</div>
<div class="line"><span class="lineno">  149</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.005);</div>
<div class="line"><span class="lineno">  150</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;FE_ASIC_RESET&quot;</span>, 0x1);</div>
<div class="line"><span class="lineno">  151</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.005);</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>  <span class="comment">//Set ADC latch_loc</span></div>
<div class="line"><span class="lineno">  154</span>  uint32_t REG_LATCHLOC1_4_data = 0x04040404;</div>
<div class="line"><span class="lineno">  155</span>  uint32_t REG_LATCHLOC5_8_data = 0x04040404;</div>
<div class="line"><span class="lineno">  156</span>  </div>
<div class="line"><span class="lineno">  157</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;ADC_LATCH_LOC_0TO3&quot;</span>, REG_LATCHLOC1_4_data);</div>
<div class="line"><span class="lineno">  158</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;ADC_LATCH_LOC_4TO7&quot;</span>, REG_LATCHLOC5_8_data);</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>  <span class="comment">// Setup pulser</span></div>
<div class="line"><span class="lineno">  161</span>  uint8_t internal_daq_value = 0;</div>
<div class="line"><span class="lineno">  162</span>  <span class="keywordflow">if</span> (pls_mode == 1) <span class="comment">// internal, FE ASIC, 6 bits</span></div>
<div class="line"><span class="lineno">  163</span>  {</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">if</span> (pls_dac_val &gt;= 63)</div>
<div class="line"><span class="lineno">  165</span>    {</div>
<div class="line"><span class="lineno">  166</span>      BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  167</span>      std::stringstream expstr;</div>
<div class="line"><span class="lineno">  168</span>      expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMB: pls_dac_val is 6 bits for internal DAC, must be 0-63, but is: &quot;</span></div>
<div class="line"><span class="lineno">  169</span>             &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(pls_dac_val);</div>
<div class="line"><span class="lineno">  170</span>      e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  171</span>      <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  172</span>    }</div>
<div class="line"><span class="lineno">  173</span>    internal_daq_value = pls_dac_val;</div>
<div class="line"><span class="lineno">  174</span>    <a class="code hl_function" href="classWIB.html#aa60b1350feac33a4908cde93bf369211">SetupInternalPulser</a>(iFEMB);</div>
<div class="line"><span class="lineno">  175</span>  }</div>
<div class="line"><span class="lineno">  176</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pls_mode == 2) <span class="comment">// external, FPGA, 5 bits</span></div>
<div class="line"><span class="lineno">  177</span>  {</div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordflow">if</span> (pls_dac_val &gt;= 32)</div>
<div class="line"><span class="lineno">  179</span>    {</div>
<div class="line"><span class="lineno">  180</span>      BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  181</span>      std::stringstream expstr;</div>
<div class="line"><span class="lineno">  182</span>      expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMB: pls_dac_val is 5 bits for FPGA DAC, must be 0-31, but is: &quot;</span></div>
<div class="line"><span class="lineno">  183</span>             &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(pls_dac_val);</div>
<div class="line"><span class="lineno">  184</span>      e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  185</span>      <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  186</span>    }</div>
<div class="line"><span class="lineno">  187</span>    <a class="code hl_function" href="classWIB.html#ae6e6e694b21bf8e4b9f85aef5f748307">SetupFPGAPulser</a>(iFEMB,pls_dac_val);</div>
<div class="line"><span class="lineno">  188</span>  }</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>  <span class="comment">// Setup ASICs</span></div>
<div class="line"><span class="lineno">  191</span>  <a class="code hl_function" href="classWIB.html#af983c68bc5186729c95df4bfc383eeda">SetupFEMBASICs</a>(iFEMB, fe_config[0], fe_config[1], fe_config[2], fe_config[3], fe_config[4], fe_config[5], fe_config[6], fe_config[7], pls_mode, internal_daq_value); </div>
<div class="line"><span class="lineno">  192</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; Successful SPI config&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>  <span class="comment">// Try to sync ADCs</span></div>
<div class="line"><span class="lineno">  195</span>  <span class="keywordflow">if</span> (clk_phases.size() == 0)</div>
<div class="line"><span class="lineno">  196</span>  {</div>
<div class="line"><span class="lineno">  197</span>    clk_phases.push_back(0xFFFF);</div>
<div class="line"><span class="lineno">  198</span>  }</div>
<div class="line"><span class="lineno">  199</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classWIB.html#a00e70fff12bc79dc0a50d453cd6d5a78">TryFEMBPhases</a>(iFEMB,clk_phases)) {</div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#ac93f4f251c09c4f0ebcf2299a0fe4daf">ContinueIfListOfFEMBClockPhasesDontSync</a>){</div>
<div class="line"><span class="lineno">  201</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;Warning: FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; ADC FIFO not synced from expected phases, trying to hunt for phases&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  202</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="classWIB.html#a97226fbedd664e93847a98064e764883">HuntFEMBPhase</a>(iFEMB,clk_phases.at(0))) {</div>
<div class="line"><span class="lineno">  203</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#a3d275455a5edd1a5143c96be7868cac1">ContinueOnFEMBSyncError</a>) {</div>
<div class="line"><span class="lineno">  204</span>            std::cout &lt;&lt; <span class="stringliteral">&quot;Error: FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; ADC FIFO could not be synced even after hunting&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  205</span>        }</div>
<div class="line"><span class="lineno">  206</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  207</span>          uint16_t adc_fifo_sync = ( <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, 6) &amp; 0xFFFF0000) &gt;&gt; 16;</div>
<div class="line"><span class="lineno">  208</span>          BUException::FEMB_ADC_SYNC_ERROR e;</div>
<div class="line"><span class="lineno">  209</span>          std::stringstream expstr;</div>
<div class="line"><span class="lineno">  210</span>          expstr &lt;&lt; <span class="stringliteral">&quot; after hunting. &quot;</span>;</div>
<div class="line"><span class="lineno">  211</span>          expstr &lt;&lt; <span class="stringliteral">&quot; FEMB: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB);</div>
<div class="line"><span class="lineno">  212</span>          expstr &lt;&lt; <span class="stringliteral">&quot; sync: &quot;</span> &lt;&lt; std::bitset&lt;16&gt;(adc_fifo_sync);</div>
<div class="line"><span class="lineno">  213</span>          expstr &lt;&lt; <span class="stringliteral">&quot; phases: &quot;</span>;</div>
<div class="line"><span class="lineno">  214</span>          expstr &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(2) &lt;&lt; <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,<span class="stringliteral">&quot;ADC_ASIC_CLK_PHASE_SELECT&quot;</span>);</div>
<div class="line"><span class="lineno">  215</span>          expstr &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(2) &lt;&lt; <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,<span class="stringliteral">&quot;ADC_ASIC_CLK_PHASE_SELECT_2&quot;</span>);</div>
<div class="line"><span class="lineno">  216</span>          e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  217</span>          <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  218</span>        }</div>
<div class="line"><span class="lineno">  219</span>      } <span class="comment">// if ! HuntFEMBPhase</span></div>
<div class="line"><span class="lineno">  220</span>    } <span class="comment">// if ContinueIfListOfFEMBClockPhasesDontSync</span></div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">else</span> <span class="comment">// ContinueIfListOfFEMBClockPhasesDontSync</span></div>
<div class="line"><span class="lineno">  222</span>    {</div>
<div class="line"><span class="lineno">  223</span>      uint16_t adc_fifo_sync = ( <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, 6) &amp; 0xFFFF0000) &gt;&gt; 16;</div>
<div class="line"><span class="lineno">  224</span>      BUException::FEMB_ADC_SYNC_ERROR e;</div>
<div class="line"><span class="lineno">  225</span>      std::stringstream expstr;</div>
<div class="line"><span class="lineno">  226</span>      expstr &lt;&lt; <span class="stringliteral">&quot; after trying all in list. &quot;</span>;</div>
<div class="line"><span class="lineno">  227</span>      expstr &lt;&lt; <span class="stringliteral">&quot; FEMB: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB);</div>
<div class="line"><span class="lineno">  228</span>      expstr &lt;&lt; <span class="stringliteral">&quot; sync: &quot;</span> &lt;&lt; std::bitset&lt;16&gt;(adc_fifo_sync);</div>
<div class="line"><span class="lineno">  229</span>      expstr &lt;&lt; <span class="stringliteral">&quot; phases tried: &quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  230</span>      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclk_phase = 0;iclk_phase &lt; clk_phases.size();iclk_phase++)</div>
<div class="line"><span class="lineno">  231</span>      {</div>
<div class="line"><span class="lineno">  232</span>        expstr &lt;&lt; <span class="stringliteral">&quot;    &quot;</span></div>
<div class="line"><span class="lineno">  233</span>               &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(4) &lt;&lt; clk_phases[iclk_phase] &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  234</span>      }</div>
<div class="line"><span class="lineno">  235</span>      e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  236</span>      <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  237</span>    } <span class="comment">// else ContinueIfListOfFEMBClockPhasesDontSync</span></div>
<div class="line"><span class="lineno">  238</span>  } <span class="comment">// if ! TryFEMBPhases</span></div>
<div class="line"><span class="lineno">  239</span>  uint16_t adc_fifo_sync = ( <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, 6) &amp; 0xFFFF0000) &gt;&gt; 16;</div>
<div class="line"><span class="lineno">  240</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; Final ADC FIFO sync: &quot;</span> &lt;&lt; std::bitset&lt;16&gt;(adc_fifo_sync) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  241</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; Final Clock Phases: &quot;</span></div>
<div class="line"><span class="lineno">  242</span>                    &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(2) &lt;&lt; <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,<span class="stringliteral">&quot;ADC_ASIC_CLK_PHASE_SELECT&quot;</span>)</div>
<div class="line"><span class="lineno">  243</span>                    &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(2) &lt;&lt; <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,<span class="stringliteral">&quot;ADC_ASIC_CLK_PHASE_SELECT_2&quot;</span>)</div>
<div class="line"><span class="lineno">  244</span>                    &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>  <span class="comment">//time stamp reset</span></div>
<div class="line"><span class="lineno">  247</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TIME_STAMP_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  248</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TIME_STAMP_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>  <span class="comment">// These are all Jack&#39;s WIB addresses, need to figure out Dan&#39;s addresses for functionality</span></div>
<div class="line"><span class="lineno">  252</span>  <span class="comment">//Write(1, 0);</span></div>
<div class="line"><span class="lineno">  253</span>  <span class="comment">//Write(1, 0);</span></div>
<div class="line"><span class="lineno">  254</span>  <span class="comment">//Write(1, 2);</span></div>
<div class="line"><span class="lineno">  255</span>  <span class="comment">//Write(1, 2);</span></div>
<div class="line"><span class="lineno">  256</span>  <span class="comment">//Write(1, 0);</span></div>
<div class="line"><span class="lineno">  257</span>  <span class="comment">//Write(1, 0);</span></div>
<div class="line"><span class="lineno">  258</span>  <span class="comment">//</span></div>
<div class="line"><span class="lineno">  260</span>  <span class="comment">//Write(18, 0x8000);</span></div>
<div class="line"><span class="lineno">  261</span>  <span class="comment">//Write(18, 0x8000);</span></div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,slow_control_dnd);</div>
<div class="line"><span class="lineno">  264</span>}</div>
<div class="ttc" id="aclassWIBBase_html_ab9669f8fe4a34026640169dd0d14bc5d"><div class="ttname"><a href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WIBBase::WriteFEMB</a></div><div class="ttdeci">void WriteFEMB(int iFEMB, uint16_t address, uint32_t value)</div><div class="ttdef"><b>Definition</b> <a href="WIBBase_8cpp_source.html#l00174">WIBBase.cpp:174</a></div></div>
<div class="ttc" id="aclassWIBBase_html_ae2982b68763cf557c93346fa13e0dbc6"><div class="ttname"><a href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">WIBBase::ReadFEMB</a></div><div class="ttdeci">uint32_t ReadFEMB(int iFEMB, uint16_t address)</div><div class="ttdef"><b>Definition</b> <a href="WIBBase_8cpp_source.html#l00155">WIBBase.cpp:155</a></div></div>
<div class="ttc" id="aclassWIB_html_a00e70fff12bc79dc0a50d453cd6d5a78"><div class="ttname"><a href="classWIB.html#a00e70fff12bc79dc0a50d453cd6d5a78">WIB::TryFEMBPhases</a></div><div class="ttdeci">bool TryFEMBPhases(uint8_t iFEMB, std::vector&lt; uint16_t &gt; phases)</div><div class="ttdef"><b>Definition</b> <a href="WIB__FEMB_8cpp_source.html#l01031">WIB_FEMB.cpp:1031</a></div></div>
<div class="ttc" id="aclassWIB_html_a587fc3369aac2d83fa47d658ad240c65"><div class="ttname"><a href="classWIB.html#a587fc3369aac2d83fa47d658ad240c65">WIB::SetupFEMBExtClock</a></div><div class="ttdeci">void SetupFEMBExtClock(uint8_t iFEMB)</div><div class="ttdoc">Setup FEMB External Clock.</div><div class="ttdef"><b>Definition</b> <a href="WIB__FEMB_8cpp_source.html#l00375">WIB_FEMB.cpp:375</a></div></div>
<div class="ttc" id="aclassWIB_html_a97226fbedd664e93847a98064e764883"><div class="ttname"><a href="classWIB.html#a97226fbedd664e93847a98064e764883">WIB::HuntFEMBPhase</a></div><div class="ttdeci">bool HuntFEMBPhase(uint8_t iFEMB, uint16_t clk_phase_data_start)</div><div class="ttdef"><b>Definition</b> <a href="WIB__FEMB_8cpp_source.html#l01061">WIB_FEMB.cpp:1061</a></div></div>
<div class="ttc" id="aclassWIB_html_aa60b1350feac33a4908cde93bf369211"><div class="ttname"><a href="classWIB.html#aa60b1350feac33a4908cde93bf369211">WIB::SetupInternalPulser</a></div><div class="ttdeci">void SetupInternalPulser(uint8_t iFEMB)</div><div class="ttdef"><b>Definition</b> <a href="WIB__FEMB_8cpp_source.html#l00928">WIB_FEMB.cpp:928</a></div></div>
<div class="ttc" id="aclassWIB_html_ae6e6e694b21bf8e4b9f85aef5f748307"><div class="ttname"><a href="classWIB.html#ae6e6e694b21bf8e4b9f85aef5f748307">WIB::SetupFPGAPulser</a></div><div class="ttdeci">void SetupFPGAPulser(uint8_t iFEMB, uint8_t dac_val)</div><div class="ttdef"><b>Definition</b> <a href="WIB__FEMB_8cpp_source.html#l00912">WIB_FEMB.cpp:912</a></div></div>
<div class="ttc" id="aclassWIB_html_af983c68bc5186729c95df4bfc383eeda"><div class="ttname"><a href="classWIB.html#af983c68bc5186729c95df4bfc383eeda">WIB::SetupFEMBASICs</a></div><div class="ttdeci">uint16_t SetupFEMBASICs(uint8_t iFEMB, uint8_t gain, uint8_t shape, uint8_t highBaseline, bool highLeakage, bool leakagex10, bool acCoupling, bool buffer, bool useExtClock, uint8_t internalDACControl, uint8_t internalDACValue)</div><div class="ttdoc">Setup FEMB ASICs.</div><div class="ttdef"><b>Definition</b> <a href="WIB__FEMB_8cpp_source.html#l00621">WIB_FEMB.cpp:621</a></div></div>
<div class="ttc" id="anamespacerecv-restcmd_html_add91469de4facd4d6e717b7ffbcbf56d"><div class="ttname"><a href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">recv-restcmd.int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition</b> <a href="recv-restcmd_8py_source.html#l00007">recv-restcmd.py:7</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e2a99cc3f49d5e841c53d6e478ef85d" name="a5e2a99cc3f49d5e841c53d6e478ef85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e2a99cc3f49d5e841c53d6e478ef85d">&#9670;&#160;</a></span>ConfigFEMBFakeData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ConfigFEMBFakeData </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fake_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>fake_word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>femb_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint32_t &gt;&#160;</td>
          <td class="paramname"><em>fake_samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>start_frame_mode_sel</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>start_frame_swap</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup FEMB in fake data mode. </p>
<p>Sets up iFEMB (index from 1) in fake data mode fake_mode: 0 for real data, 1 for fake word, 2 for fake waveform, 3 for channel indicator (FEMB, chip, channel), 4 for channel indicator (counter, chip, channel) fake_word: 12 bit wrd to use when in fake word mode femb_number: femb number to use in fake_mode 3 fake_samples: vector of samples to use in fake_mode 2</p>
<p>Sets up iFEMB (index from 1) in fake data mode fake_mode: 0 for real data, 1 for fake word, 2 for fake waveform, 3 for channel indicator (FEMB, chip, channel), 4 for channel indicator (counter, chip, channel) fake_word: 12 bit wrd to use when in fake word mode femb_number: femb number to use in fake_mode 3, 4 bits fake_samples: vector of samples to use in fake_mode 2 </p>

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l00275">275</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  276</span>                                                                                                     {</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>  <span class="keywordflow">if</span> (iFEMB &lt; 1 || iFEMB &gt; 4)</div>
<div class="line"><span class="lineno">  279</span>  {</div>
<div class="line"><span class="lineno">  280</span>     BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  281</span>     std::stringstream expstr;</div>
<div class="line"><span class="lineno">  282</span>     expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMBFakeData: iFEMB should be between 1 and 4: &quot;</span></div>
<div class="line"><span class="lineno">  283</span>            &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB);</div>
<div class="line"><span class="lineno">  284</span>     e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  285</span>     <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  286</span>  }</div>
<div class="line"><span class="lineno">  287</span>  <span class="keywordflow">if</span> (start_frame_mode_sel &gt; 1 || start_frame_swap &gt; 1)</div>
<div class="line"><span class="lineno">  288</span>  {</div>
<div class="line"><span class="lineno">  289</span>     BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  290</span>     std::stringstream expstr;</div>
<div class="line"><span class="lineno">  291</span>     expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMBFakeData: start_frame_mode_sel and start_frame_swap must be 0 or 1&quot;</span>;</div>
<div class="line"><span class="lineno">  292</span>     e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  293</span>     <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  294</span>  }</div>
<div class="line"><span class="lineno">  295</span>  <span class="keywordflow">if</span> (fake_mode == 1 &amp;&amp; fake_word &gt; 0xFFF)</div>
<div class="line"><span class="lineno">  296</span>  {</div>
<div class="line"><span class="lineno">  297</span>     BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  298</span>     std::stringstream expstr;</div>
<div class="line"><span class="lineno">  299</span>     expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMBFakeData: fake_word must be only 12 bits i.e. &lt;= 4095, is: &quot;</span></div>
<div class="line"><span class="lineno">  300</span>            &lt;&lt; fake_word;</div>
<div class="line"><span class="lineno">  301</span>     e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  302</span>     <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  303</span>  }</div>
<div class="line"><span class="lineno">  304</span>  <span class="keywordflow">if</span> (fake_mode == 2 &amp;&amp; fake_samples.size() != 256)</div>
<div class="line"><span class="lineno">  305</span>  {</div>
<div class="line"><span class="lineno">  306</span>     BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  307</span>     std::stringstream expstr;</div>
<div class="line"><span class="lineno">  308</span>     expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMBFakeData: femb_samples must be 255 long, is: &quot;</span></div>
<div class="line"><span class="lineno">  309</span>            &lt;&lt; fake_samples.size();</div>
<div class="line"><span class="lineno">  310</span>     e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  311</span>     <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  312</span>  }</div>
<div class="line"><span class="lineno">  313</span>  <span class="keywordflow">if</span> (fake_mode == 3 &amp;&amp; femb_number &gt; 0xF)</div>
<div class="line"><span class="lineno">  314</span>  {</div>
<div class="line"><span class="lineno">  315</span>     BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  316</span>     std::stringstream expstr;</div>
<div class="line"><span class="lineno">  317</span>     expstr &lt;&lt; <span class="stringliteral">&quot;ConfigFEMBFakeData: femb_number must be only 4 bits i.e. &lt;= 15, is: &quot;</span></div>
<div class="line"><span class="lineno">  318</span>            &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(femb_number);</div>
<div class="line"><span class="lineno">  319</span>     e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  320</span>     <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  321</span>  }</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>  <span class="comment">// get this register so we can leave it in the state it started in</span></div>
<div class="line"><span class="lineno">  324</span>  uint32_t slow_control_dnd = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>);</div>
<div class="line"><span class="lineno">  325</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,1);</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;REG_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  328</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_AND_ADC_DATA_EN&quot;</span>, 0);</div>
<div class="line"><span class="lineno">  331</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;START_FRAME_MODE_SELECT&quot;</span>, start_frame_mode_sel);</div>
<div class="line"><span class="lineno">  334</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  335</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;START_FRAME_SWAP&quot;</span>, start_frame_swap);</div>
<div class="line"><span class="lineno">  336</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.05);</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>  <span class="comment">//time stamp reset</span></div>
<div class="line"><span class="lineno">  339</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TIME_STAMP_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  340</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TIME_STAMP_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>  <span class="comment">// Now do the Fake data mode setup</span></div>
<div class="line"><span class="lineno">  343</span>  <span class="keywordflow">if</span> (fake_mode == 1)</div>
<div class="line"><span class="lineno">  344</span>  {</div>
<div class="line"><span class="lineno">  345</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;DATA_TEST_PATTERN&quot;</span>, fake_word);</div>
<div class="line"><span class="lineno">  346</span>  }</div>
<div class="line"><span class="lineno">  347</span>  <span class="keywordflow">if</span> (fake_mode == 2)</div>
<div class="line"><span class="lineno">  348</span>  {</div>
<div class="line"><span class="lineno">  349</span>    <span class="comment">// Put waveform in FEMB registers</span></div>
<div class="line"><span class="lineno">  350</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iSample=0; iSample &lt; 256; iSample++)</div>
<div class="line"><span class="lineno">  351</span>    {</div>
<div class="line"><span class="lineno">  352</span>      <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB,0x300+iSample,fake_samples.at(iSample));</div>
<div class="line"><span class="lineno">  353</span>      <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.005);</div>
<div class="line"><span class="lineno">  354</span>    }</div>
<div class="line"><span class="lineno">  355</span>  }</div>
<div class="line"><span class="lineno">  356</span>  <span class="keywordflow">if</span> (fake_mode == 3)</div>
<div class="line"><span class="lineno">  357</span>  {</div>
<div class="line"><span class="lineno">  358</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;FEMB_NUMBER&quot;</span>, femb_number);</div>
<div class="line"><span class="lineno">  359</span>  }</div>
<div class="line"><span class="lineno">  360</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;FEMB_TST_SEL&quot;</span>, fake_mode);</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>  <span class="comment">//time stamp reset</span></div>
<div class="line"><span class="lineno">  363</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TIME_STAMP_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  364</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TIME_STAMP_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_AND_ADC_DATA_EN&quot;</span>, 9);</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,slow_control_dnd);</div>
<div class="line"><span class="lineno">  369</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cf6ac0b21dcc8db20ad73a28072602d" name="a4cf6ac0b21dcc8db20ad73a28072602d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf6ac0b21dcc8db20ad73a28072602d">&#9670;&#160;</a></span>ConfigFEMBMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ConfigFEMBMode </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pls_cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dac_sel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>fpga_dac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>asic_dac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mon_cs</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l01126">1126</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1126</span>                                                                                                                                   {</div>
<div class="line"><span class="lineno"> 1127</span>  uint32_t tp_sel;</div>
<div class="line"><span class="lineno"> 1128</span>  <span class="keywordflow">if</span> (mon_cs == 0){</div>
<div class="line"><span class="lineno"> 1129</span>    tp_sel = ((asic_dac &amp; 0x01) &lt;&lt; 1) + (fpga_dac &amp; 0x01) + ((dac_sel&amp;0x1)&lt;&lt;8);</div>
<div class="line"><span class="lineno"> 1130</span>  }</div>
<div class="line"><span class="lineno"> 1131</span>  <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno"> 1132</span>    tp_sel = 0x402;</div>
<div class="line"><span class="lineno"> 1133</span>  }</div>
<div class="line"><span class="lineno"> 1134</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 16, tp_sel &amp; 0x0000FFFF);</div>
<div class="line"><span class="lineno"> 1135</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 18, 0x11);</div>
<div class="line"><span class="lineno"> 1136</span>  uint32_t pls_cs_value = 0x00;</div>
<div class="line"><span class="lineno"> 1137</span>  <span class="keywordflow">if</span> (pls_cs == 0) pls_cs_value = 0x11;<span class="comment">//disable all</span></div>
<div class="line"><span class="lineno"> 1138</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pls_cs == 1) pls_cs_value = 0x10;<span class="comment">//internal pls</span></div>
<div class="line"><span class="lineno"> 1139</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pls_cs == 2) pls_cs_value = 0x01;<span class="comment">//external pls</span></div>
<div class="line"><span class="lineno"> 1140</span> </div>
<div class="line"><span class="lineno"> 1141</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 18, pls_cs_value);</div>
<div class="line"><span class="lineno"> 1142</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aafb7beccff730f2cd3641ae63f34dedf" name="aafb7beccff730f2cd3641ae63f34dedf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafb7beccff730f2cd3641ae63f34dedf">&#9670;&#160;</a></span>ConfigureDTSCDS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float WIB::ConfigureDTSCDS </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>source</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__CDS_8cpp_source.html#l00024">24</a> of file <a class="el" href="WIB__CDS_8cpp_source.html">WIB_CDS.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   24</span>                                        {</div>
<div class="line"><span class="lineno">   25</span>  <span class="keywordflow">if</span>(source &gt; 1){</div>
<div class="line"><span class="lineno">   26</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">   27</span>    e.Append(<span class="stringliteral">&quot;Bad DTS CDS clock source&quot;</span>);</div>
<div class="line"><span class="lineno">   28</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   29</span>  }</div>
<div class="line"><span class="lineno">   30</span> </div>
<div class="line"><span class="lineno">   31</span>  <span class="comment">//Set timing system source (FP:0 BP:1)</span></div>
<div class="line"><span class="lineno">   32</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CDS.INPUT_SELECT&quot;</span>,source);</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>  <span class="comment">//Reset the I2C firmware</span></div>
<div class="line"><span class="lineno">   35</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CDS.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">   36</span>  <span class="comment">//Reset the CDS chip (ADN2814)  </span></div>
<div class="line"><span class="lineno">   37</span>  <a class="code hl_function" href="classWIB.html#afb5815b41d2fbd78687171c9948d5629">WriteDTS_CDS</a>(0x9,0x20,1);</div>
<div class="line"><span class="lineno">   38</span>  usleep(500000);</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>  <span class="comment">//Reset the I2C firmware</span></div>
<div class="line"><span class="lineno">   41</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CDS.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">   42</span>  <span class="comment">//Un reset</span></div>
<div class="line"><span class="lineno">   43</span>  <a class="code hl_function" href="classWIB.html#afb5815b41d2fbd78687171c9948d5629">WriteDTS_CDS</a>(0x9,0x00,1,<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">   44</span>  <span class="comment">//Reset the I2C firmware</span></div>
<div class="line"><span class="lineno">   45</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CDS.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">   46</span>  usleep(1000000);</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>  <span class="comment">//read bits 8 downto 1 from reg 3</span></div>
<div class="line"><span class="lineno">   49</span>  uint16_t dataRateLookup = uint16_t(<a class="code hl_function" href="classWIB.html#a99fd5ea65e2d224ec88550261ec66f0f">ReadDTS_CDS</a>(0x3,1)) &lt;&lt; 1;</div>
<div class="line"><span class="lineno">   50</span>  <span class="comment">//Read bit 0 from reg 4</span></div>
<div class="line"><span class="lineno">   51</span>  dataRateLookup |= uint16_t(<a class="code hl_function" href="classWIB.html#a99fd5ea65e2d224ec88550261ec66f0f">ReadDTS_CDS</a>(0x4,1))&amp;0x1;</div>
<div class="line"><span class="lineno">   52</span>  <span class="keywordflow">if</span>(dataRateLookup &gt;=<a class="code hl_define" href="WIB__CDS_8cpp.html#aa507cfd53115579c3fd04ddec12b9960">COURSE_DATARATE_SIZE</a>){</div>
<div class="line"><span class="lineno">   53</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">   54</span>  }</div>
<div class="line"><span class="lineno">   55</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="WIB__CDS_8cpp.html#a5c4a8a40dd02218938a09a4121e9d333">courseDataRates</a>[dataRateLookup];</div>
<div class="line"><span class="lineno">   56</span>}</div>
<div class="ttc" id="aWIB__CDS_8cpp_html_a5c4a8a40dd02218938a09a4121e9d333"><div class="ttname"><a href="WIB__CDS_8cpp.html#a5c4a8a40dd02218938a09a4121e9d333">courseDataRates</a></div><div class="ttdeci">static float courseDataRates[COURSE_DATARATE_SIZE]</div><div class="ttdef"><b>Definition</b> <a href="WIB__CDS_8cpp_source.html#l00007">WIB_CDS.cpp:7</a></div></div>
<div class="ttc" id="aWIB__CDS_8cpp_html_aa507cfd53115579c3fd04ddec12b9960"><div class="ttname"><a href="WIB__CDS_8cpp.html#aa507cfd53115579c3fd04ddec12b9960">COURSE_DATARATE_SIZE</a></div><div class="ttdeci">#define COURSE_DATARATE_SIZE</div><div class="ttdef"><b>Definition</b> <a href="WIB__CDS_8cpp_source.html#l00006">WIB_CDS.cpp:6</a></div></div>
<div class="ttc" id="aclassWIB_html_a99fd5ea65e2d224ec88550261ec66f0f"><div class="ttname"><a href="classWIB.html#a99fd5ea65e2d224ec88550261ec66f0f">WIB::ReadDTS_CDS</a></div><div class="ttdeci">uint32_t ReadDTS_CDS(uint16_t address, uint8_t byte_count=4)</div><div class="ttdef"><b>Definition</b> <a href="WIB__CDS_8cpp_source.html#l00020">WIB_CDS.cpp:20</a></div></div>
<div class="ttc" id="aclassWIB_html_afb5815b41d2fbd78687171c9948d5629"><div class="ttname"><a href="classWIB.html#afb5815b41d2fbd78687171c9948d5629">WIB::WriteDTS_CDS</a></div><div class="ttdeci">void WriteDTS_CDS(uint16_t address, uint32_t value, uint8_t byte_count=4, bool ignore_error=false)</div><div class="ttdef"><b>Definition</b> <a href="WIB__CDS_8cpp_source.html#l00017">WIB_CDS.cpp:17</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad8a7479b24f334147c7838a05dab51ac" name="ad8a7479b24f334147c7838a05dab51ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8a7479b24f334147c7838a05dab51ac">&#9670;&#160;</a></span>ConfigWIBFakeData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ConfigWIBFakeData </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enableFakeFEMB1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enableFakeFEMB2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enableFakeFEMB3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enableFakeFEMB4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>counter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FAKE__CD_8cpp_source.html#l00004">4</a> of file <a class="el" href="WIB__FAKE__CD_8cpp_source.html">WIB_FAKE_CD.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    6</span>                                             { <span class="comment">// counter==true: counter instead of COLDATA frame, else samples in COLDATA frame</span></div>
<div class="line"><span class="lineno">    7</span> </div>
<div class="line"><span class="lineno">    8</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>){</div>
<div class="line"><span class="lineno">    9</span>    <span class="comment">//Don&#39;t allow fake mode on only half of a FELIX link</span></div>
<div class="line"><span class="lineno">   10</span>    <span class="keywordflow">if</span> ((enableFakeFEMB1 ^ enableFakeFEMB2) || (enableFakeFEMB3 ^ enableFakeFEMB4)) {</div>
<div class="line"><span class="lineno">   11</span>      BUException::WIB_FAKE_DATA_ON_HALF_FELIX_LINK e;</div>
<div class="line"><span class="lineno">   12</span>      <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   13</span>    }</div>
<div class="line"><span class="lineno">   14</span>  }</div>
<div class="line"><span class="lineno">   15</span> </div>
<div class="line"><span class="lineno">   16</span>  <span class="comment">//Setup the FEMBs/Links</span></div>
<div class="line"><span class="lineno">   17</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iFEMB = 1; iFEMB &lt;= <a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a>; iFEMB++){</div>
<div class="line"><span class="lineno">   18</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iCDA = 1; iCDA &lt;= <a class="code hl_variable" href="classWIB.html#a2d3fea1eedeb97fb0409855061d5bc6a">FEMBCDACount</a>; iCDA++){</div>
<div class="line"><span class="lineno">   19</span>      <a class="code hl_function" href="classWIB.html#accb0871dfe7a4cc68e07e8bd84270c45">SetFEMBFakeCOLDATAMode</a>(iFEMB, iCDA, counter);</div>
<div class="line"><span class="lineno">   20</span>    }</div>
<div class="line"><span class="lineno">   21</span>  }</div>
<div class="line"><span class="lineno">   22</span> </div>
<div class="line"><span class="lineno">   23</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iStream = 1; iStream &lt;= <a class="code hl_variable" href="classWIB.html#a713e1bfdc01fa56b930635243be0cddd">FEMBStreamCount</a>; iStream++){</div>
<div class="line"><span class="lineno">   24</span>    <a class="code hl_function" href="classWIB.html#a7b9b90306ff5dd77f12f0f27cf2e512d">SetFEMBStreamSource</a>(1, iStream, !enableFakeFEMB1);</div>
<div class="line"><span class="lineno">   25</span>    <a class="code hl_function" href="classWIB.html#a7b9b90306ff5dd77f12f0f27cf2e512d">SetFEMBStreamSource</a>(2, iStream, !enableFakeFEMB2);</div>
<div class="line"><span class="lineno">   26</span>    <a class="code hl_function" href="classWIB.html#a7b9b90306ff5dd77f12f0f27cf2e512d">SetFEMBStreamSource</a>(3, iStream, !enableFakeFEMB3);</div>
<div class="line"><span class="lineno">   27</span>    <a class="code hl_function" href="classWIB.html#a7b9b90306ff5dd77f12f0f27cf2e512d">SetFEMBStreamSource</a>(4, iStream, !enableFakeFEMB4);</div>
<div class="line"><span class="lineno">   28</span>  }</div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span>  uint64_t enableWord1 = 0;</div>
<div class="line"><span class="lineno">   31</span>  uint64_t enableWord2 = 0;</div>
<div class="line"><span class="lineno">   32</span>  uint64_t enableWord3 = 0;</div>
<div class="line"><span class="lineno">   33</span>  uint64_t enableWord4 = 0;</div>
<div class="line"><span class="lineno">   34</span>  <span class="keywordflow">if</span> (enableFakeFEMB1) enableWord1 = 0xF;</div>
<div class="line"><span class="lineno">   35</span>  <span class="keywordflow">if</span> (enableFakeFEMB2) enableWord2 = 0xF;</div>
<div class="line"><span class="lineno">   36</span>  <span class="keywordflow">if</span> (enableFakeFEMB3) enableWord3 = 0xF;</div>
<div class="line"><span class="lineno">   37</span>  <span class="keywordflow">if</span> (enableFakeFEMB4) enableWord4 = 0xF;</div>
<div class="line"><span class="lineno">   38</span>  <a class="code hl_function" href="classWIB.html#ac292fdbd2e2c5dca03433c78d2afef6b">SourceFEMB</a>(1,enableWord1);</div>
<div class="line"><span class="lineno">   39</span>  <a class="code hl_function" href="classWIB.html#ac292fdbd2e2c5dca03433c78d2afef6b">SourceFEMB</a>(2,enableWord2);</div>
<div class="line"><span class="lineno">   40</span>  <a class="code hl_function" href="classWIB.html#ac292fdbd2e2c5dca03433c78d2afef6b">SourceFEMB</a>(3,enableWord3);</div>
<div class="line"><span class="lineno">   41</span>  <a class="code hl_function" href="classWIB.html#ac292fdbd2e2c5dca03433c78d2afef6b">SourceFEMB</a>(4,enableWord4);</div>
<div class="line"><span class="lineno">   42</span>}</div>
<div class="ttc" id="aclassWIB_html_a7b9b90306ff5dd77f12f0f27cf2e512d"><div class="ttname"><a href="classWIB.html#a7b9b90306ff5dd77f12f0f27cf2e512d">WIB::SetFEMBStreamSource</a></div><div class="ttdeci">void SetFEMBStreamSource(uint8_t iFEMB, uint8_t iStream, bool real=true)</div><div class="ttdef"><b>Definition</b> <a href="WIB__FAKE__CD_8cpp_source.html#l00052">WIB_FAKE_CD.cpp:52</a></div></div>
<div class="ttc" id="aclassWIB_html_ac292fdbd2e2c5dca03433c78d2afef6b"><div class="ttname"><a href="classWIB.html#ac292fdbd2e2c5dca03433c78d2afef6b">WIB::SourceFEMB</a></div><div class="ttdeci">void SourceFEMB(uint64_t iDAQLink, uint64_t real)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00626">WIB.cpp:626</a></div></div>
<div class="ttc" id="aclassWIB_html_accb0871dfe7a4cc68e07e8bd84270c45"><div class="ttname"><a href="classWIB.html#accb0871dfe7a4cc68e07e8bd84270c45">WIB::SetFEMBFakeCOLDATAMode</a></div><div class="ttdeci">void SetFEMBFakeCOLDATAMode(uint8_t iFEMB, uint8_t iCD, bool mode=0)</div><div class="ttdef"><b>Definition</b> <a href="WIB__FAKE__CD_8cpp_source.html#l00068">WIB_FAKE_CD.cpp:68</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cfbf44f35f1780db584dc7a30281d87" name="a2cfbf44f35f1780db584dc7a30281d87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cfbf44f35f1780db584dc7a30281d87">&#9670;&#160;</a></span>DisableFEMBCNC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::DisableFEMBCNC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00503">503</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  503</span>                        {</div>
<div class="line"><span class="lineno">  504</span>  <span class="comment">//Enable the clock and control stream to the FEMBs</span></div>
<div class="line"><span class="lineno">  505</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_CLOCK_SELECT&quot;</span>,0);</div>
<div class="line"><span class="lineno">  506</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_COMMAND_SELECT&quot;</span>,0);</div>
<div class="line"><span class="lineno">  507</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a24eb1180f377c12249e0d50d73bf90e2" name="a24eb1180f377c12249e0d50d73bf90e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24eb1180f377c12249e0d50d73bf90e2">&#9670;&#160;</a></span>EnableDAQLink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::EnableDAQLink </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iDAQLink</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00051">51</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>                                       {</div>
<div class="line"><span class="lineno">   52</span>  <span class="comment">//CHeck if we know how to dael with this firmware</span></div>
<div class="line"><span class="lineno">   53</span>  <span class="keywordflow">if</span>(!((<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370">RCE</a>)||(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>))){</div>
<div class="line"><span class="lineno">   54</span>    <span class="comment">//Not RCE or FELIX firmware, return</span></div>
<div class="line"><span class="lineno">   55</span>    BUException::WIB_FEATURE_NOT_SUPPORTED e;</div>
<div class="line"><span class="lineno">   56</span>    e.Append(<span class="stringliteral">&quot;Automatic DAQLink configuration not supported with this firmware.\n&quot;</span>);    </div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   58</span>  }</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>  <span class="comment">//Build the base string for this DAQLINK</span></div>
<div class="line"><span class="lineno">   61</span>  std::string base(<span class="stringliteral">&quot;DAQ_LINK_&quot;</span>);</div>
<div class="line"><span class="lineno">   62</span>  base.push_back(<a class="code hl_function" href="classWIB.html#a6b99751c2d5be04128f90ecf28e6db2e">GetDAQLinkChar</a>(iDAQLink));</div>
<div class="line"><span class="lineno">   63</span>  base.append(<span class="stringliteral">&quot;.CONTROL.&quot;</span>);</div>
<div class="line"><span class="lineno">   64</span>  printf(<span class="stringliteral">&quot;%s\n&quot;</span>,base.c_str());</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>  <span class="comment">//set the CD stream enable mask from that</span></div>
<div class="line"><span class="lineno">   67</span>  uint32_t enable_mask = 0;</div>
<div class="line"><span class="lineno">   68</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iStream = 0; iStream &lt; (4 * <a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a>/<a class="code hl_variable" href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">DAQLinkCount</a>);iStream++){</div>
<div class="line"><span class="lineno">   69</span>    enable_mask &lt;&lt;= 0x1;</div>
<div class="line"><span class="lineno">   70</span>  }</div>
<div class="line"><span class="lineno">   71</span>  </div>
<div class="line"><span class="lineno">   72</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(base+<span class="stringliteral">&quot;ENABLE_CDA_STREAM&quot;</span>,enable_mask);</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(base+<span class="stringliteral">&quot;ENABLE&quot;</span>,0x1);</div>
<div class="line"><span class="lineno">   75</span>}</div>
<div class="ttc" id="aclassWIB_html_a6b99751c2d5be04128f90ecf28e6db2e"><div class="ttname"><a href="classWIB.html#a6b99751c2d5be04128f90ecf28e6db2e">WIB::GetDAQLinkChar</a></div><div class="ttdeci">char GetDAQLinkChar(uint8_t iDAQLink)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00518">WIB.cpp:518</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7313e28e40b4bc66b57052785602ec8a" name="a7313e28e40b4bc66b57052785602ec8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7313e28e40b4bc66b57052785602ec8a">&#9670;&#160;</a></span>EnableDAQLink_Lite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::EnableDAQLink_Lite </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iDAQLink</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>enable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00077">77</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   77</span>                                                            {</div>
<div class="line"><span class="lineno">   78</span>  <span class="comment">//CHeck if we know how to dael with this firmware</span></div>
<div class="line"><span class="lineno">   79</span>  <span class="keywordflow">if</span>(!((<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370">RCE</a>)||(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>))){</div>
<div class="line"><span class="lineno">   80</span>    <span class="comment">//Not RCE or FELIX firmware, return</span></div>
<div class="line"><span class="lineno">   81</span>    BUException::WIB_FEATURE_NOT_SUPPORTED e;</div>
<div class="line"><span class="lineno">   82</span>    e.Append(<span class="stringliteral">&quot;Automatic DAQLink configuration not supported with this firmware.\n&quot;</span>);    </div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   84</span>  }</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>  <span class="comment">//Build the base string for this DAQLINK</span></div>
<div class="line"><span class="lineno">   87</span>  std::string base(<span class="stringliteral">&quot;DAQ_LINK_&quot;</span>);</div>
<div class="line"><span class="lineno">   88</span>  base.push_back(<a class="code hl_function" href="classWIB.html#a6b99751c2d5be04128f90ecf28e6db2e">GetDAQLinkChar</a>(iDAQLink));</div>
<div class="line"><span class="lineno">   89</span>  base.append(<span class="stringliteral">&quot;.CONTROL.&quot;</span>);</div>
<div class="line"><span class="lineno">   90</span>  </div>
<div class="line"><span class="lineno">   91</span>  uint8_t stream = 0;</div>
<div class="line"><span class="lineno">   92</span>  <span class="keywordflow">if</span>(<a class="code hl_namespace" href="namespaceenable.html">enable</a>){</div>
<div class="line"><span class="lineno">   93</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370">RCE</a>) stream = 0xF;</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">else</span> stream = 0xFF;   </div>
<div class="line"><span class="lineno">   95</span>  }</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(base+<span class="stringliteral">&quot;ENABLE_CDA_STREAM&quot;</span>,stream);</div>
<div class="line"><span class="lineno">   98</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(base+<span class="stringliteral">&quot;ENABLE&quot;</span>,<a class="code hl_namespace" href="namespaceenable.html">enable</a>);</div>
<div class="line"><span class="lineno">   99</span>}</div>
<div class="ttc" id="anamespaceenable_html"><div class="ttname"><a href="namespaceenable.html">enable</a></div><div class="ttdef"><b>Definition</b> <a href="enable_8py_source.html#l00001">enable.py:1</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0bcbee21616908d662bb6e6160413cfc" name="a0bcbee21616908d662bb6e6160413cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bcbee21616908d662bb6e6160413cfc">&#9670;&#160;</a></span>EnableFEMBCNC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::EnableFEMBCNC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00498">498</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  498</span>                       {</div>
<div class="line"><span class="lineno">  499</span>  <span class="comment">//Enable the clock and control stream to the FEMBs</span></div>
<div class="line"><span class="lineno">  500</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_CLOCK_SELECT&quot;</span>,1);</div>
<div class="line"><span class="lineno">  501</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_COMMAND_SELECT&quot;</span>,1);</div>
<div class="line"><span class="lineno">  502</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a12b7859296c5e2dbd9bf626a72fa76a4" name="a12b7859296c5e2dbd9bf626a72fa76a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12b7859296c5e2dbd9bf626a72fa76a4">&#9670;&#160;</a></span>EraseFlash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::EraseFlash </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>print_updates</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__Flash_8cpp_source.html#l00190">190</a> of file <a class="el" href="WIB__Flash_8cpp_source.html">WIB_Flash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  190</span>                                      {</div>
<div class="line"><span class="lineno">  191</span>  <span class="keywordflow">if</span>(print_updates){</div>
<div class="line"><span class="lineno">  192</span>    fprintf(stderr,<span class="stringliteral">&quot;   Erase flash\n&quot;</span>);</div>
<div class="line"><span class="lineno">  193</span>  }</div>
<div class="line"><span class="lineno">  194</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.RUN_COMMAND&quot;</span>,0x7);</div>
<div class="line"><span class="lineno">  195</span>  <span class="keywordtype">size_t</span> iTimeout = <a class="code hl_define" href="WIB__Flash_8cpp.html#aa5f697453a17690c321b7aa8b8d50c36">FLASH_TIMEOUT</a>;</div>
<div class="line"><span class="lineno">  196</span>  <span class="keywordflow">while</span>(<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;FLASH.BUSY&quot;</span>) &amp;&amp; (iTimeout != 0)){</div>
<div class="line"><span class="lineno">  197</span>    iTimeout--;</div>
<div class="line"><span class="lineno">  198</span>    usleep(100000);</div>
<div class="line"><span class="lineno">  199</span>  }</div>
<div class="line"><span class="lineno">  200</span>  <span class="keywordflow">if</span>(iTimeout == 0){</div>
<div class="line"><span class="lineno">  201</span>    BUException::WIB_FLASH_TIMEOUT e;</div>
<div class="line"><span class="lineno">  202</span>      <span class="comment">//throw an exception</span></div>
<div class="line"><span class="lineno">  203</span>      e.Append(<span class="stringliteral">&quot;Program (erase): FLASH.BUSY&quot;</span>);</div>
<div class="line"><span class="lineno">  204</span>      <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  205</span>    <span class="comment">//throw an exception</span></div>
<div class="line"><span class="lineno">  206</span>  }</div>
<div class="line"><span class="lineno">  207</span>}</div>
<div class="ttc" id="aWIB__Flash_8cpp_html_aa5f697453a17690c321b7aa8b8d50c36"><div class="ttname"><a href="WIB__Flash_8cpp.html#aa5f697453a17690c321b7aa8b8d50c36">FLASH_TIMEOUT</a></div><div class="ttdeci">#define FLASH_TIMEOUT</div><div class="ttdef"><b>Definition</b> <a href="WIB__Flash_8cpp_source.html#l00007">WIB_Flash.cpp:7</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6d7dc613257e9c11c359252069ec45e" name="aa6d7dc613257e9c11c359252069ec45e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d7dc613257e9c11c359252069ec45e">&#9670;&#160;</a></span>FEMBPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::FEMBPower </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>turnOn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00456">456</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  456</span>                                            {</div>
<div class="line"><span class="lineno">  457</span>  std::string reg = <span class="stringliteral">&quot;POWER.ENABLE.FEMB&quot;</span>;</div>
<div class="line"><span class="lineno">  458</span>  reg.push_back(<a class="code hl_function" href="classWIB.html#ae61504060a5708edc9593dd52e6b8c4b">GetFEMBChar</a>(iFEMB));</div>
<div class="line"><span class="lineno">  459</span>  <span class="keywordflow">if</span>(turnOn){</div>
<div class="line"><span class="lineno">  460</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(reg,0x1F);  </div>
<div class="line"><span class="lineno">  461</span>  }<span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  462</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(reg,0x0);  </div>
<div class="line"><span class="lineno">  463</span>  }</div>
<div class="line"><span class="lineno">  464</span>}</div>
<div class="ttc" id="aclassWIB_html_ae61504060a5708edc9593dd52e6b8c4b"><div class="ttname"><a href="classWIB.html#ae61504060a5708edc9593dd52e6b8c4b">WIB::GetFEMBChar</a></div><div class="ttdeci">char GetFEMBChar(uint8_t iFEMB)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00556">WIB.cpp:556</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b3d05f77b55fb2750fcc45c1a19d295" name="a9b3d05f77b55fb2750fcc45c1a19d295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b3d05f77b55fb2750fcc45c1a19d295">&#9670;&#160;</a></span>FlashCheckBusy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::FlashCheckBusy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__Flash_8cpp_source.html#l00362">362</a> of file <a class="el" href="WIB__Flash_8cpp_source.html">WIB_Flash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  362</span>                        {</div>
<div class="line"><span class="lineno">  363</span>  <span class="keywordtype">size_t</span> iTimeout = <a class="code hl_define" href="WIB__Flash_8cpp.html#aa5f697453a17690c321b7aa8b8d50c36">FLASH_TIMEOUT</a>;</div>
<div class="line"><span class="lineno">  364</span>  <span class="keywordflow">while</span>(<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;FLASH.BUSY&quot;</span>) &amp;&amp; (iTimeout != 0)){</div>
<div class="line"><span class="lineno">  365</span>    iTimeout--;</div>
<div class="line"><span class="lineno">  366</span>    usleep(10000);</div>
<div class="line"><span class="lineno">  367</span>  }</div>
<div class="line"><span class="lineno">  368</span>  <span class="keywordflow">if</span>(iTimeout == 0){</div>
<div class="line"><span class="lineno">  369</span>    BUException::WIB_FLASH_TIMEOUT e;</div>
<div class="line"><span class="lineno">  370</span>    <span class="comment">//throw an exception</span></div>
<div class="line"><span class="lineno">  371</span>    e.Append(<span class="stringliteral">&quot;Read: FLASH.BUSY&quot;</span>);</div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  373</span>  }</div>
<div class="line"><span class="lineno">  374</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aede5bdd4e41e94b1fced1e7c883870e7" name="aede5bdd4e41e94b1fced1e7c883870e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aede5bdd4e41e94b1fced1e7c883870e7">&#9670;&#160;</a></span>FullStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::FullStart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00035">35</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   35</span>                   {</div>
<div class="line"><span class="lineno">   36</span>  <span class="comment">//Figure out what kind of WIB firmware we are dealing with</span></div>
<div class="line"><span class="lineno">   37</span>  <a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a> = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.FEMB_COUNT&quot;</span>);</div>
<div class="line"><span class="lineno">   38</span>  <a class="code hl_variable" href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">DAQLinkCount</a> = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.DAQ_LINK_COUNT&quot;</span>);</div>
<div class="line"><span class="lineno">   39</span>  <span class="comment">//Hardcoded lookup for RCE and FELIX</span></div>
<div class="line"><span class="lineno">   40</span>  <span class="keywordflow">if</span>((<a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a> == 4) &amp;&amp; (<a class="code hl_variable" href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">DAQLinkCount</a> == 4)){</div>
<div class="line"><span class="lineno">   41</span>    <a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> = <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5aa993dcebc09873af2ff2dd19575b3370">RCE</a>;</div>
<div class="line"><span class="lineno">   42</span>  }<span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a> == 4) &amp;&amp; (<a class="code hl_variable" href="classWIB.html#adb9618b5ee613fd1be0fd911e4332cad">DAQLinkCount</a> == 2)){</div>
<div class="line"><span class="lineno">   43</span>    <a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> = <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>;</div>
<div class="line"><span class="lineno">   44</span>  }</div>
<div class="line"><span class="lineno">   45</span>  <span class="comment">//TODO check FEMBStreamCount and FEMCDACount from registers on the WIB</span></div>
<div class="line"><span class="lineno">   46</span>  <span class="comment">//TODO create those registers</span></div>
<div class="line"><span class="lineno">   47</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;POWER.ENABLE.MASTER_BIAS&quot;</span>,1);   </div>
<div class="line"><span class="lineno">   48</span>  <a class="code hl_variable" href="classWIB.html#ac9e4c151daf70b6c2d9bd6ec0d49bc9d">started</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   49</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8d774d449d7a7bb5b0fb8a521f14156" name="aa8d774d449d7a7bb5b0fb8a521f14156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8d774d449d7a7bb5b0fb8a521f14156">&#9670;&#160;</a></span>GetDAQ_SI5342AddressPage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::GetDAQ_SI5342AddressPage </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5342_8cpp_source.html#l00030">30</a> of file <a class="el" href="WIB__SI5342_8cpp_source.html">WIB_SI5342.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   30</span>                                                     {</div>
<div class="line"><span class="lineno">   31</span>  <span class="keywordflow">return</span> uint8_t((address &gt;&gt; 8)&amp;0xFF); </div>
<div class="line"><span class="lineno">   32</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a75ebb93b76159089ab6ce867458d9364" name="a75ebb93b76159089ab6ce867458d9364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75ebb93b76159089ab6ce867458d9364">&#9670;&#160;</a></span>GetDAQ_SI5342Page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::GetDAQ_SI5342Page </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5342_8cpp_source.html#l00026">26</a> of file <a class="el" href="WIB__SI5342_8cpp_source.html">WIB_SI5342.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span>                              {</div>
<div class="line"><span class="lineno">   27</span>  <span class="keywordflow">return</span> uint8_t(<a class="code hl_function" href="classWIB.html#a0e4bc04399c3670edc71b4bd96032552">ReadDAQ_SI5342</a>(0x1,1)&amp;0xFF);</div>
<div class="line"><span class="lineno">   28</span>}</div>
<div class="ttc" id="aclassWIB_html_a0e4bc04399c3670edc71b4bd96032552"><div class="ttname"><a href="classWIB.html#a0e4bc04399c3670edc71b4bd96032552">WIB::ReadDAQ_SI5342</a></div><div class="ttdeci">uint32_t ReadDAQ_SI5342(uint16_t address, uint8_t byte_count=4)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5342_8cpp_source.html#l00011">WIB_SI5342.cpp:11</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b99751c2d5be04128f90ecf28e6db2e" name="a6b99751c2d5be04128f90ecf28e6db2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b99751c2d5be04128f90ecf28e6db2e">&#9670;&#160;</a></span>GetDAQLinkChar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char WIB::GetDAQLinkChar </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iDAQLink</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00518">518</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  518</span>                                        {</div>
<div class="line"><span class="lineno">  519</span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><span class="lineno">  520</span>  <span class="comment">//Check if the link is in range given DAQLinkCount (throws)</span></div>
<div class="line"><span class="lineno">  521</span>  <a class="code hl_function" href="classWIB.html#ad5f237c6cbfb59423aa6915f35e290cd">CheckDAQLinkInRange</a>(iDAQLink);</div>
<div class="line"><span class="lineno">  522</span>  <span class="comment">//Convert the numeric daq link number to a char</span></div>
<div class="line"><span class="lineno">  523</span>  <span class="keywordflow">switch</span> (iDAQLink){</div>
<div class="line"><span class="lineno">  524</span>  <span class="keywordflow">case</span> 1:    </div>
<div class="line"><span class="lineno">  525</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;1&#39;</span>;</div>
<div class="line"><span class="lineno">  526</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  527</span>  <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  528</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;2&#39;</span>;</div>
<div class="line"><span class="lineno">  529</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  530</span>  <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">  531</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;3&#39;</span>;</div>
<div class="line"><span class="lineno">  532</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  533</span>  <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno">  534</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;4&#39;</span>;</div>
<div class="line"><span class="lineno">  535</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  536</span>  <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  537</span>    BUException::WIB_INDEX_OUT_OF_RANGE e;    </div>
<div class="line"><span class="lineno">  538</span>    e.Append(<span class="stringliteral">&quot;DAQ Link\n&quot;</span>);</div>
<div class="line"><span class="lineno">  539</span>    <span class="keywordtype">char</span> estr[] = <span class="stringliteral">&quot;0&quot;</span>;</div>
<div class="line"><span class="lineno">  540</span>    estr[0] = <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a>;</div>
<div class="line"><span class="lineno">  541</span>    e.Append(estr);      </div>
<div class="line"><span class="lineno">  542</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  543</span>  }</div>
<div class="line"><span class="lineno">  544</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a>;</div>
<div class="line"><span class="lineno">  545</span>}</div>
<div class="ttc" id="aclassWIB_html_ad5f237c6cbfb59423aa6915f35e290cd"><div class="ttname"><a href="classWIB.html#ad5f237c6cbfb59423aa6915f35e290cd">WIB::CheckDAQLinkInRange</a></div><div class="ttdeci">bool CheckDAQLinkInRange(uint8_t iDAQLink)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00509">WIB.cpp:509</a></div></div>
<div class="ttc" id="anamespacehermes-make-dro-map_html_af9b52fbc05c1575ff304264a11855b22"><div class="ttname"><a href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">hermes-make-dro-map.c</a></div><div class="ttdeci">c</div><div class="ttdef"><b>Definition</b> <a href="hermes-make-dro-map_8py_source.html#l00030">hermes-make-dro-map.py:30</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a1283ccecd2bf533107bc26bd5169cb" name="a3a1283ccecd2bf533107bc26bd5169cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a1283ccecd2bf533107bc26bd5169cb">&#9670;&#160;</a></span>GetDAQMode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classWIB.html#a22450657af92080a3406b875edc1b2c5">WIB_DAQ_t</a> WIB::GetDAQMode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00219">219</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  219</span>{<span class="keywordflow">return</span> <a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a>;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ed18b639f8176630a6f3cbc46cd85f7" name="a2ed18b639f8176630a6f3cbc46cd85f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ed18b639f8176630a6f3cbc46cd85f7">&#9670;&#160;</a></span>GetDTS_SI5344AddressPage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::GetDTS_SI5344AddressPage </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5344_8cpp_source.html#l00030">30</a> of file <a class="el" href="WIB__SI5344_8cpp_source.html">WIB_SI5344.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   30</span>                                                     {</div>
<div class="line"><span class="lineno">   31</span>  <span class="keywordflow">return</span> uint8_t((address &gt;&gt; 8)&amp;0xFF); </div>
<div class="line"><span class="lineno">   32</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a519a38027b8d179e87067f46c70d29e0" name="a519a38027b8d179e87067f46c70d29e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a519a38027b8d179e87067f46c70d29e0">&#9670;&#160;</a></span>GetDTS_SI5344Page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::GetDTS_SI5344Page </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5344_8cpp_source.html#l00026">26</a> of file <a class="el" href="WIB__SI5344_8cpp_source.html">WIB_SI5344.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span>                              {</div>
<div class="line"><span class="lineno">   27</span>  <span class="keywordflow">return</span> uint8_t(<a class="code hl_function" href="classWIB.html#a1d398812aecd76fb691e9faee83dde0b">ReadDTS_SI5344</a>(0x1,1)&amp;0xFF);</div>
<div class="line"><span class="lineno">   28</span>}</div>
<div class="ttc" id="aclassWIB_html_a1d398812aecd76fb691e9faee83dde0b"><div class="ttname"><a href="classWIB.html#a1d398812aecd76fb691e9faee83dde0b">WIB::ReadDTS_SI5344</a></div><div class="ttdeci">uint32_t ReadDTS_SI5344(uint16_t address, uint8_t byte_count=4)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5344_8cpp_source.html#l00011">WIB_SI5344.cpp:11</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2c2a5e6fec6bafce5e05d84352dff02" name="ab2c2a5e6fec6bafce5e05d84352dff02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2c2a5e6fec6bafce5e05d84352dff02">&#9670;&#160;</a></span>GetEventBuilderDebugMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::GetEventBuilderDebugMode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a413230f17a971d980489977c0a496b00" name="a413230f17a971d980489977c0a496b00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a413230f17a971d980489977c0a496b00">&#9670;&#160;</a></span>GetFEMBCDChar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char WIB::GetFEMBCDChar </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iCD</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00603">603</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  603</span>                                  {</div>
<div class="line"><span class="lineno">  604</span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><span class="lineno">  605</span>  <span class="comment">//Check if the link is in range given FEMBCount (throws)</span></div>
<div class="line"><span class="lineno">  606</span>  <a class="code hl_function" href="classWIB.html#ad1d41e90f7cdf4fef8d2fdc004563c5d">CheckFEMBCDInRange</a>(iCD);</div>
<div class="line"><span class="lineno">  607</span>  <span class="comment">//Convert the numeric daq link number to a char</span></div>
<div class="line"><span class="lineno">  608</span>  <span class="keywordflow">switch</span> (iCD){</div>
<div class="line"><span class="lineno">  609</span>  <span class="keywordflow">case</span> 1:    </div>
<div class="line"><span class="lineno">  610</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;1&#39;</span>;</div>
<div class="line"><span class="lineno">  611</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  612</span>  <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  613</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;2&#39;</span>;</div>
<div class="line"><span class="lineno">  614</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  615</span>  <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  616</span>    BUException::WIB_INDEX_OUT_OF_RANGE e;</div>
<div class="line"><span class="lineno">  617</span>    e.Append(<span class="stringliteral">&quot;FEMB CDA\n&quot;</span>);</div>
<div class="line"><span class="lineno">  618</span>    <span class="keywordtype">char</span> estr[] = <span class="stringliteral">&quot;0&quot;</span>;</div>
<div class="line"><span class="lineno">  619</span>    estr[0] = <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a>;</div>
<div class="line"><span class="lineno">  620</span>    e.Append(estr);      </div>
<div class="line"><span class="lineno">  621</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  622</span>  }</div>
<div class="line"><span class="lineno">  623</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a>;</div>
<div class="line"><span class="lineno">  624</span>}</div>
<div class="ttc" id="aclassWIB_html_ad1d41e90f7cdf4fef8d2fdc004563c5d"><div class="ttname"><a href="classWIB.html#ad1d41e90f7cdf4fef8d2fdc004563c5d">WIB::CheckFEMBCDInRange</a></div><div class="ttdeci">bool CheckFEMBCDInRange(uint8_t iCD)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00594">WIB.cpp:594</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae61504060a5708edc9593dd52e6b8c4b" name="ae61504060a5708edc9593dd52e6b8c4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae61504060a5708edc9593dd52e6b8c4b">&#9670;&#160;</a></span>GetFEMBChar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char WIB::GetFEMBChar </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00556">556</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  556</span>                                  {</div>
<div class="line"><span class="lineno">  557</span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><span class="lineno">  558</span>  <span class="comment">//Check if the link is in range given FEMBCount (throws)</span></div>
<div class="line"><span class="lineno">  559</span>  <a class="code hl_function" href="classWIB.html#afb7df8531abf8697bba12eda66f1f657">CheckFEMBInRange</a>(iFEMB);</div>
<div class="line"><span class="lineno">  560</span>  <span class="comment">//Convert the numeric daq link number to a char</span></div>
<div class="line"><span class="lineno">  561</span>  <span class="keywordflow">switch</span> (iFEMB){</div>
<div class="line"><span class="lineno">  562</span>  <span class="keywordflow">case</span> 1:    </div>
<div class="line"><span class="lineno">  563</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;1&#39;</span>;</div>
<div class="line"><span class="lineno">  564</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  565</span>  <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  566</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;2&#39;</span>;</div>
<div class="line"><span class="lineno">  567</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  568</span>  <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">  569</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;3&#39;</span>;</div>
<div class="line"><span class="lineno">  570</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  571</span>  <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno">  572</span>    <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a> = <span class="charliteral">&#39;4&#39;</span>;</div>
<div class="line"><span class="lineno">  573</span>    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  574</span>  <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  575</span>    BUException::WIB_INDEX_OUT_OF_RANGE e;</div>
<div class="line"><span class="lineno">  576</span>    e.Append(<span class="stringliteral">&quot;FEMB\n&quot;</span>);</div>
<div class="line"><span class="lineno">  577</span>    <span class="keywordtype">char</span> estr[] = <span class="stringliteral">&quot;0&quot;</span>;</div>
<div class="line"><span class="lineno">  578</span>    estr[0] = <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a>;</div>
<div class="line"><span class="lineno">  579</span>    e.Append(estr);      </div>
<div class="line"><span class="lineno">  580</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  581</span>  }</div>
<div class="line"><span class="lineno">  582</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacehermes-make-dro-map.html#af9b52fbc05c1575ff304264a11855b22">c</a>;</div>
<div class="line"><span class="lineno">  583</span>}</div>
<div class="ttc" id="aclassWIB_html_afb7df8531abf8697bba12eda66f1f657"><div class="ttname"><a href="classWIB.html#afb7df8531abf8697bba12eda66f1f657">WIB::CheckFEMBInRange</a></div><div class="ttdeci">bool CheckFEMBInRange(uint8_t iFEMB)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00547">WIB.cpp:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c7a7db84743cf777f35bae9c249411c" name="a6c7a7db84743cf777f35bae9c249411c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c7a7db84743cf777f35bae9c249411c">&#9670;&#160;</a></span>GetFEMBCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::GetFEMBCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00218">218</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  218</span>{<span class="keywordflow">return</span> <a class="code hl_variable" href="classWIB.html#ad8a0a594cc9504dcdd31372f47ffbef4">FEMBCount</a>;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a37b3b98809632f1f14a0d0c78d0839af" name="a37b3b98809632f1f14a0d0c78d0839af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37b3b98809632f1f14a0d0c78d0839af">&#9670;&#160;</a></span>GetFEMBFakeCOLDATAMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::GetFEMBFakeCOLDATAMode </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iCD</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FAKE__CD_8cpp_source.html#l00077">77</a> of file <a class="el" href="WIB__FAKE__CD_8cpp_source.html">WIB_FAKE_CD.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   77</span>                                                            {</div>
<div class="line"><span class="lineno">   78</span>  std::string base(<span class="stringliteral">&quot;FEMB0.DAQ.FAKE_CD.CD0.&quot;</span>);</div>
<div class="line"><span class="lineno">   79</span>  base[4] = <a class="code hl_function" href="classWIB.html#ae61504060a5708edc9593dd52e6b8c4b">GetFEMBChar</a>(iFEMB);</div>
<div class="line"><span class="lineno">   80</span>  base[20] = <a class="code hl_function" href="classWIB.html#a413230f17a971d980489977c0a496b00">GetFEMBCDChar</a>(iCD);</div>
<div class="line"><span class="lineno">   81</span>  </div>
<div class="line"><span class="lineno">   82</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(base+<span class="stringliteral">&quot;FAKE_MODE&quot;</span>);</div>
<div class="line"><span class="lineno">   83</span>}</div>
<div class="ttc" id="aclassWIB_html_a413230f17a971d980489977c0a496b00"><div class="ttname"><a href="classWIB.html#a413230f17a971d980489977c0a496b00">WIB::GetFEMBCDChar</a></div><div class="ttdeci">char GetFEMBCDChar(uint8_t iCD)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00603">WIB.cpp:603</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86882aeeac426be30e14e70a832ac1cd" name="a86882aeeac426be30e14e70a832ac1cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86882aeeac426be30e14e70a832ac1cd">&#9670;&#160;</a></span>GetFEMBStreamSource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::GetFEMBStreamSource </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iStream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FAKE__CD_8cpp_source.html#l00044">44</a> of file <a class="el" href="WIB__FAKE__CD_8cpp_source.html">WIB_FAKE_CD.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   44</span>                                                             {</div>
<div class="line"><span class="lineno">   45</span>  <a class="code hl_function" href="classWIB.html#a14b19492deecb8672e78168c1a6f67b3">CheckFEMBStreamInRange</a>(iStream);</div>
<div class="line"><span class="lineno">   46</span>  std::string base = <span class="stringliteral">&quot;FEMB0.DAQ.FAKE_CD.RX_DATA_SOURCE&quot;</span>;</div>
<div class="line"><span class="lineno">   47</span>  base[4] = <a class="code hl_function" href="classWIB.html#ae61504060a5708edc9593dd52e6b8c4b">GetFEMBChar</a>(iFEMB);</div>
<div class="line"><span class="lineno">   48</span>  <span class="comment">//Read the current settings</span></div>
<div class="line"><span class="lineno">   49</span>  uint32_t <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(base);</div>
<div class="line"><span class="lineno">   50</span>  <span class="keywordflow">return</span> (data &gt;&gt; (iStream -1))&amp;0x1;</div>
<div class="line"><span class="lineno">   51</span>}</div>
<div class="ttc" id="aclassWIB_html_a14b19492deecb8672e78168c1a6f67b3"><div class="ttname"><a href="classWIB.html#a14b19492deecb8672e78168c1a6f67b3">WIB::CheckFEMBStreamInRange</a></div><div class="ttdeci">bool CheckFEMBStreamInRange(uint8_t iStream)</div><div class="ttdef"><b>Definition</b> <a href="WIB_8cpp_source.html#l00585">WIB.cpp:585</a></div></div>
<div class="ttc" id="anamespaceplot__trigprim__output__data_html_a36ddbfa7e38ab6d7667b717c8e86e669"><div class="ttname"><a href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">plot_trigprim_output_data.data</a></div><div class="ttdeci">data</div><div class="ttdef"><b>Definition</b> <a href="plot__trigprim__output__data_8py_source.html#l00010">plot_trigprim_output_data.py:10</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a97226fbedd664e93847a98064e764883" name="a97226fbedd664e93847a98064e764883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97226fbedd664e93847a98064e764883">&#9670;&#160;</a></span>HuntFEMBPhase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::HuntFEMBPhase </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>clk_phase_data_start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l01061">1061</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1061</span>                                                                   {</div>
<div class="line"><span class="lineno"> 1062</span>  uint32_t clk_phase_data0 = (clk_phase_data_start &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><span class="lineno"> 1063</span>  uint32_t clk_phase_data1 = clk_phase_data_start &amp; 0xFF;</div>
<div class="line"><span class="lineno"> 1064</span>  uint32_t adc_fifo_sync = 1;</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>  uint32_t a_cs[8] = {</div>
<div class="line"><span class="lineno"> 1067</span>    0xc000, 0x3000, 0x0c00, 0x0300,</div>
<div class="line"><span class="lineno"> 1068</span>    0x00c0, 0x0030, 0x000c, 0x0003};</div>
<div class="line"><span class="lineno"> 1069</span> </div>
<div class="line"><span class="lineno"> 1070</span>  uint32_t a_mark[8] = {</div>
<div class="line"><span class="lineno"> 1071</span>    0x80, 0x40, 0x20, 0x10,</div>
<div class="line"><span class="lineno"> 1072</span>    0x08, 0x04, 0x02, 0x01};</div>
<div class="line"><span class="lineno"> 1073</span> </div>
<div class="line"><span class="lineno"> 1074</span>  uint32_t a_cnt[8] = {</div>
<div class="line"><span class="lineno"> 1075</span>    0,0,0,0,</div>
<div class="line"><span class="lineno"> 1076</span>    0,0,0,0};</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>  <span class="keywordflow">while</span> (adc_fifo_sync){</div>
<div class="line"><span class="lineno"> 1079</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001);</div>
<div class="line"><span class="lineno"> 1080</span>    adc_fifo_sync = (<a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, 6) &amp; 0xFFFF0000) &gt;&gt; 16;</div>
<div class="line"><span class="lineno"> 1081</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001);</div>
<div class="line"><span class="lineno"> 1082</span>    adc_fifo_sync = (<a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, 6) &amp; 0xFFFF0000) &gt;&gt; 16; </div>
<div class="line"><span class="lineno"> 1083</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001);</div>
<div class="line"><span class="lineno"> 1084</span> </div>
<div class="line"><span class="lineno"> 1085</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; ADC FIFO sync: &quot;</span> &lt;&lt; std::bitset&lt;16&gt;(adc_fifo_sync) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1086</span>    </div>
<div class="line"><span class="lineno"> 1087</span>    <span class="keywordflow">if</span> (adc_fifo_sync == 0){</div>
<div class="line"><span class="lineno"> 1088</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; Successful SPI config and ADC FIFO synced&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1089</span>      <span class="comment">//std::cout &lt;&lt; &quot;  ADC_ASIC_CLK_PHASE_SELECT:   &quot; &lt;&lt; std::hex &lt;&lt; std::setw(2) &lt;&lt; std::setfill(&#39;0&#39;) &lt;&lt; clk_phase_data0 &lt;&lt; std::endl;</span></div>
<div class="line"><span class="lineno"> 1090</span>      <span class="comment">//std::cout &lt;&lt; &quot;  ADC_ASIC_CLK_PHASE_SELECT_2: &quot; &lt;&lt; std::hex &lt;&lt; std::setw(2) &lt;&lt; std::setfill(&#39;0&#39;) &lt;&lt; clk_phase_data1 &lt;&lt; std::endl;</span></div>
<div class="line"><span class="lineno"> 1091</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;  phase:   &quot;</span> &lt;&lt; std::hex &lt;&lt; std::setw(2) &lt;&lt; std::setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; clk_phase_data0;</div>
<div class="line"><span class="lineno"> 1092</span>      std::cout &lt;&lt; std::hex &lt;&lt; std::setw(2) &lt;&lt; std::setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; clk_phase_data1 &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1093</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1094</span>    }</div>
<div class="line"><span class="lineno"> 1095</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno"> 1096</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;ERROR: sync not zero: &quot;</span> &lt;&lt; std::bitset&lt;16&gt;(adc_fifo_sync) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1097</span>      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 8; ++i){</div>
<div class="line"><span class="lineno"> 1098</span>        uint32_t a = adc_fifo_sync &amp; a_cs[i];</div>
<div class="line"><span class="lineno"> 1099</span>        uint32_t a_mark_xor = 0;</div>
<div class="line"><span class="lineno"> 1100</span>        <span class="keywordflow">if</span> (a != 0){</div>
<div class="line"><span class="lineno"> 1101</span>          a_cnt[i]++;</div>
<div class="line"><span class="lineno"> 1102</span>          a_mark_xor = a_mark[i] ^ 0xFF;</div>
<div class="line"><span class="lineno"> 1103</span>          <span class="keywordflow">if</span> (a_cnt[i] == 1 || a_cnt[i] == 3){</div>
<div class="line"><span class="lineno"> 1104</span>            clk_phase_data0 = ((clk_phase_data0 &amp; a_mark[i]) ^ a_mark[i]) + (clk_phase_data0 &amp; a_mark_xor);</div>
<div class="line"><span class="lineno"> 1105</span>          }</div>
<div class="line"><span class="lineno"> 1106</span>          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a_cnt[i] == 2 || a_cnt[i] == 4){</div>
<div class="line"><span class="lineno"> 1107</span>            clk_phase_data1 = ((clk_phase_data1 &amp; a_mark[i]) ^ a_mark[i]) + (clk_phase_data1 &amp; a_mark_xor);</div>
<div class="line"><span class="lineno"> 1108</span>          }</div>
<div class="line"><span class="lineno"> 1109</span>          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a_cnt[i] &gt;= 5){</div>
<div class="line"><span class="lineno"> 1110</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1111</span>          }</div>
<div class="line"><span class="lineno"> 1112</span>        }</div>
<div class="line"><span class="lineno"> 1113</span>        <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno"> 1114</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1115</span>        }</div>
<div class="line"><span class="lineno"> 1116</span>      }</div>
<div class="line"><span class="lineno"> 1117</span>      uint16_t clk_phase_to_write=0;</div>
<div class="line"><span class="lineno"> 1118</span>      clk_phase_to_write |= (clk_phase_data0 &amp; 0xFF) &lt;&lt; 8;</div>
<div class="line"><span class="lineno"> 1119</span>      clk_phase_to_write |= clk_phase_data1;</div>
<div class="line"><span class="lineno"> 1120</span>      <a class="code hl_function" href="classWIB.html#afb5bdb31706d3a981484fdf26d9184dc">WriteFEMBPhase</a>(iFEMB,clk_phase_to_write);</div>
<div class="line"><span class="lineno"> 1121</span>    }</div>
<div class="line"><span class="lineno"> 1122</span>  }</div>
<div class="line"><span class="lineno"> 1123</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1124</span>}</div>
<div class="ttc" id="aclassWIB_html_afb5bdb31706d3a981484fdf26d9184dc"><div class="ttname"><a href="classWIB.html#afb5bdb31706d3a981484fdf26d9184dc">WIB::WriteFEMBPhase</a></div><div class="ttdeci">void WriteFEMBPhase(uint8_t iFEMB, uint16_t clk_phase_data)</div><div class="ttdef"><b>Definition</b> <a href="WIB__FEMB_8cpp_source.html#l00943">WIB_FEMB.cpp:943</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f684559b36ca03641249e2db91f6516" name="a4f684559b36ca03641249e2db91f6516"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f684559b36ca03641249e2db91f6516">&#9670;&#160;</a></span>InitializeDTS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::InitializeDTS </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>PDTSsource</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clockSource</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>PDTSAlignment_timeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__DTS_8cpp_source.html#l00012">12</a> of file <a class="el" href="WIB__DTS_8cpp_source.html">WIB_DTS.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   12</span>                                                                                             {</div>
<div class="line"><span class="lineno">   13</span>  <span class="comment">//Disable the PDTS</span></div>
<div class="line"><span class="lineno">   14</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.PDTS_ENABLE&quot;</span>,0x0);</div>
<div class="line"><span class="lineno">   15</span> </div>
<div class="line"><span class="lineno">   16</span>  <span class="comment">//Disable SI5344 outputs (fixed by SI5344 config)</span></div>
<div class="line"><span class="lineno">   17</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.ENABLE&quot;</span>,0);</div>
<div class="line"><span class="lineno">   18</span>  <span class="comment">//Disable SI5344 (fixed by SI5344 config)</span></div>
<div class="line"><span class="lineno">   19</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span> </div>
<div class="line"><span class="lineno">   22</span>  <span class="comment">//Reset the I2C firmware</span></div>
<div class="line"><span class="lineno">   23</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CDS.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">   24</span> </div>
<div class="line"><span class="lineno">   25</span>  </div>
<div class="line"><span class="lineno">   26</span>  <span class="keywordflow">if</span>(0 == clockSource){</div>
<div class="line"><span class="lineno">   27</span>    printf(<span class="stringliteral">&quot;Using PDTS for DUNE timing.\n\nConfiguring clock and data separator\n&quot;</span>);</div>
<div class="line"><span class="lineno">   28</span>    <span class="comment">//Bring up the CDS</span></div>
<div class="line"><span class="lineno">   29</span>    <span class="keywordtype">float</span> frequency = 0;</div>
<div class="line"><span class="lineno">   30</span>    <span class="keywordflow">try</span>{</div>
<div class="line"><span class="lineno">   31</span>      frequency = <a class="code hl_function" href="classWIB.html#aafb7beccff730f2cd3641ae63f34dedf">ConfigureDTSCDS</a>(PDTSsource);</div>
<div class="line"><span class="lineno">   32</span>    }<span class="keywordflow">catch</span>(<a class="code hl_class" href="classBUException_1_1exBase.html">BUException::exBase</a> &amp; e){</div>
<div class="line"><span class="lineno">   33</span>      frequency = 0;</div>
<div class="line"><span class="lineno">   34</span>      e.<a class="code hl_function" href="classBUException_1_1exBase.html#a3b4525fca7085dc41e2d815915dbc44a">Append</a>(<span class="stringliteral">&quot;Failed to communicate with the DTS CDS via I2C\n&quot;</span>);</div>
<div class="line"><span class="lineno">   35</span>      <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">   36</span>    }</div>
<div class="line"><span class="lineno">   37</span>    uint32_t LOL = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.CDS.LOL&quot;</span>);</div>
<div class="line"><span class="lineno">   38</span>    uint32_t LOS = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.CDS.LOS&quot;</span>);    </div>
<div class="line"><span class="lineno">   39</span>    printf(<span class="stringliteral">&quot;CDS frequency %f\n&quot;</span>,frequency);</div>
<div class="line"><span class="lineno">   40</span>    printf(<span class="stringliteral">&quot;CDS LOL=%d LOS=%d\n&quot;</span>,LOL,LOS);</div>
<div class="line"><span class="lineno">   41</span>  </div>
<div class="line"><span class="lineno">   42</span>    <span class="comment">//Check for the correct frequency, not in LOS, and not in LOL</span></div>
<div class="line"><span class="lineno">   43</span>    <span class="comment">//    if( (2.4136e+08 == frequency) &amp;&amp; </span></div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">if</span>(LOL || LOS){</div>
<div class="line"><span class="lineno">   45</span>      BUException::WIB_DTS_ERROR e;</div>
<div class="line"><span class="lineno">   46</span>      e.<a class="code hl_function" href="classBUException_1_1exBase.html#a3b4525fca7085dc41e2d815915dbc44a">Append</a>(<span class="stringliteral">&quot;Failed to configure CDS chip\n&quot;</span>);</div>
<div class="line"><span class="lineno">   47</span>      <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   48</span>    }</div>
<div class="line"><span class="lineno">   49</span>  }<span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   50</span>    printf(<span class="stringliteral">&quot;Using local OSC for DUNE timing\n&quot;</span>);</div>
<div class="line"><span class="lineno">   51</span>  }</div>
<div class="line"><span class="lineno">   52</span>  <span class="comment">//CDS is up</span></div>
<div class="line"><span class="lineno">   53</span> </div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>  printf(<span class="stringliteral">&quot;\nConfiguring SI5344.\n&quot;</span>);</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>  <span class="comment">//Set the SI5344 source</span></div>
<div class="line"><span class="lineno">   58</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.INPUT_SELECT&quot;</span>,clockSource);</div>
<div class="line"><span class="lineno">   59</span>  <span class="comment">//Configure Si5344 with default config file</span></div>
<div class="line"><span class="lineno">   60</span>  <span class="comment">//Do the I2C configuration</span></div>
<div class="line"><span class="lineno">   61</span>  <span class="keywordflow">try</span>{</div>
<div class="line"><span class="lineno">   62</span>    <a class="code hl_function" href="classWIB.html#a2846252140d13dbf862b4351aa0b0500">LoadConfigDTS_SI5344</a>(<span class="stringliteral">&quot;&quot;</span>); </div>
<div class="line"><span class="lineno">   63</span>  }<span class="keywordflow">catch</span>(<a class="code hl_class" href="classBUException_1_1exBase.html">BUException::exBase</a> &amp; e){</div>
<div class="line"><span class="lineno">   64</span>    <span class="comment">//Disable SI5344 outputs</span></div>
<div class="line"><span class="lineno">   65</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.ENABLE&quot;</span>,0);</div>
<div class="line"><span class="lineno">   66</span>    <span class="comment">//Disable SI5344</span></div>
<div class="line"><span class="lineno">   67</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.RESET&quot;</span>,1);   </div>
<div class="line"><span class="lineno">   68</span>    </div>
<div class="line"><span class="lineno">   69</span>    e.<a class="code hl_function" href="classBUException_1_1exBase.html#a3b4525fca7085dc41e2d815915dbc44a">Append</a>(<span class="stringliteral">&quot;Error in LoadConfigDTS_SI5344\n&quot;</span>);</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">   71</span>  }</div>
<div class="line"><span class="lineno">   72</span>  </div>
<div class="line"><span class="lineno">   73</span>  usleep(100000);</div>
<div class="line"><span class="lineno">   74</span>    </div>
<div class="line"><span class="lineno">   75</span>  <span class="comment">//Check that SI5344 is locked on</span></div>
<div class="line"><span class="lineno">   76</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.LOS&quot;</span>) ||</div>
<div class="line"><span class="lineno">   77</span>     <a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.LOL&quot;</span>)){</div>
<div class="line"><span class="lineno">   78</span>    <span class="comment">//Disable SI5344 outputs</span></div>
<div class="line"><span class="lineno">   79</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.ENABLE&quot;</span>,0);</div>
<div class="line"><span class="lineno">   80</span>    <span class="comment">//Disable SI5344</span></div>
<div class="line"><span class="lineno">   81</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.RESET&quot;</span>,1);   </div>
<div class="line"><span class="lineno">   82</span>    </div>
<div class="line"><span class="lineno">   83</span>    <span class="comment">//Throw</span></div>
<div class="line"><span class="lineno">   84</span>    BUException::WIB_DTS_ERROR e;</div>
<div class="line"><span class="lineno">   85</span>    e.<a class="code hl_function" href="classBUException_1_1exBase.html#a3b4525fca7085dc41e2d815915dbc44a">Append</a>(<span class="stringliteral">&quot;Failed to configure the SI5344 chip correctly\n&quot;</span>);</div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   87</span>  }</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>  <span class="comment">//Enable the clock for FPGA</span></div>
<div class="line"><span class="lineno">   90</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.SI5344.ENABLE&quot;</span>,1);</div>
<div class="line"><span class="lineno">   91</span>  usleep(100000);</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>  <span class="keywordtype">char</span> <span class="keyword">const</span> * <span class="keyword">const</span> PDTSStates[] = {<span class="stringliteral">&quot;W_RST&quot;</span>,</div>
<div class="line"><span class="lineno">   94</span>                     <span class="stringliteral">&quot;W_LINK&quot;</span>,</div>
<div class="line"><span class="lineno">   95</span>                     <span class="stringliteral">&quot;W_FREQ&quot;</span>,</div>
<div class="line"><span class="lineno">   96</span>                     <span class="stringliteral">&quot;W_ADJUST&quot;</span>,</div>
<div class="line"><span class="lineno">   97</span>                     <span class="stringliteral">&quot;W_ALIGN&quot;</span>,</div>
<div class="line"><span class="lineno">   98</span>                     <span class="stringliteral">&quot;W_LOCK&quot;</span>,</div>
<div class="line"><span class="lineno">   99</span>                     <span class="stringliteral">&quot;W_PHASE&quot;</span>,</div>
<div class="line"><span class="lineno">  100</span>                     <span class="stringliteral">&quot;W_RDY&quot;</span>,</div>
<div class="line"><span class="lineno">  101</span>                     <span class="stringliteral">&quot;RUN&quot;</span>,</div>
<div class="line"><span class="lineno">  102</span>                     <span class="stringliteral">&quot;0x9&quot;</span>,</div>
<div class="line"><span class="lineno">  103</span>                     <span class="stringliteral">&quot;0xA&quot;</span>,</div>
<div class="line"><span class="lineno">  104</span>                     <span class="stringliteral">&quot;0xB&quot;</span>,</div>
<div class="line"><span class="lineno">  105</span>                     <span class="stringliteral">&quot;ERR_R&quot;</span>,</div>
<div class="line"><span class="lineno">  106</span>                     <span class="stringliteral">&quot;ERR_T&quot;</span>,</div>
<div class="line"><span class="lineno">  107</span>                     <span class="stringliteral">&quot;ERR_P&quot;</span>,</div>
<div class="line"><span class="lineno">  108</span>                     <span class="stringliteral">&quot;0xF&quot;</span>};</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>  </div>
<div class="line"><span class="lineno">  111</span>  <span class="keywordflow">if</span>(0 == clockSource){</div>
<div class="line"><span class="lineno">  112</span>    printf(<span class="stringliteral">&quot;\nSetup PDTS.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordtype">bool</span> timeout_exists = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  114</span>    <span class="keywordflow">if</span> (PDTSAlignment_timeout == 0)</div>
<div class="line"><span class="lineno">  115</span>    timeout_exists = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>    <span class="keyword">auto</span> <a class="code hl_variable" href="namespacedunedaq.html#a8ef9f13ca70b219d8e83fa1b32a1b2ca">start_time</a> = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordtype">bool</span> timed_out = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">while</span> ((timeout_exists == <span class="keyword">false</span>) || timed_out == <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">  121</span>      <span class="comment">//Using PDTS, set that up.</span></div>
<div class="line"><span class="lineno">  122</span>      usleep(500000);</div>
<div class="line"><span class="lineno">  123</span>      <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.PDTS_ENABLE&quot;</span>,1);</div>
<div class="line"><span class="lineno">  124</span>      usleep(500000); <span class="comment">//needed in new PDTS system to get to a good state before giving up and trying a new phase. </span></div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>      <span class="comment">//See if we&#39;ve locked</span></div>
<div class="line"><span class="lineno">  127</span>      uint32_t pdts_state = <a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(<span class="stringliteral">&quot;DTS.PDTS_STATE&quot;</span>);</div>
<div class="line"><span class="lineno">  128</span>      printf(<span class="stringliteral">&quot;PDTS state: %s (0x%01X)\n&quot;</span>,PDTSStates[pdts_state&amp;0xF],pdts_state);</div>
<div class="line"><span class="lineno">  129</span>      <span class="keywordflow">if</span> ((pdts_state &lt; 0x6) || (pdts_state &gt; 0x8)) {</div>
<div class="line"><span class="lineno">  130</span>          <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.PDTS_ENABLE&quot;</span>,0);</div>
<div class="line"><span class="lineno">  131</span>          <span class="comment">//dynamic post-amble</span></div>
<div class="line"><span class="lineno">  132</span>          <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  133</span>          <a class="code hl_function" href="classWIB.html#a5cce03773aaf423c8a848517ddd43e6c">SetDTS_SI5344Page</a>(0x0);</div>
<div class="line"><span class="lineno">  134</span>          <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  135</span>          <a class="code hl_function" href="classWIB.html#a6df6b4ae89ccb9670b7b6b63c0936107">WriteDTS_SI5344</a>(0x1C,0x1,1);</div>
<div class="line"><span class="lineno">  136</span>      }</div>
<div class="line"><span class="lineno">  137</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0x6 == pdts_state){</div>
<div class="line"><span class="lineno">  138</span>          <a class="code hl_function" href="namespaceers.html#a2123c7b55b0ce7e62bd36965ad324697">ers::info</a>(dunedaq::wibmod::WaitingForAlignment(<a class="code hl_define" href="LocalContext_8hpp.html#adea523c3dfceb9683f7acb5e719283ee">ERS_HERE</a>));</div>
<div class="line"><span class="lineno">  139</span>      }</div>
<div class="line"><span class="lineno">  140</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0x7 == pdts_state){</div>
<div class="line"><span class="lineno">  141</span>          <a class="code hl_function" href="namespaceers.html#a2123c7b55b0ce7e62bd36965ad324697">ers::info</a>(dunedaq::wibmod::WaitingForTimestamp(<a class="code hl_define" href="LocalContext_8hpp.html#adea523c3dfceb9683f7acb5e719283ee">ERS_HERE</a>));</div>
<div class="line"><span class="lineno">  142</span>      }</div>
<div class="line"><span class="lineno">  143</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  144</span>          <span class="keywordflow">return</span>; <span class="comment">//0x8 == pdts_state</span></div>
<div class="line"><span class="lineno">  145</span>      }</div>
<div class="line"><span class="lineno">  146</span>      <span class="keyword">auto</span> <a class="code hl_function" href="kafka__opmon__consumer_8cxx.html#abea48909f8fcf1a40fe240b2efb25339">now</a> = std::chrono::high_resolution_clock::now();</div>
<div class="line"><span class="lineno">  147</span>      <span class="keyword">auto</span> duration = <a class="code hl_function" href="kafka__opmon__consumer_8cxx.html#abea48909f8fcf1a40fe240b2efb25339">now</a> - <a class="code hl_variable" href="namespacedunedaq.html#a8ef9f13ca70b219d8e83fa1b32a1b2ca">start_time</a>;</div>
<div class="line"><span class="lineno">  148</span>      <span class="keywordflow">if</span> ( duration.count() &gt; PDTSAlignment_timeout)</div>
<div class="line"><span class="lineno">  149</span>          timed_out = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  150</span>    }</div>
<div class="line"><span class="lineno">  151</span>    <span class="comment">//If we get here something went wrong</span></div>
<div class="line"><span class="lineno">  152</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  153</span>    <a class="code hl_function" href="classWIB.html#a5cce03773aaf423c8a848517ddd43e6c">SetDTS_SI5344Page</a>(0x0);</div>
<div class="line"><span class="lineno">  154</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  155</span>    <a class="code hl_function" href="classWIB.html#a6df6b4ae89ccb9670b7b6b63c0936107">WriteDTS_SI5344</a>(0x1C,0x1,1);</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    BUException::WIB_DTS_ERROR e;</div>
<div class="line"><span class="lineno">  158</span>    e.Append(<span class="stringliteral">&quot;Failed to configure the PDTS correctly within timeout\n&quot;</span>);</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">throw</span> e; </div>
<div class="line"><span class="lineno">  160</span>  }</div>
<div class="line"><span class="lineno">  161</span>}</div>
<div class="ttc" id="aLocalContext_8hpp_html_adea523c3dfceb9683f7acb5e719283ee"><div class="ttname"><a href="LocalContext_8hpp.html#adea523c3dfceb9683f7acb5e719283ee">ERS_HERE</a></div><div class="ttdeci">#define ERS_HERE</div><div class="ttdef"><b>Definition</b> <a href="LocalContext_8hpp_source.html#l00130">LocalContext.hpp:130</a></div></div>
<div class="ttc" id="aclassBUException_1_1exBase_html"><div class="ttname"><a href="classBUException_1_1exBase.html">BUException::exBase</a></div><div class="ttdef"><b>Definition</b> <a href="ExceptionBase_8hh_source.html#l00047">ExceptionBase.hh:47</a></div></div>
<div class="ttc" id="aclassBUException_1_1exBase_html_a3b4525fca7085dc41e2d815915dbc44a"><div class="ttname"><a href="classBUException_1_1exBase.html#a3b4525fca7085dc41e2d815915dbc44a">BUException::exBase::Append</a></div><div class="ttdeci">void Append(const char *buffer)</div><div class="ttdef"><b>Definition</b> <a href="ExceptionBase_8cpp_source.html#l00094">ExceptionBase.cpp:94</a></div></div>
<div class="ttc" id="aclassWIB_html_a5cce03773aaf423c8a848517ddd43e6c"><div class="ttname"><a href="classWIB.html#a5cce03773aaf423c8a848517ddd43e6c">WIB::SetDTS_SI5344Page</a></div><div class="ttdeci">void SetDTS_SI5344Page(uint8_t page)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5344_8cpp_source.html#l00022">WIB_SI5344.cpp:22</a></div></div>
<div class="ttc" id="aclassWIB_html_a6df6b4ae89ccb9670b7b6b63c0936107"><div class="ttname"><a href="classWIB.html#a6df6b4ae89ccb9670b7b6b63c0936107">WIB::WriteDTS_SI5344</a></div><div class="ttdeci">void WriteDTS_SI5344(uint16_t address, uint32_t value, uint8_t byte_count=4)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5344_8cpp_source.html#l00008">WIB_SI5344.cpp:8</a></div></div>
<div class="ttc" id="aclassWIB_html_aafb7beccff730f2cd3641ae63f34dedf"><div class="ttname"><a href="classWIB.html#aafb7beccff730f2cd3641ae63f34dedf">WIB::ConfigureDTSCDS</a></div><div class="ttdeci">float ConfigureDTSCDS(uint8_t source=0)</div><div class="ttdef"><b>Definition</b> <a href="WIB__CDS_8cpp_source.html#l00024">WIB_CDS.cpp:24</a></div></div>
<div class="ttc" id="akafka__opmon__consumer_8cxx_html_abea48909f8fcf1a40fe240b2efb25339"><div class="ttname"><a href="kafka__opmon__consumer_8cxx.html#abea48909f8fcf1a40fe240b2efb25339">now</a></div><div class="ttdeci">static int64_t now()</div><div class="ttdef"><b>Definition</b> <a href="kafka__opmon__consumer_8cxx_source.html#l00044">kafka_opmon_consumer.cxx:44</a></div></div>
<div class="ttc" id="anamespacedunedaq_html_a8ef9f13ca70b219d8e83fa1b32a1b2ca"><div class="ttname"><a href="namespacedunedaq.html#a8ef9f13ca70b219d8e83fa1b32a1b2ca">dunedaq::start_time</a></div><div class="ttdeci">Cannot add TPSet with start_time</div><div class="ttdef"><b>Definition</b> <a href="TPBundleHandler_8hpp_source.html#l00040">TPBundleHandler.hpp:40</a></div></div>
<div class="ttc" id="anamespaceers_html_a2123c7b55b0ce7e62bd36965ad324697"><div class="ttname"><a href="namespaceers.html#a2123c7b55b0ce7e62bd36965ad324697">ers::info</a></div><div class="ttdeci">void info(const Issue &amp;issue)</div><div class="ttdef"><b>Definition</b> <a href="ers_8hpp_source.html#l00095">ers.hpp:95</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae01a686dac406f779e8e8ff084b28f29" name="ae01a686dac406f779e8e8ff084b28f29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae01a686dac406f779e8e8ff084b28f29">&#9670;&#160;</a></span>InitializeWIB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::InitializeWIB </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00130">130</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  130</span>                       {</div>
<div class="line"><span class="lineno">  131</span>  <span class="comment">//run resets</span></div>
<div class="line"><span class="lineno">  132</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.RESET&quot;</span>,0xFF);  </div>
<div class="line"><span class="lineno">  133</span>  <span class="comment">//Set clock settings</span></div>
<div class="line"><span class="lineno">  134</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;POWER.ENABLE.MASTER_BIAS&quot;</span>,0x1);<span class="comment">//Turn on DC/DC converter</span></div>
<div class="line"><span class="lineno">  135</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="add4c1712e34c6352782f2c8af427fe61" name="add4c1712e34c6352782f2c8af427fe61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add4c1712e34c6352782f2c8af427fe61">&#9670;&#160;</a></span>LoadConfigDAQ_SI5342()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::LoadConfigDAQ_SI5342 </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>fileName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5342_8cpp_source.html#l00034">34</a> of file <a class="el" href="WIB__SI5342_8cpp_source.html">WIB_SI5342.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>                                                        {</div>
<div class="line"><span class="lineno">   35</span>  std::ifstream confFile(fileName.c_str());</div>
<div class="line"><span class="lineno">   36</span>  BUException::WIB_BAD_ARGS badFile;</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>  <span class="keywordflow">if</span>(confFile.fail()){</div>
<div class="line"><span class="lineno">   39</span>    <span class="comment">//Failed to topen filename, add it to the exception</span></div>
<div class="line"><span class="lineno">   40</span>    badFile.Append(<span class="stringliteral">&quot;Bad SI5342 config file name:&quot;</span>);</div>
<div class="line"><span class="lineno">   41</span>    badFile.Append(fileName.c_str());</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>    <span class="comment">//Try the default</span></div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">if</span>(getenv(<span class="stringliteral">&quot;WIBMOD_SHARE&quot;</span>) != NULL){      </div>
<div class="line"><span class="lineno">   45</span>      std::string envBasedFileName=getenv(<span class="stringliteral">&quot;WIBMOD_SHARE&quot;</span>);</div>
<div class="line"><span class="lineno">   46</span>      envBasedFileName+=<span class="stringliteral">&quot;/config/WIB1/config/&quot;</span>;</div>
<div class="line"><span class="lineno">   47</span>      envBasedFileName+=<a class="code hl_define" href="WIB__SI5342_8cpp.html#a85278a77c5513980de3520700cf85e18">SI5342_CONFIG_FILENAME</a>;</div>
<div class="line"><span class="lineno">   48</span>      confFile.open(envBasedFileName.c_str());</div>
<div class="line"><span class="lineno">   49</span>      <span class="keywordflow">if</span>(confFile.fail()){</div>
<div class="line"><span class="lineno">   50</span>    badFile.Append(<span class="stringliteral">&quot;Bad env based filename:&quot;</span>);</div>
<div class="line"><span class="lineno">   51</span>    badFile.Append(envBasedFileName.c_str());</div>
<div class="line"><span class="lineno">   52</span>      }</div>
<div class="line"><span class="lineno">   53</span>    }</div>
<div class="line"><span class="lineno">   54</span>  }</div>
<div class="line"><span class="lineno">   55</span>  </div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordflow">if</span>(confFile.fail()){</div>
<div class="line"><span class="lineno">   57</span>    <span class="comment">//We are still failing to open our file</span></div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">throw</span> badFile;</div>
<div class="line"><span class="lineno">   59</span>  }</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>  <span class="comment">//Make sure the chip isn&#39;t in reset</span></div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DAQ.SI5342.RESET&quot;</span>) != 0){</div>
<div class="line"><span class="lineno">   63</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.RESET&quot;</span>,0x0);</div>
<div class="line"><span class="lineno">   64</span>    usleep(50000);</div>
<div class="line"><span class="lineno">   65</span>  }</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>  <span class="comment">//Reset the I2C firmware</span></div>
<div class="line"><span class="lineno">   68</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>  std::vector&lt;std::pair&lt;uint16_t,uint8_t&gt; &gt; writes;</div>
<div class="line"><span class="lineno">   71</span>  <span class="keywordflow">while</span>(!confFile.eof()){</div>
<div class="line"><span class="lineno">   72</span>    std::string line;</div>
<div class="line"><span class="lineno">   73</span>    std::getline(confFile,line);</div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">if</span>(line.size() == 0){</div>
<div class="line"><span class="lineno">   75</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   76</span>    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(line[0] == <span class="charliteral">&#39;#&#39;</span>){</div>
<div class="line"><span class="lineno">   77</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   78</span>    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(line[0] == <span class="charliteral">&#39;A&#39;</span>){</div>
<div class="line"><span class="lineno">   79</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   80</span>    }<span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   81</span>      <span class="keywordflow">if</span>( line.find(<span class="charliteral">&#39;,&#39;</span>) == std::string::npos ){</div>
<div class="line"><span class="lineno">   82</span>    printf(<span class="stringliteral">&quot;Skipping bad line: \&quot;%s\&quot;\n&quot;</span>,line.c_str());</div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   84</span>      }</div>
<div class="line"><span class="lineno">   85</span>      uint16_t address = strtoul(line.substr(0,line.find(<span class="charliteral">&#39;,&#39;</span>)).c_str(),NULL,16);</div>
<div class="line"><span class="lineno">   86</span>      uint8_t  <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a>    = strtoul(line.substr(line.find(<span class="charliteral">&#39;,&#39;</span>)+1).c_str(),NULL,16);</div>
<div class="line"><span class="lineno">   87</span>      writes.push_back(std::pair&lt;uint16_t,uint8_t&gt;(address,data));</div>
<div class="line"><span class="lineno">   88</span>    }</div>
<div class="line"><span class="lineno">   89</span>  }</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>  <span class="comment">//Disable the SI5342 output</span></div>
<div class="line"><span class="lineno">   92</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.ENABLE&quot;</span>,0x0);</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>  uint8_t page = <a class="code hl_function" href="classWIB.html#a75ebb93b76159089ab6ce867458d9364">GetDAQ_SI5342Page</a>();</div>
<div class="line"><span class="lineno">   95</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> percentDone = 0;</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>  printf(<span class="stringliteral">&quot;\n[==================================================]\n&quot;</span>);</div>
<div class="line"><span class="lineno">   99</span>  fprintf(stderr,<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><span class="lineno">  100</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iWrite = 0; iWrite &lt; writes.size();iWrite++){</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">if</span>(page != <a class="code hl_function" href="classWIB.html#aa8d774d449d7a7bb5b0fb8a521f14156">GetDAQ_SI5342AddressPage</a>(writes[iWrite].first)){</div>
<div class="line"><span class="lineno">  103</span>      page = <a class="code hl_function" href="classWIB.html#aa8d774d449d7a7bb5b0fb8a521f14156">GetDAQ_SI5342AddressPage</a>(writes[iWrite].first);</div>
<div class="line"><span class="lineno">  104</span>      <a class="code hl_function" href="classWIB.html#ae7ae9769f449879233a1ae67af88fb17">SetDAQ_SI5342Page</a>(page);</div>
<div class="line"><span class="lineno">  105</span>      usleep(100000);</div>
<div class="line"><span class="lineno">  106</span>    }</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    </div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordflow">if</span>(iWrite == 3){</div>
<div class="line"><span class="lineno">  110</span>      usleep(300000);</div>
<div class="line"><span class="lineno">  111</span>    }</div>
<div class="line"><span class="lineno">  112</span>    </div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    uint8_t  address = writes[iWrite].first &amp; 0xFF;</div>
<div class="line"><span class="lineno">  115</span>    uint32_t <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> = (writes[iWrite].second) &amp; 0xFF;</div>
<div class="line"><span class="lineno">  116</span>    uint8_t  iData = 1;</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iTries = 10; iTries &gt; 0;iTries--){</div>
<div class="line"><span class="lineno">  119</span>      <span class="keywordflow">try</span>{</div>
<div class="line"><span class="lineno">  120</span>    <a class="code hl_function" href="classWIB.html#aaa72da71627de98385e0c973636b4f26">WriteDAQ_SI5342</a>(address ,data,iData);</div>
<div class="line"><span class="lineno">  121</span>      }<span class="keywordflow">catch</span> (BUException::WIB_ERROR &amp; e){  </div>
<div class="line"><span class="lineno">  122</span>    <span class="comment">//Reset the I2C firmware</span></div>
<div class="line"><span class="lineno">  123</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">if</span>(iTries == 1){</div>
<div class="line"><span class="lineno">  125</span>      e.Append(<span class="stringliteral">&quot;\nTried 3 times\n&quot;</span>);</div>
<div class="line"><span class="lineno">  126</span>      <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  127</span>    }</div>
<div class="line"><span class="lineno">  128</span>      }</div>
<div class="line"><span class="lineno">  129</span>    }</div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordflow">if</span>((100*iWrite)/writes.size() &gt; percentDone){</div>
<div class="line"><span class="lineno">  131</span>      fprintf(stderr,<span class="stringliteral">&quot;#&quot;</span>);</div>
<div class="line"><span class="lineno">  132</span>      percentDone+=2;</div>
<div class="line"><span class="lineno">  133</span>    }</div>
<div class="line"><span class="lineno">  134</span>  }</div>
<div class="line"><span class="lineno">  135</span>  printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>}</div>
<div class="ttc" id="aWIB__SI5342_8cpp_html_a85278a77c5513980de3520700cf85e18"><div class="ttname"><a href="WIB__SI5342_8cpp.html#a85278a77c5513980de3520700cf85e18">SI5342_CONFIG_FILENAME</a></div><div class="ttdeci">#define SI5342_CONFIG_FILENAME</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5342_8cpp_source.html#l00006">WIB_SI5342.cpp:6</a></div></div>
<div class="ttc" id="aclassWIB_html_a75ebb93b76159089ab6ce867458d9364"><div class="ttname"><a href="classWIB.html#a75ebb93b76159089ab6ce867458d9364">WIB::GetDAQ_SI5342Page</a></div><div class="ttdeci">uint8_t GetDAQ_SI5342Page()</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5342_8cpp_source.html#l00026">WIB_SI5342.cpp:26</a></div></div>
<div class="ttc" id="aclassWIB_html_aa8d774d449d7a7bb5b0fb8a521f14156"><div class="ttname"><a href="classWIB.html#aa8d774d449d7a7bb5b0fb8a521f14156">WIB::GetDAQ_SI5342AddressPage</a></div><div class="ttdeci">uint8_t GetDAQ_SI5342AddressPage(uint16_t address)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5342_8cpp_source.html#l00030">WIB_SI5342.cpp:30</a></div></div>
<div class="ttc" id="aclassWIB_html_aaa72da71627de98385e0c973636b4f26"><div class="ttname"><a href="classWIB.html#aaa72da71627de98385e0c973636b4f26">WIB::WriteDAQ_SI5342</a></div><div class="ttdeci">void WriteDAQ_SI5342(uint16_t address, uint32_t value, uint8_t byte_count=4)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5342_8cpp_source.html#l00008">WIB_SI5342.cpp:8</a></div></div>
<div class="ttc" id="aclassWIB_html_ae7ae9769f449879233a1ae67af88fb17"><div class="ttname"><a href="classWIB.html#ae7ae9769f449879233a1ae67af88fb17">WIB::SetDAQ_SI5342Page</a></div><div class="ttdeci">void SetDAQ_SI5342Page(uint8_t page)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5342_8cpp_source.html#l00022">WIB_SI5342.cpp:22</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2846252140d13dbf862b4351aa0b0500" name="a2846252140d13dbf862b4351aa0b0500"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2846252140d13dbf862b4351aa0b0500">&#9670;&#160;</a></span>LoadConfigDTS_SI5344()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::LoadConfigDTS_SI5344 </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>fileName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5344_8cpp_source.html#l00034">34</a> of file <a class="el" href="WIB__SI5344_8cpp_source.html">WIB_SI5344.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>                                                        {</div>
<div class="line"><span class="lineno">   35</span>  std::ifstream confFile(fileName.c_str());</div>
<div class="line"><span class="lineno">   36</span>  BUException::WIB_BAD_ARGS badFile;</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>  <span class="keywordflow">if</span>(confFile.fail()){</div>
<div class="line"><span class="lineno">   39</span>    <span class="comment">//Failed to topen filename, add it to the exception</span></div>
<div class="line"><span class="lineno">   40</span>    badFile.Append(<span class="stringliteral">&quot;Bad SI5344 config file name:&quot;</span>);</div>
<div class="line"><span class="lineno">   41</span>    badFile.Append(fileName.c_str());</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>    <span class="comment">//Try the default</span></div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">if</span>(getenv(<span class="stringliteral">&quot;WIBMOD_SHARE&quot;</span>) != NULL){      </div>
<div class="line"><span class="lineno">   45</span>      std::string envBasedFileName=getenv(<span class="stringliteral">&quot;WIBMOD_SHARE&quot;</span>);</div>
<div class="line"><span class="lineno">   46</span>      envBasedFileName+=<span class="stringliteral">&quot;/config/WIB1/config/&quot;</span>;</div>
<div class="line"><span class="lineno">   47</span>      envBasedFileName+=<a class="code hl_define" href="WIB__SI5344_8cpp.html#afe818d1cb962e4328e488b18a0dde2df">SI5344_CONFIG_FILENAME</a>;</div>
<div class="line"><span class="lineno">   48</span>      confFile.open(envBasedFileName.c_str());</div>
<div class="line"><span class="lineno">   49</span>      <span class="keywordflow">if</span>(confFile.fail()){</div>
<div class="line"><span class="lineno">   50</span>    badFile.Append(<span class="stringliteral">&quot;Bad env based filename:&quot;</span>);</div>
<div class="line"><span class="lineno">   51</span>    badFile.Append(envBasedFileName.c_str());</div>
<div class="line"><span class="lineno">   52</span>      }</div>
<div class="line"><span class="lineno">   53</span>    }</div>
<div class="line"><span class="lineno">   54</span>  }</div>
<div class="line"><span class="lineno">   55</span>  </div>
<div class="line"><span class="lineno">   56</span>  <span class="keywordflow">if</span>(confFile.fail()){</div>
<div class="line"><span class="lineno">   57</span>    <span class="comment">//We are still failing to open our file</span></div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">throw</span> badFile;</div>
<div class="line"><span class="lineno">   59</span>  }</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>  <span class="comment">//Make sure the chip isn&#39;t in reset</span></div>
<div class="line"><span class="lineno">   62</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.SI5344.RESET&quot;</span>) != 0){</div>
<div class="line"><span class="lineno">   63</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.RESET&quot;</span>,0x0);</div>
<div class="line"><span class="lineno">   64</span>    usleep(50000);</div>
<div class="line"><span class="lineno">   65</span>  }</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>  <span class="comment">//Reset the I2C firmware</span></div>
<div class="line"><span class="lineno">   68</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>  std::vector&lt;std::pair&lt;uint16_t,uint8_t&gt; &gt; writes;</div>
<div class="line"><span class="lineno">   71</span>  <span class="keywordflow">while</span>(!confFile.eof()){</div>
<div class="line"><span class="lineno">   72</span>    std::string line;</div>
<div class="line"><span class="lineno">   73</span>    std::getline(confFile,line);</div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">if</span>(line.size() == 0){</div>
<div class="line"><span class="lineno">   75</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   76</span>    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(line[0] == <span class="charliteral">&#39;#&#39;</span>){</div>
<div class="line"><span class="lineno">   77</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   78</span>    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(line[0] == <span class="charliteral">&#39;A&#39;</span>){</div>
<div class="line"><span class="lineno">   79</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   80</span>    }<span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   81</span>      <span class="keywordflow">if</span>( line.find(<span class="charliteral">&#39;,&#39;</span>) == std::string::npos ){</div>
<div class="line"><span class="lineno">   82</span>    printf(<span class="stringliteral">&quot;Skipping bad line: \&quot;%s\&quot;\n&quot;</span>,line.c_str());</div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   84</span>      }</div>
<div class="line"><span class="lineno">   85</span>      uint16_t address = strtoul(line.substr(0,line.find(<span class="charliteral">&#39;,&#39;</span>)).c_str(),NULL,16);</div>
<div class="line"><span class="lineno">   86</span>      uint8_t  <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a>    = strtoul(line.substr(line.find(<span class="charliteral">&#39;,&#39;</span>)+1).c_str(),NULL,16);</div>
<div class="line"><span class="lineno">   87</span>      writes.push_back(std::pair&lt;uint16_t,uint8_t&gt;(address,data));</div>
<div class="line"><span class="lineno">   88</span>    }</div>
<div class="line"><span class="lineno">   89</span>  }</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>  <span class="comment">//Disable the SI5344 output</span></div>
<div class="line"><span class="lineno">   92</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.ENABLE&quot;</span>,0x0);</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>  uint8_t page = <a class="code hl_function" href="classWIB.html#a519a38027b8d179e87067f46c70d29e0">GetDTS_SI5344Page</a>();</div>
<div class="line"><span class="lineno">   95</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> percentDone = 0;</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>  printf(<span class="stringliteral">&quot;\n[==================================================]\n&quot;</span>);</div>
<div class="line"><span class="lineno">   99</span>  fprintf(stderr,<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><span class="lineno">  100</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iWrite = 0; iWrite &lt; writes.size();iWrite++){</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">if</span>(page != <a class="code hl_function" href="classWIB.html#a2ed18b639f8176630a6f3cbc46cd85f7">GetDTS_SI5344AddressPage</a>(writes[iWrite].first)){</div>
<div class="line"><span class="lineno">  103</span>      page = <a class="code hl_function" href="classWIB.html#a2ed18b639f8176630a6f3cbc46cd85f7">GetDTS_SI5344AddressPage</a>(writes[iWrite].first);</div>
<div class="line"><span class="lineno">  104</span>      <a class="code hl_function" href="classWIB.html#a5cce03773aaf423c8a848517ddd43e6c">SetDTS_SI5344Page</a>(page);</div>
<div class="line"><span class="lineno">  105</span>      usleep(100000);</div>
<div class="line"><span class="lineno">  106</span>    }</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    </div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordflow">if</span>(iWrite == 3){</div>
<div class="line"><span class="lineno">  110</span>      usleep(300000);</div>
<div class="line"><span class="lineno">  111</span>    }</div>
<div class="line"><span class="lineno">  112</span>    </div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    uint8_t  address = writes[iWrite].first &amp; 0xFF;</div>
<div class="line"><span class="lineno">  115</span>    uint32_t <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> = (writes[iWrite].second) &amp; 0xFF;</div>
<div class="line"><span class="lineno">  116</span>    uint8_t  iData = 1;</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iTries = 10; iTries &gt; 0;iTries--){</div>
<div class="line"><span class="lineno">  119</span>      <span class="keywordflow">try</span>{</div>
<div class="line"><span class="lineno">  120</span>    <a class="code hl_function" href="classWIB.html#a6df6b4ae89ccb9670b7b6b63c0936107">WriteDTS_SI5344</a>(address ,data,iData);</div>
<div class="line"><span class="lineno">  121</span>      }<span class="keywordflow">catch</span> (BUException::WIB_ERROR &amp; e){  </div>
<div class="line"><span class="lineno">  122</span>    <span class="comment">//Reset the I2C firmware</span></div>
<div class="line"><span class="lineno">  123</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.I2C.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">if</span>(iTries == 1){</div>
<div class="line"><span class="lineno">  125</span>      e.Append(<span class="stringliteral">&quot;\nTried 10 times\n&quot;</span>);</div>
<div class="line"><span class="lineno">  126</span>      <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  127</span>    }</div>
<div class="line"><span class="lineno">  128</span>      }</div>
<div class="line"><span class="lineno">  129</span>    }</div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordflow">if</span>((100*iWrite)/writes.size() &gt; percentDone){</div>
<div class="line"><span class="lineno">  131</span>      fprintf(stderr,<span class="stringliteral">&quot;#&quot;</span>);</div>
<div class="line"><span class="lineno">  132</span>      percentDone+=2;</div>
<div class="line"><span class="lineno">  133</span>    }</div>
<div class="line"><span class="lineno">  134</span>  }</div>
<div class="line"><span class="lineno">  135</span>  printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  136</span>}</div>
<div class="ttc" id="aWIB__SI5344_8cpp_html_afe818d1cb962e4328e488b18a0dde2df"><div class="ttname"><a href="WIB__SI5344_8cpp.html#afe818d1cb962e4328e488b18a0dde2df">SI5344_CONFIG_FILENAME</a></div><div class="ttdeci">#define SI5344_CONFIG_FILENAME</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5344_8cpp_source.html#l00006">WIB_SI5344.cpp:6</a></div></div>
<div class="ttc" id="aclassWIB_html_a2ed18b639f8176630a6f3cbc46cd85f7"><div class="ttname"><a href="classWIB.html#a2ed18b639f8176630a6f3cbc46cd85f7">WIB::GetDTS_SI5344AddressPage</a></div><div class="ttdeci">uint8_t GetDTS_SI5344AddressPage(uint16_t address)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5344_8cpp_source.html#l00030">WIB_SI5344.cpp:30</a></div></div>
<div class="ttc" id="aclassWIB_html_a519a38027b8d179e87067f46c70d29e0"><div class="ttname"><a href="classWIB.html#a519a38027b8d179e87067f46c70d29e0">WIB::GetDTS_SI5344Page</a></div><div class="ttdeci">uint8_t GetDTS_SI5344Page()</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5344_8cpp_source.html#l00026">WIB_SI5344.cpp:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa3a2bc03e98cd58616fb4b8b64d919d" name="aaa3a2bc03e98cd58616fb4b8b64d919d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa3a2bc03e98cd58616fb4b8b64d919d">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classWIB.html">WIB</a> &amp; WIB::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classWIB.html">WIB</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab1f1c77f6e9421a3de1c09af48ab7854" name="ab1f1c77f6e9421a3de1c09af48ab7854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1f1c77f6e9421a3de1c09af48ab7854">&#9670;&#160;</a></span>PDTSInRunningState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::PDTSInRunningState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__DTS_8cpp_source.html#l00169">169</a> of file <a class="el" href="WIB__DTS_8cpp_source.html">WIB_DTS.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  169</span>                            {</div>
<div class="line"><span class="lineno">  170</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;DTS.PDTS_STATE&quot;</span>) != 0x8){</div>
<div class="line"><span class="lineno">  171</span>    BUException::WIB_DTS_ERROR e;</div>
<div class="line"><span class="lineno">  172</span>    e.Append(<span class="stringliteral">&quot;WIB is not in PDTS state RUN(0x8)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  174</span>  }</div>
<div class="line"><span class="lineno">  175</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acee46dcd9a9ed15bf10d21fa8ce42072" name="acee46dcd9a9ed15bf10d21fa8ce42072"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acee46dcd9a9ed15bf10d21fa8ce42072">&#9670;&#160;</a></span>ProgramFlash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ProgramFlash </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>update_percentage</em> = <code>101</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__Flash_8cpp_source.html#l00209">209</a> of file <a class="el" href="WIB__Flash_8cpp_source.html">WIB_Flash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  209</span>                                                                          {</div>
<div class="line"><span class="lineno">  210</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,1);</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>  <span class="keywordtype">bool</span> print_updates = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  213</span>  <span class="keywordflow">if</span>(update_percentage &lt; 100){</div>
<div class="line"><span class="lineno">  214</span>    print_updates = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  215</span>  }</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>  <span class="comment">//Load data and validate</span></div>
<div class="line"><span class="lineno">  218</span>  <span class="keywordflow">if</span>(print_updates){</div>
<div class="line"><span class="lineno">  219</span>    fprintf(stderr,<span class="stringliteral">&quot;   Reading file: %s\n&quot;</span>,fileName.c_str());</div>
<div class="line"><span class="lineno">  220</span>  }</div>
<div class="line"><span class="lineno">  221</span>  <span class="comment">//  std::vector&lt;uint32_t&gt; flashData = firmwareFromDumpFile(fileName);</span></div>
<div class="line"><span class="lineno">  222</span>  std::vector&lt;uint32_t&gt; flashData = <a class="code hl_function" href="WIB__Flash_8cpp.html#aee07777619dddedae962d4dcb3d0dce5">firmwareFromIntelHexFile</a>(fileName);</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>  <span class="comment">//erase flash  </span></div>
<div class="line"><span class="lineno">  225</span>  <a class="code hl_function" href="classWIB.html#a12b7859296c5e2dbd9bf626a72fa76a4">EraseFlash</a>(print_updates);</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>  <span class="comment">//Load data into flash.</span></div>
<div class="line"><span class="lineno">  228</span>  <a class="code hl_function" href="classWIB.html#a587c9cb78f457531bfd0d79c30e5a03c">WriteFlash</a>(flashData,update_percentage);</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>  <span class="comment">//Validate flash</span></div>
<div class="line"><span class="lineno">  232</span>  <a class="code hl_function" href="classWIB.html#aeb500282eee287d96eb543cb097c50ce">CheckFlash</a>(flashData,update_percentage);</div>
<div class="line"><span class="lineno">  233</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,0);</div>
<div class="line"><span class="lineno">  234</span>}</div>
<div class="ttc" id="aWIB__Flash_8cpp_html_aee07777619dddedae962d4dcb3d0dce5"><div class="ttname"><a href="WIB__Flash_8cpp.html#aee07777619dddedae962d4dcb3d0dce5">firmwareFromIntelHexFile</a></div><div class="ttdeci">static std::vector&lt; uint32_t &gt; firmwareFromIntelHexFile(std::string const &amp;iHexFileName)</div><div class="ttdef"><b>Definition</b> <a href="WIB__Flash_8cpp_source.html#l00093">WIB_Flash.cpp:93</a></div></div>
<div class="ttc" id="aclassWIB_html_a12b7859296c5e2dbd9bf626a72fa76a4"><div class="ttname"><a href="classWIB.html#a12b7859296c5e2dbd9bf626a72fa76a4">WIB::EraseFlash</a></div><div class="ttdeci">void EraseFlash(bool print_updates=false)</div><div class="ttdef"><b>Definition</b> <a href="WIB__Flash_8cpp_source.html#l00190">WIB_Flash.cpp:190</a></div></div>
<div class="ttc" id="aclassWIB_html_a587c9cb78f457531bfd0d79c30e5a03c"><div class="ttname"><a href="classWIB.html#a587c9cb78f457531bfd0d79c30e5a03c">WIB::WriteFlash</a></div><div class="ttdeci">void WriteFlash(std::vector&lt; uint32_t &gt; data, uint8_t update_percentage=101)</div><div class="ttdef"><b>Definition</b> <a href="WIB__Flash_8cpp_source.html#l00236">WIB_Flash.cpp:236</a></div></div>
<div class="ttc" id="aclassWIB_html_aeb500282eee287d96eb543cb097c50ce"><div class="ttname"><a href="classWIB.html#aeb500282eee287d96eb543cb097c50ce">WIB::CheckFlash</a></div><div class="ttdeci">void CheckFlash(std::vector&lt; uint32_t &gt; data, uint8_t update_percentage=101)</div><div class="ttdef"><b>Definition</b> <a href="WIB__Flash_8cpp_source.html#l00294">WIB_Flash.cpp:294</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e4bc04399c3670edc71b4bd96032552" name="a0e4bc04399c3670edc71b4bd96032552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e4bc04399c3670edc71b4bd96032552">&#9670;&#160;</a></span>ReadDAQ_SI5342()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t WIB::ReadDAQ_SI5342 </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte_count</em> = <code>4</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5342_8cpp_source.html#l00011">11</a> of file <a class="el" href="WIB__SI5342_8cpp_source.html">WIB_SI5342.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   11</span>                                                               {</div>
<div class="line"><span class="lineno">   12</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classWIBBase.html#ad5878023661817ee83b873db2470e456">ReadI2C</a>(<span class="stringliteral">&quot;DAQ.SI5342.I2C&quot;</span>,address,byte_count);</div>
<div class="line"><span class="lineno">   13</span>}</div>
<div class="ttc" id="aclassWIBBase_html_ad5878023661817ee83b873db2470e456"><div class="ttname"><a href="classWIBBase.html#ad5878023661817ee83b873db2470e456">WIBBase::ReadI2C</a></div><div class="ttdeci">uint32_t ReadI2C(std::string const &amp;base_address, uint16_t I2C_aaddress, uint8_t byte_count=4)</div><div class="ttdef"><b>Definition</b> <a href="WIBBase_8cpp_source.html#l00039">WIBBase.cpp:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4aca3179b372f39e7d8a052172e047e" name="af4aca3179b372f39e7d8a052172e047e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4aca3179b372f39e7d8a052172e047e">&#9670;&#160;</a></span>ReadDAQLinkSpyBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structdata__8b10b__t.html">data_8b10b_t</a> &gt; WIB::ReadDAQLinkSpyBuffer </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iDAQLink</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>trigger_mode</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__spybuffer_8cpp_source.html#l00020">20</a> of file <a class="el" href="WIB__spybuffer_8cpp_source.html">WIB_spybuffer.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   20</span>                                                                                      {</div>
<div class="line"><span class="lineno">   21</span>  <span class="comment">//TODO read DAQ link count</span></div>
<div class="line"><span class="lineno">   22</span>  std::string base(<span class="stringliteral">&quot;DAQ_LINK_&quot;</span>);</div>
<div class="line"><span class="lineno">   23</span>  base.push_back(<a class="code hl_function" href="classWIB.html#a6b99751c2d5be04128f90ecf28e6db2e">GetDAQLinkChar</a>(iDAQLink));</div>
<div class="line"><span class="lineno">   24</span>  base.append(<span class="stringliteral">&quot;.SPY_BUFFER.&quot;</span>);</div>
<div class="line"><span class="lineno">   25</span> </div>
<div class="line"><span class="lineno">   26</span>  <span class="comment">//Check if there is an active capture</span></div>
<div class="line"><span class="lineno">   27</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(base+<span class="stringliteral">&quot;CAPTURING_DATA&quot;</span>)){</div>
<div class="line"><span class="lineno">   28</span>    BUException::WIB_BUSY e;</div>
<div class="line"><span class="lineno">   29</span>    e.Append(base);</div>
<div class="line"><span class="lineno">   30</span>    e.Append(<span class="stringliteral">&quot; is busy\n&quot;</span>);</div>
<div class="line"><span class="lineno">   31</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">   32</span>  }</div>
<div class="line"><span class="lineno">   33</span>  <span class="comment">//The spy buffer isn&#39;t busy, so let&#39;s make sure the fifo is empty</span></div>
<div class="line"><span class="lineno">   34</span>  <span class="keywordflow">while</span>(!<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(base+<span class="stringliteral">&quot;EMPTY&quot;</span>)){</div>
<div class="line"><span class="lineno">   35</span>    <span class="comment">//Read out a workd from the fifo</span></div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(base+<span class="stringliteral">&quot;DATA&quot;</span>,0x0);</div>
<div class="line"><span class="lineno">   37</span>  }</div>
<div class="line"><span class="lineno">   38</span>  </div>
<div class="line"><span class="lineno">   39</span>  <span class="comment">//write trigger mode</span></div>
<div class="line"><span class="lineno">   40</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(base+<span class="stringliteral">&quot;TRIGGER_MODE&quot;</span>,trigger_mode &amp; 0x1);</div>
<div class="line"><span class="lineno">   41</span>  </div>
<div class="line"><span class="lineno">   42</span>  <span class="comment">//Start the capture</span></div>
<div class="line"><span class="lineno">   43</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(base+<span class="stringliteral">&quot;START&quot;</span>,0x1);</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>  <span class="comment">//Wait for capture to finish</span></div>
<div class="line"><span class="lineno">   46</span>  <span class="keywordflow">while</span>(<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(base+<span class="stringliteral">&quot;CAPTURING_DATA&quot;</span>)){</div>
<div class="line"><span class="lineno">   47</span>  }</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>  <span class="comment">//Read out the data</span></div>
<div class="line"><span class="lineno">   50</span>  std::vector&lt;data_8b10b_t&gt; <a class="code hl_variable" href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">ret</a>;</div>
<div class="line"><span class="lineno">   51</span>  </div>
<div class="line"><span class="lineno">   52</span>  <span class="keywordflow">while</span>(!<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(base+<span class="stringliteral">&quot;EMPTY&quot;</span>)){</div>
<div class="line"><span class="lineno">   53</span>    <span class="comment">//read out the k-chars</span></div>
<div class="line"><span class="lineno">   54</span>    uint32_t k_data = <a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(base+<span class="stringliteral">&quot;K_DATA&quot;</span>);</div>
<div class="line"><span class="lineno">   55</span>    <span class="comment">//read out the data</span></div>
<div class="line"><span class="lineno">   56</span>    uint32_t <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> = <a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(base+<span class="stringliteral">&quot;DATA&quot;</span>);</div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span>    <span class="comment">//    printf(&quot;0x%08X 0x%08X\n&quot;,k_data,data);</span></div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iWord = 0; iWord &lt; 4;iWord++){</div>
<div class="line"><span class="lineno">   61</span>      <a class="code hl_variable" href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">ret</a>.push_back( <a class="code hl_struct" href="structdata__8b10b__t.html">data_8b10b_t</a>((k_data&gt;&gt;iWord)&amp;0x1,</div>
<div class="line"><span class="lineno">   62</span>                  (data &gt;&gt;(iWord*8) &amp;0xFF)));</div>
<div class="line"><span class="lineno">   63</span>    }   </div>
<div class="line"><span class="lineno">   64</span>    <span class="comment">//mark word as read</span></div>
<div class="line"><span class="lineno">   65</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(base+<span class="stringliteral">&quot;DATA&quot;</span>,0x0);</div>
<div class="line"><span class="lineno">   66</span>  }</div>
<div class="line"><span class="lineno">   67</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecheckLinks.html#a54e97434ff6ffa7352831fbf2a93c0c3">ret</a>;</div>
<div class="line"><span class="lineno">   68</span>}</div>
<div class="ttc" id="astructdata__8b10b__t_html"><div class="ttname"><a href="structdata__8b10b__t.html">data_8b10b_t</a></div><div class="ttdef"><b>Definition</b> <a href="WIB_8hh_source.html#l00020">WIB.hh:20</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a99fd5ea65e2d224ec88550261ec66f0f" name="a99fd5ea65e2d224ec88550261ec66f0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99fd5ea65e2d224ec88550261ec66f0f">&#9670;&#160;</a></span>ReadDTS_CDS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t WIB::ReadDTS_CDS </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte_count</em> = <code>4</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__CDS_8cpp_source.html#l00020">20</a> of file <a class="el" href="WIB__CDS_8cpp_source.html">WIB_CDS.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   20</span>                                                            {</div>
<div class="line"><span class="lineno">   21</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classWIBBase.html#ad5878023661817ee83b873db2470e456">ReadI2C</a>(<span class="stringliteral">&quot;DTS.CDS.I2C&quot;</span>,address,byte_count);</div>
<div class="line"><span class="lineno">   22</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d398812aecd76fb691e9faee83dde0b" name="a1d398812aecd76fb691e9faee83dde0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d398812aecd76fb691e9faee83dde0b">&#9670;&#160;</a></span>ReadDTS_SI5344()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t WIB::ReadDTS_SI5344 </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte_count</em> = <code>4</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5344_8cpp_source.html#l00011">11</a> of file <a class="el" href="WIB__SI5344_8cpp_source.html">WIB_SI5344.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   11</span>                                                               {</div>
<div class="line"><span class="lineno">   12</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classWIBBase.html#ad5878023661817ee83b873db2470e456">ReadI2C</a>(<span class="stringliteral">&quot;DTS.SI5344.I2C&quot;</span>,address,byte_count);</div>
<div class="line"><span class="lineno">   13</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa18a368ce8cac8a49d2ad8cd3b1c165b" name="aa18a368ce8cac8a49d2ad8cd3b1c165b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa18a368ce8cac8a49d2ad8cd3b1c165b">&#9670;&#160;</a></span>ReadFlash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ReadFlash </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>update_percentage</em> = <code>101</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__Flash_8cpp_source.html#l00126">126</a> of file <a class="el" href="WIB__Flash_8cpp_source.html">WIB_Flash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  126</span>                                                                       {</div>
<div class="line"><span class="lineno">  127</span>  <span class="keywordtype">bool</span> print_updates = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  128</span>  <span class="keywordflow">if</span>(update_percentage &lt; 100){</div>
<div class="line"><span class="lineno">  129</span>    print_updates = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  130</span>  }</div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordtype">size_t</span> update_delta = (update_percentage * float(16*1024*1024/4))/100;</div>
<div class="line"><span class="lineno">  132</span>  <span class="keywordtype">size_t</span> next_update = update_delta;</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>  FILE * outFile = fopen(fileName.c_str(),<span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><span class="lineno">  135</span>  <span class="keywordflow">if</span>(outFile == NULL){</div>
<div class="line"><span class="lineno">  136</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  137</span>    e.Append(<span class="stringliteral">&quot;Failed to create: &quot;</span>);</div>
<div class="line"><span class="lineno">  138</span>    e.Append(fileName);</div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  140</span>  }</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>  <span class="keywordflow">if</span>(print_updates){</div>
<div class="line"><span class="lineno">  143</span>    fprintf(stderr,<span class="stringliteral">&quot;   Reading flash\n&quot;</span>);</div>
<div class="line"><span class="lineno">  144</span>    fprintf(stderr,<span class="stringliteral">&quot;   [&quot;</span>);</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; 100.0/update_percentage;i++){</div>
<div class="line"><span class="lineno">  146</span>      fprintf(stderr,<span class="stringliteral">&quot;=&quot;</span>);</div>
<div class="line"><span class="lineno">  147</span>    }</div>
<div class="line"><span class="lineno">  148</span>    fprintf(stderr,<span class="stringliteral">&quot;]\n   [&quot;</span>);</div>
<div class="line"><span class="lineno">  149</span>  }</div>
<div class="line"><span class="lineno">  150</span>  <span class="comment">//program flash in groups of 64 32bit words (256 bytes)</span></div>
<div class="line"><span class="lineno">  151</span>  uint32_t address = 0;</div>
<div class="line"><span class="lineno">  152</span>  </div>
<div class="line"><span class="lineno">  153</span>  uint32_t blockRegMapAddress = <a class="code hl_function" href="classWIBBase.html#a8b3111542e2b1288c7f587dc4e478623">GetItem</a>(<span class="stringliteral">&quot;FLASH.DATA00&quot;</span>)-&gt;<a class="code hl_variable" href="classItem.html#a69d28b5450c414860a31292bff6d1c80">address</a>;</div>
<div class="line"><span class="lineno">  154</span>  <span class="keywordtype">size_t</span> blockSize = 64;</div>
<div class="line"><span class="lineno">  155</span>  <span class="comment">//set block size</span></div>
<div class="line"><span class="lineno">  156</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.BYTE_COUNT&quot;</span>,255);</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iWord = 0; iWord &lt; 16*1024*1024/4;){</div>
<div class="line"><span class="lineno">  159</span>    <a class="code hl_function" href="classWIB.html#a9b3d05f77b55fb2750fcc45c1a19d295">FlashCheckBusy</a>();</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>    <span class="comment">//Set adddress</span></div>
<div class="line"><span class="lineno">  162</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.ADDRESS&quot;</span>,address);</div>
<div class="line"><span class="lineno">  163</span>    <span class="comment">//Start read</span></div>
<div class="line"><span class="lineno">  164</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.RUN_COMMAND&quot;</span>,0x5);</div>
<div class="line"><span class="lineno">  165</span>    </div>
<div class="line"><span class="lineno">  166</span>    <a class="code hl_function" href="classWIB.html#a9b3d05f77b55fb2750fcc45c1a19d295">FlashCheckBusy</a>();</div>
<div class="line"><span class="lineno">  167</span>    </div>
<div class="line"><span class="lineno">  168</span>    <span class="comment">//Readout the data</span></div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iWordRead = 0;iWordRead &lt; blockSize;iWordRead++){</div>
<div class="line"><span class="lineno">  170</span>      fprintf(outFile,<span class="stringliteral">&quot;0x%06X 0x%08X\n&quot;</span>,uint32_t(iWord),<a class="code hl_function" href="classWIBBase.html#a6fbde6f545c83fb7c514e7c29a8ae7db">ReadWithRetry</a>(blockRegMapAddress+iWordRead));</div>
<div class="line"><span class="lineno">  171</span>      iWord++;</div>
<div class="line"><span class="lineno">  172</span>    }</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>    <span class="comment">//    iWord+= blockSize;</span></div>
<div class="line"><span class="lineno">  175</span>    address+=blockSize*4;</div>
<div class="line"><span class="lineno">  176</span>    </div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span>(print_updates &amp;&amp; (iWord &gt; next_update)){</div>
<div class="line"><span class="lineno">  178</span>      <span class="comment">//      printf(&quot;   % 3f%% done\n&quot;,float(iWord)/float(flashData.size()));</span></div>
<div class="line"><span class="lineno">  179</span>      fprintf(stderr,<span class="stringliteral">&quot;=&quot;</span>);</div>
<div class="line"><span class="lineno">  180</span>      next_update += update_delta;</div>
<div class="line"><span class="lineno">  181</span>    }</div>
<div class="line"><span class="lineno">  182</span>  }</div>
<div class="line"><span class="lineno">  183</span>  <span class="keywordflow">if</span>(print_updates){</div>
<div class="line"><span class="lineno">  184</span>    printf(<span class="stringliteral">&quot;]\n&quot;</span>);</div>
<div class="line"><span class="lineno">  185</span>    printf(<span class="stringliteral">&quot;   done\n&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>  }</div>
<div class="line"><span class="lineno">  187</span>  fclose(outFile);</div>
<div class="line"><span class="lineno">  188</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b6bd613b0fd87797ece9f361e1537c7" name="a8b6bd613b0fd87797ece9f361e1537c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b6bd613b0fd87797ece9f361e1537c7">&#9670;&#160;</a></span>ReadLocalFlash() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t WIB::ReadLocalFlash </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__localFlash_8cpp_source.html#l00004">4</a> of file <a class="el" href="WIB__localFlash_8cpp_source.html">WIB_localFlash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    4</span>                                            {</div>
<div class="line"><span class="lineno">    5</span>  <span class="comment">//load the address</span></div>
<div class="line"><span class="lineno">    6</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.ADDRESS&quot;</span>,address);</div>
<div class="line"><span class="lineno">    7</span>  <span class="comment">//start the read transaction</span></div>
<div class="line"><span class="lineno">    8</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.RW&quot;</span>,1);</div>
<div class="line"><span class="lineno">    9</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.RUN&quot;</span>,1);</div>
<div class="line"><span class="lineno">   10</span> </div>
<div class="line"><span class="lineno">   11</span>  <span class="comment">//Wait for transaction to finish</span></div>
<div class="line"><span class="lineno">   12</span>  <span class="keywordflow">while</span>(<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.DONE&quot;</span>) == 0){</div>
<div class="line"><span class="lineno">   13</span>    printf(<span class="stringliteral">&quot;busy\n&quot;</span>);</div>
<div class="line"><span class="lineno">   14</span>    <span class="comment">//sleep for 1ms</span></div>
<div class="line"><span class="lineno">   15</span>    usleep(1000);</div>
<div class="line"><span class="lineno">   16</span>  }</div>
<div class="line"><span class="lineno">   17</span>  </div>
<div class="line"><span class="lineno">   18</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.RD_DATA&quot;</span>);</div>
<div class="line"><span class="lineno">   19</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="adb6cff8e45f3d91cc7951de7b2f188d6" name="adb6cff8e45f3d91cc7951de7b2f188d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb6cff8e45f3d91cc7951de7b2f188d6">&#9670;&#160;</a></span>ReadLocalFlash() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; uint32_t &gt; WIB::ReadLocalFlash </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__localFlash_8cpp_source.html#l00021">21</a> of file <a class="el" href="WIB__localFlash_8cpp_source.html">WIB_localFlash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   21</span>                                                                {</div>
<div class="line"><span class="lineno">   22</span>  std::vector&lt;uint32_t&gt; readData;</div>
<div class="line"><span class="lineno">   23</span>  <span class="keywordtype">size_t</span> current_address = address;</div>
<div class="line"><span class="lineno">   24</span>  <span class="keywordtype">size_t</span> end_address = current_address + <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#ae7ea8c6408e7cbc71f03f6cd522f211f">n</a>;</div>
<div class="line"><span class="lineno">   25</span>  <span class="keywordflow">for</span>(;current_address &lt; end_address;current_address++){</div>
<div class="line"><span class="lineno">   26</span>    readData.push_back(<a class="code hl_function" href="classWIB.html#a8b6bd613b0fd87797ece9f361e1537c7">ReadLocalFlash</a>(current_address));</div>
<div class="line"><span class="lineno">   27</span>  }</div>
<div class="line"><span class="lineno">   28</span>  <span class="keywordflow">return</span> readData;</div>
<div class="line"><span class="lineno">   29</span>}</div>
<div class="ttc" id="aclassWIB_html_a8b6bd613b0fd87797ece9f361e1537c7"><div class="ttname"><a href="classWIB.html#a8b6bd613b0fd87797ece9f361e1537c7">WIB::ReadLocalFlash</a></div><div class="ttdeci">uint32_t ReadLocalFlash(uint16_t address)</div><div class="ttdef"><b>Definition</b> <a href="WIB__localFlash_8cpp_source.html#l00004">WIB_localFlash.cpp:4</a></div></div>
<div class="ttc" id="anamespaceplot__trigprim__output__data_html_ae7ea8c6408e7cbc71f03f6cd522f211f"><div class="ttname"><a href="namespaceplot__trigprim__output__data.html#ae7ea8c6408e7cbc71f03f6cd522f211f">plot_trigprim_output_data.n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition</b> <a href="plot__trigprim__output__data_8py_source.html#l00016">plot_trigprim_output_data.py:16</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a52a39a327bc66b87c079b3b34db705f1" name="a52a39a327bc66b87c079b3b34db705f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52a39a327bc66b87c079b3b34db705f1">&#9670;&#160;</a></span>ReadOutCDLinkSpyBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structdata__8b10b__t.html">data_8b10b_t</a> &gt; WIB::ReadOutCDLinkSpyBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__spybuffer_8cpp_source.html#l00004">4</a> of file <a class="el" href="WIB__spybuffer_8cpp_source.html">WIB_spybuffer.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    4</span>                                                   {</div>
<div class="line"><span class="lineno">    5</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;FEMB_SPY.FIFO_EMPTY&quot;</span>)){</div>
<div class="line"><span class="lineno">    6</span>    BUException::WIB_ERROR e;</div>
<div class="line"><span class="lineno">    7</span>    e.Append(<span class="stringliteral">&quot;CD Spy fifo is empty!&quot;</span>);</div>
<div class="line"><span class="lineno">    8</span>    <span class="keywordflow">throw</span> e;      </div>
<div class="line"><span class="lineno">    9</span>  }</div>
<div class="line"><span class="lineno">   10</span>  </div>
<div class="line"><span class="lineno">   11</span>  std::vector&lt;data_8b10b_t&gt; <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a>;</div>
<div class="line"><span class="lineno">   12</span>  <span class="keywordflow">while</span>(!<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;FEMB_SPY.FIFO_EMPTY&quot;</span>)){</div>
<div class="line"><span class="lineno">   13</span>    uint32_t val = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;FEMB_SPY.DATA&quot;</span>);</div>
<div class="line"><span class="lineno">   14</span>    <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a>.push_back( <a class="code hl_struct" href="structdata__8b10b__t.html">data_8b10b_t</a>((val&gt;&gt;8)&amp;0x1,uint8_t(val&amp;0xff)));</div>
<div class="line"><span class="lineno">   15</span>  }</div>
<div class="line"><span class="lineno">   16</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a>;</div>
<div class="line"><span class="lineno">   17</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abadf4d23089016db4b9a340e8427069c" name="abadf4d23089016db4b9a340e8427069c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abadf4d23089016db4b9a340e8427069c">&#9670;&#160;</a></span>ReadQSFP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t WIB::ReadQSFP </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__QSFP_8cpp_source.html#l00010">10</a> of file <a class="el" href="WIB__QSFP_8cpp_source.html">WIB_QSFP.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   10</span>                                                         {</div>
<div class="line"><span class="lineno">   11</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classWIBBase.html#ad5878023661817ee83b873db2470e456">ReadI2C</a>(<span class="stringliteral">&quot;DAQ.QSFP.I2C&quot;</span>,address,byte_count);</div>
<div class="line"><span class="lineno">   12</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9813e18a6aa91528e0cd9df0a91eb86" name="ab9813e18a6aa91528e0cd9df0a91eb86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9813e18a6aa91528e0cd9df0a91eb86">&#9670;&#160;</a></span>ResetSi5342()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ResetSi5342 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5342_8cpp_source.html#l00016">16</a> of file <a class="el" href="WIB__SI5342_8cpp_source.html">WIB_SI5342.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span>                     {</div>
<div class="line"><span class="lineno">   17</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.RESET&quot;</span>,0x1);</div>
<div class="line"><span class="lineno">   18</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.RESET&quot;</span>,0x0);</div>
<div class="line"><span class="lineno">   19</span>  usleep(100000);</div>
<div class="line"><span class="lineno">   20</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abd76012e72b36c4f1d15028e53502868" name="abd76012e72b36c4f1d15028e53502868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd76012e72b36c4f1d15028e53502868">&#9670;&#160;</a></span>ResetSi5344()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ResetSi5344 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5344_8cpp_source.html#l00016">16</a> of file <a class="el" href="WIB__SI5344_8cpp_source.html">WIB_SI5344.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span>                     {</div>
<div class="line"><span class="lineno">   17</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.RESET&quot;</span>,0x1);</div>
<div class="line"><span class="lineno">   18</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.RESET&quot;</span>,0x0);</div>
<div class="line"><span class="lineno">   19</span>  usleep(100000);</div>
<div class="line"><span class="lineno">   20</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1df27e11950165c5f3ea714d88da5c4e" name="a1df27e11950165c5f3ea714d88da5c4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df27e11950165c5f3ea714d88da5c4e">&#9670;&#160;</a></span>ResetWIB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ResetWIB </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reset_udp</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00138">138</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span>                                {</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>  <span class="keywordflow">if</span>(reset_udp){</div>
<div class="line"><span class="lineno">  141</span>    <span class="comment">//Resetting the UDP will stop the reply packet which will cause an error. </span></div>
<div class="line"><span class="lineno">  142</span>    <span class="keywordflow">try</span>{</div>
<div class="line"><span class="lineno">  143</span>      <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.RESET.UDP_RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  144</span>    }<span class="keywordflow">catch</span>(BUException::BAD_REPLY &amp; e){</div>
<div class="line"><span class="lineno">  145</span>      <span class="comment">//do nothing</span></div>
<div class="line"><span class="lineno">  146</span>    }</div>
<div class="line"><span class="lineno">  147</span>    <span class="comment">//Since we don&#39;t know this happened since we lack a udp response, do it again.</span></div>
<div class="line"><span class="lineno">  148</span>    <span class="comment">//This could be extended to read register REG</span></div>
<div class="line"><span class="lineno">  149</span>    usleep(10000);</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">try</span>{</div>
<div class="line"><span class="lineno">  151</span>      <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.RESET.UDP_RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  152</span>    }<span class="keywordflow">catch</span>(BUException::BAD_REPLY &amp; e){</div>
<div class="line"><span class="lineno">  153</span>      <span class="comment">//do nothing</span></div>
<div class="line"><span class="lineno">  154</span>    }</div>
<div class="line"><span class="lineno">  155</span>    usleep(10000);</div>
<div class="line"><span class="lineno">  156</span>  }</div>
<div class="line"><span class="lineno">  157</span>  </div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>  <span class="comment">//Reset the control register</span></div>
<div class="line"><span class="lineno">  160</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;SYSTEM.RESET.CONTROL_REGISTER_RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  161</span>  usleep(1000);</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>  <span class="comment">//If this is felix, make sure we configure the SI5342</span></div>
<div class="line"><span class="lineno">  164</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>){</div>
<div class="line"><span class="lineno">  165</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  166</span>    usleep(10000);</div>
<div class="line"><span class="lineno">  167</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.RESET&quot;</span>,0);</div>
<div class="line"><span class="lineno">  168</span>    usleep(10000);</div>
<div class="line"><span class="lineno">  169</span>    printf(<span class="stringliteral">&quot;Configuring SI5342 for FELIX\n&quot;</span>);</div>
<div class="line"><span class="lineno">  170</span>    <a class="code hl_function" href="classWIB.html#add4c1712e34c6352782f2c8af427fe61">LoadConfigDAQ_SI5342</a>(<span class="stringliteral">&quot;default&quot;</span>); <span class="comment">//use the default config file for the SI5342</span></div>
<div class="line"><span class="lineno">  171</span>    usleep(10000);      <span class="comment">// Wait for </span></div>
<div class="line"><span class="lineno">  172</span>    <a class="code hl_function" href="classWIB.html#aa3f86d5520b898dd2b8fd365db180158">SelectSI5342</a>(1,     <span class="comment">// Set input to be local oscillator for FELIX clock</span></div>
<div class="line"><span class="lineno">  173</span>         1);    <span class="comment">// enable the output of the SI5342</span></div>
<div class="line"><span class="lineno">  174</span>  }</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>  <span class="comment">//Reset the Eventbuilder PLL</span></div>
<div class="line"><span class="lineno">  177</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.RESET.EB_PLL_RESET&quot;</span>,1);</div>
<div class="line"><span class="lineno">  178</span>  usleep(10000);</div>
<div class="line"><span class="lineno">  179</span>  </div>
<div class="line"><span class="lineno">  180</span>  <span class="comment">//Reset the DAQ path</span></div>
<div class="line"><span class="lineno">  181</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.RESET.DAQ_PATH_RESET&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>  usleep(10000);</div>
<div class="line"><span class="lineno">  184</span>  </div>
<div class="line"><span class="lineno">  185</span>  <span class="comment">//Set clock settings</span></div>
<div class="line"><span class="lineno">  186</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CMD_COUNT_RESET&quot;</span>, 0xFFFFFFFF);</div>
<div class="line"><span class="lineno">  187</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CMD_COUNT_RESET&quot;</span>, 0);</div>
<div class="line"><span class="lineno">  188</span>  </div>
<div class="line"><span class="lineno">  189</span>  <span class="comment">//Halt signals</span></div>
<div class="line"><span class="lineno">  190</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.HALT&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  191</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.ENABLE&quot;</span>, 0);</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>  <span class="comment">//Make sure DC/DC is on</span></div>
<div class="line"><span class="lineno">  194</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;POWER.ENABLE.MASTER_BIAS&quot;</span>,1);</div>
<div class="line"><span class="lineno">  195</span>}</div>
<div class="ttc" id="aclassWIB_html_aa3f86d5520b898dd2b8fd365db180158"><div class="ttname"><a href="classWIB.html#aa3f86d5520b898dd2b8fd365db180158">WIB::SelectSI5342</a></div><div class="ttdeci">void SelectSI5342(uint64_t input, bool enable)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5342_8cpp_source.html#l00139">WIB_SI5342.cpp:139</a></div></div>
<div class="ttc" id="aclassWIB_html_add4c1712e34c6352782f2c8af427fe61"><div class="ttname"><a href="classWIB.html#add4c1712e34c6352782f2c8af427fe61">WIB::LoadConfigDAQ_SI5342</a></div><div class="ttdeci">void LoadConfigDAQ_SI5342(std::string const &amp;fileName)</div><div class="ttdef"><b>Definition</b> <a href="WIB__SI5342_8cpp_source.html#l00034">WIB_SI5342.cpp:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6856acc9079ff9d95dcb62a5efe23fa0" name="a6856acc9079ff9d95dcb62a5efe23fa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6856acc9079ff9d95dcb62a5efe23fa0">&#9670;&#160;</a></span>ResetWIBAndCfgDTS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::ResetWIBAndCfgDTS </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>localClock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>PDTS_TGRP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>PDTSsource</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>PDTSAlignment_timeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00197">197</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  197</span>                                                                                                                    {</div>
<div class="line"><span class="lineno">  198</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2">UNKNOWN</a>){</div>
<div class="line"><span class="lineno">  199</span>    BUException::WIB_DAQMODE_UNKNOWN e;</div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  201</span>  }</div>
<div class="line"><span class="lineno">  202</span>  <span class="keywordflow">if</span>(localClock &gt; 1){</div>
<div class="line"><span class="lineno">  203</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  204</span>    e.Append(<span class="stringliteral">&quot;localClock &gt; 1; must be 0 (for DTS) or 1 (for local clock)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  206</span>  }</div>
<div class="line"><span class="lineno">  207</span>  <span class="keywordflow">if</span>(PDTSsource &gt; 1){</div>
<div class="line"><span class="lineno">  208</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  209</span>    e.Append(<span class="stringliteral">&quot;PDTSsource &gt; 1; must be 0 (for backplane) or 1 (for front panel)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  211</span>  }</div>
<div class="line"><span class="lineno">  212</span>  <span class="keywordflow">if</span>(16 &lt;= PDTS_TGRP){</div>
<div class="line"><span class="lineno">  213</span>    BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  214</span>    e.Append(<span class="stringliteral">&quot;PDTS TGRP &gt; 15; must be 0 to 15\n&quot;</span>);</div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  216</span>  }</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>  <span class="comment">// get this register so we can leave it in the state it started in</span></div>
<div class="line"><span class="lineno">  219</span>  uint32_t slow_control_dnd = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>);</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>  <a class="code hl_function" href="classWIB.html#a1df27e11950165c5f3ea714d88da5c4e">ResetWIB</a>();</div>
<div class="line"><span class="lineno">  222</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,1);</div>
<div class="line"><span class="lineno">  223</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iFEMB=1; iFEMB&lt;=4; iFEMB++){</div>
<div class="line"><span class="lineno">  226</span>    <a class="code hl_function" href="classWIB.html#aa6d7dc613257e9c11c359252069ec45e">FEMBPower</a>(iFEMB,0);</div>
<div class="line"><span class="lineno">  227</span>  }</div>
<div class="line"><span class="lineno">  228</span>  </div>
<div class="line"><span class="lineno">  229</span>  <span class="comment">//make sure everything DTS is off</span></div>
<div class="line"><span class="lineno">  230</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.HALT&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  231</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  232</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.START_SYNC&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  233</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>  <span class="keywordflow">if</span>(localClock &gt; 0){</div>
<div class="line"><span class="lineno">  236</span>    printf(<span class="stringliteral">&quot;Configuring local clock\n&quot;</span>);</div>
<div class="line"><span class="lineno">  237</span>    <span class="comment">//Configure the SI5344 to use the local oscillator instead of the PDTS</span></div>
<div class="line"><span class="lineno">  238</span>    <a class="code hl_function" href="classWIB.html#a2846252140d13dbf862b4351aa0b0500">LoadConfigDTS_SI5344</a>(<span class="stringliteral">&quot;default&quot;</span>);</div>
<div class="line"><span class="lineno">  239</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  240</span>    <a class="code hl_function" href="classWIB.html#a862a957d3838b82d858f5886d3f665ad">SelectSI5344</a>(1,1);</div>
<div class="line"><span class="lineno">  241</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  242</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.EN_FAKE&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  243</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.LOCAL_TIMESTAMP&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  244</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_CLOCK_SELECT&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  245</span>    <span class="comment">//    Write(&quot;FEMB_CNC.ENABLE_DTS_CMDS&quot;,1);  </span></div>
<div class="line"><span class="lineno">  246</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  247</span>  }</div>
<div class="line"><span class="lineno">  248</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  249</span>    <span class="comment">//Configure the clocking for the PDTS (assumes the PDTS is sending idle or something)</span></div>
<div class="line"><span class="lineno">  250</span>    printf(<span class="stringliteral">&quot;Configuring DTS\n&quot;</span>);</div>
<div class="line"><span class="lineno">  251</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.PDTS_TGRP&quot;</span>,PDTS_TGRP);</div>
<div class="line"><span class="lineno">  252</span>    printf(<span class="stringliteral">&quot;Using timing group 0x%X\n&quot;</span>,PDTS_TGRP);</div>
<div class="line"><span class="lineno">  253</span>    <a class="code hl_function" href="classWIB.html#a4f684559b36ca03641249e2db91f6516">InitializeDTS</a>(PDTSsource,0,PDTSAlignment_timeout);</div>
<div class="line"><span class="lineno">  254</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  255</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.CNC_CLOCK_SELECT&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  256</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  257</span>    <span class="comment">//We are ready for the PDTS, start searching</span></div>
<div class="line"><span class="lineno">  258</span>    <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.PDTS_ENABLE&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  259</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  260</span>  }</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>  <span class="comment">//Now we have the 128MHz clock</span></div>
<div class="line"><span class="lineno">  263</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB1.DAQ.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  264</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB2.DAQ.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  265</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB3.DAQ.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  266</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB4.DAQ.ENABLE&quot;</span>,0);  </div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,slow_control_dnd);</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3f86d5520b898dd2b8fd365db180158" name="aa3f86d5520b898dd2b8fd365db180158"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3f86d5520b898dd2b8fd365db180158">&#9670;&#160;</a></span>SelectSI5342()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SelectSI5342 </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5342_8cpp_source.html#l00139">139</a> of file <a class="el" href="WIB__SI5342_8cpp_source.html">WIB_SI5342.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  139</span>                                                {</div>
<div class="line"><span class="lineno">  140</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.INPUT_SELECT&quot;</span>, input); </div>
<div class="line"><span class="lineno">  141</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DAQ.SI5342.ENABLE&quot;</span>, uint64_t(<a class="code hl_namespace" href="namespaceenable.html">enable</a>)); </div>
<div class="line"><span class="lineno">  142</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a862a957d3838b82d858f5886d3f665ad" name="a862a957d3838b82d858f5886d3f665ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a862a957d3838b82d858f5886d3f665ad">&#9670;&#160;</a></span>SelectSI5344()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SelectSI5344 </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5344_8cpp_source.html#l00138">138</a> of file <a class="el" href="WIB__SI5344_8cpp_source.html">WIB_SI5344.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span>                                                {</div>
<div class="line"><span class="lineno">  139</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.INPUT_SELECT&quot;</span>, input); </div>
<div class="line"><span class="lineno">  140</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;DTS.SI5344.ENABLE&quot;</span>, uint64_t(<a class="code hl_namespace" href="namespaceenable.html">enable</a>)); </div>
<div class="line"><span class="lineno">  141</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9834338ff2231ff5903a8d8683d0e557" name="a9834338ff2231ff5903a8d8683d0e557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9834338ff2231ff5903a8d8683d0e557">&#9670;&#160;</a></span>SetContinueIfListOfFEMBClockPhasesDontSync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetContinueIfListOfFEMBClockPhasesDontSync </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l01156">1156</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1156</span>                                                               {</div>
<div class="line"><span class="lineno"> 1157</span>  <a class="code hl_variable" href="classWIB.html#ac93f4f251c09c4f0ebcf2299a0fe4daf">ContinueIfListOfFEMBClockPhasesDontSync</a> = <a class="code hl_namespace" href="namespaceenable.html">enable</a>;</div>
<div class="line"><span class="lineno"> 1158</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ade9019f4eddcd9e02e6671e4528ebc31" name="ade9019f4eddcd9e02e6671e4528ebc31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade9019f4eddcd9e02e6671e4528ebc31">&#9670;&#160;</a></span>SetContinueOnFEMBRegReadError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetContinueOnFEMBRegReadError </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l01144">1144</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1144</span>                                                  {</div>
<div class="line"><span class="lineno"> 1145</span>  <a class="code hl_variable" href="classWIB.html#a1ad9fed71dd8c922993104f6b6822109">ContinueOnFEMBRegReadError</a> = <a class="code hl_namespace" href="namespaceenable.html">enable</a>;</div>
<div class="line"><span class="lineno"> 1146</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ace75573244320419af0b677a755805c4" name="ace75573244320419af0b677a755805c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace75573244320419af0b677a755805c4">&#9670;&#160;</a></span>SetContinueOnFEMBSPIError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetContinueOnFEMBSPIError </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l01148">1148</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1148</span>                                              {</div>
<div class="line"><span class="lineno"> 1149</span>  <a class="code hl_variable" href="classWIB.html#a5f34bbc7c653592b8f8abe147e738666">ContinueOnFEMBSPIError</a> = <a class="code hl_namespace" href="namespaceenable.html">enable</a>;</div>
<div class="line"><span class="lineno"> 1150</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a214dcd0deca2f16e56d71f89c8d681" name="a3a214dcd0deca2f16e56d71f89c8d681"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a214dcd0deca2f16e56d71f89c8d681">&#9670;&#160;</a></span>SetContinueOnFEMBSyncError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetContinueOnFEMBSyncError </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l01152">1152</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1152</span>                                               {</div>
<div class="line"><span class="lineno"> 1153</span>  <a class="code hl_variable" href="classWIB.html#a3d275455a5edd1a5143c96be7868cac1">ContinueOnFEMBSyncError</a> = <a class="code hl_namespace" href="namespaceenable.html">enable</a>;</div>
<div class="line"><span class="lineno"> 1154</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7ae9769f449879233a1ae67af88fb17" name="ae7ae9769f449879233a1ae67af88fb17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7ae9769f449879233a1ae67af88fb17">&#9670;&#160;</a></span>SetDAQ_SI5342Page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetDAQ_SI5342Page </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5342_8cpp_source.html#l00022">22</a> of file <a class="el" href="WIB__SI5342_8cpp_source.html">WIB_SI5342.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   22</span>                                       {</div>
<div class="line"><span class="lineno">   23</span>  <a class="code hl_function" href="classWIB.html#aaa72da71627de98385e0c973636b4f26">WriteDAQ_SI5342</a>(0x1,page,1);</div>
<div class="line"><span class="lineno">   24</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5cce03773aaf423c8a848517ddd43e6c" name="a5cce03773aaf423c8a848517ddd43e6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cce03773aaf423c8a848517ddd43e6c">&#9670;&#160;</a></span>SetDTS_SI5344Page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetDTS_SI5344Page </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5344_8cpp_source.html#l00022">22</a> of file <a class="el" href="WIB__SI5344_8cpp_source.html">WIB_SI5344.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   22</span>                                       {</div>
<div class="line"><span class="lineno">   23</span>  <a class="code hl_function" href="classWIB.html#a6df6b4ae89ccb9670b7b6b63c0936107">WriteDTS_SI5344</a>(0x1,page,1);</div>
<div class="line"><span class="lineno">   24</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aee312f1b8173b7f9c68503232ee8ae10" name="aee312f1b8173b7f9c68503232ee8ae10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee312f1b8173b7f9c68503232ee8ae10">&#9670;&#160;</a></span>SetEventBuilderDebugMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetEventBuilderDebugMode </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mask</em> = <code>0xF</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="accb0871dfe7a4cc68e07e8bd84270c45" name="accb0871dfe7a4cc68e07e8bd84270c45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accb0871dfe7a4cc68e07e8bd84270c45">&#9670;&#160;</a></span>SetFEMBFakeCOLDATAMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetFEMBFakeCOLDATAMode </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iCD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mode</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FAKE__CD_8cpp_source.html#l00068">68</a> of file <a class="el" href="WIB__FAKE__CD_8cpp_source.html">WIB_FAKE_CD.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>                                                                    {</div>
<div class="line"><span class="lineno">   69</span>  std::string base(<span class="stringliteral">&quot;FEMB0.DAQ.FAKE_CD.CD0.&quot;</span>);</div>
<div class="line"><span class="lineno">   70</span>  base[4] = <a class="code hl_function" href="classWIB.html#ae61504060a5708edc9593dd52e6b8c4b">GetFEMBChar</a>(iFEMB);</div>
<div class="line"><span class="lineno">   71</span>  base[20] = <a class="code hl_function" href="classWIB.html#a413230f17a971d980489977c0a496b00">GetFEMBCDChar</a>(iCD);</div>
<div class="line"><span class="lineno">   72</span>  </div>
<div class="line"><span class="lineno">   73</span>  <span class="comment">//Set this COLDATA ASIC</span></div>
<div class="line"><span class="lineno">   74</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(base+<span class="stringliteral">&quot;FAKE_MODE&quot;</span>,uint32_t(mode));</div>
<div class="line"><span class="lineno">   75</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b9b90306ff5dd77f12f0f27cf2e512d" name="a7b9b90306ff5dd77f12f0f27cf2e512d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b9b90306ff5dd77f12f0f27cf2e512d">&#9670;&#160;</a></span>SetFEMBStreamSource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetFEMBStreamSource </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iStream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>real</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FAKE__CD_8cpp_source.html#l00052">52</a> of file <a class="el" href="WIB__FAKE__CD_8cpp_source.html">WIB_FAKE_CD.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>                                                                    {</div>
<div class="line"><span class="lineno">   53</span>  <a class="code hl_function" href="classWIB.html#a14b19492deecb8672e78168c1a6f67b3">CheckFEMBStreamInRange</a>(iStream);</div>
<div class="line"><span class="lineno">   54</span>  std::string base = <span class="stringliteral">&quot;FEMB0.DAQ.FAKE_CD.RX_DATA_SOURCE&quot;</span>;</div>
<div class="line"><span class="lineno">   55</span>  base[4] = <a class="code hl_function" href="classWIB.html#ae61504060a5708edc9593dd52e6b8c4b">GetFEMBChar</a>(iFEMB);</div>
<div class="line"><span class="lineno">   56</span>  <span class="comment">//Read the current settings</span></div>
<div class="line"><span class="lineno">   57</span>  uint32_t <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(base);</div>
<div class="line"><span class="lineno">   58</span>  <span class="comment">//update the mask</span></div>
<div class="line"><span class="lineno">   59</span>  iStream--; <span class="comment">// iStream is 1-4, but we want bits 0 to 3</span></div>
<div class="line"><span class="lineno">   60</span>  <span class="keywordflow">if</span>(real){</div>
<div class="line"><span class="lineno">   61</span>    <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> &amp;= ~(0x1&lt;&lt;iStream);</div>
<div class="line"><span class="lineno">   62</span>  }<span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">   63</span>    <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> |= 0x1&lt;&lt;iStream;</div>
<div class="line"><span class="lineno">   64</span>  }</div>
<div class="line"><span class="lineno">   65</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(base,data);</div>
<div class="line"><span class="lineno">   66</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac17c0b557e61cbfc9e8a740f8133e424" name="ac17c0b557e61cbfc9e8a740f8133e424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac17c0b557e61cbfc9e8a740f8133e424">&#9670;&#160;</a></span>SetupASICPulserBits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t WIB::SetupASICPulserBits </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l00809">809</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  809</span>                                              {</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span>  <span class="keyword">const</span> uint32_t REG_SPI_BASE_WRITE = 0x200; <span class="comment">// 512</span></div>
<div class="line"><span class="lineno">  812</span>  <span class="keyword">const</span> uint32_t  REG_SPI_BASE_READ = 0x250; <span class="comment">// 592</span></div>
<div class="line"><span class="lineno">  813</span>  uint16_t adc_sync_status = 0xFFFF;</div>
<div class="line"><span class="lineno">  814</span> </div>
<div class="line"><span class="lineno">  815</span>  </div>
<div class="line"><span class="lineno">  816</span> </div>
<div class="line"><span class="lineno">  817</span>  <span class="keywordtype">size_t</span> nASICs = 8;</div>
<div class="line"><span class="lineno">  818</span>  <span class="keywordtype">unsigned</span> nTries = 3;</div>
<div class="line"><span class="lineno">  819</span>  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> iSPIWrite=0; iSPIWrite &lt; nTries; iSPIWrite++)</div>
<div class="line"><span class="lineno">  820</span>  {</div>
<div class="line"><span class="lineno">  821</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_AND_ADC_DATA_EN&quot;</span>, 0 ); <span class="comment">// Turn off STREAM_EN and ADC_DATA_EN</span></div>
<div class="line"><span class="lineno">  822</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  823</span>      </div>
<div class="line"><span class="lineno">  824</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;ASIC SPI Write Registers...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>    uint8_t value = 0x2;</div>
<div class="line"><span class="lineno">  827</span>    uint8_t <a class="code hl_variable" href="namespacereadout-affinity.html#a24a6379e2937e1a1059fbed00d34c3b3">mask</a> = 0x3;</div>
<div class="line"><span class="lineno">  828</span>    uint8_t pos = 24;   </div>
<div class="line"><span class="lineno">  829</span>    std::vector&lt;uint32_t&gt; vals(nASICs);</div>
<div class="line"><span class="lineno">  830</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iASIC=0; iASIC&lt;nASICs; iASIC++)</div>
<div class="line"><span class="lineno">  831</span>    {</div>
<div class="line"><span class="lineno">  832</span>        uint32_t address = (REG_SPI_BASE_WRITE + 9*iASIC + 8);</div>
<div class="line"><span class="lineno">  833</span>        std::cout &lt;&lt;<span class="stringliteral">&quot;Writing address &quot;</span> &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(8) &lt;&lt; address &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  834</span>        <span class="comment">//WriteFEMBBits(iFEMB, address, pos, mask, value);</span></div>
<div class="line"><span class="lineno">  835</span> </div>
<div class="line"><span class="lineno">  836</span>        <span class="comment">//Bit-wise calculation of register val</span></div>
<div class="line"><span class="lineno">  837</span>        uint32_t shiftVal = value &amp; <a class="code hl_variable" href="namespacereadout-affinity.html#a24a6379e2937e1a1059fbed00d34c3b3">mask</a>;</div>
<div class="line"><span class="lineno">  838</span>        uint32_t regMask = (<a class="code hl_variable" href="namespacereadout-affinity.html#a24a6379e2937e1a1059fbed00d34c3b3">mask</a> &lt;&lt; pos);</div>
<div class="line"><span class="lineno">  839</span>        uint32_t initVal = <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,address);</div>
<div class="line"><span class="lineno">  840</span>        uint32_t newVal = ( (initVal &amp; ~(regMask)) | (shiftVal &lt;&lt; pos) );</div>
<div class="line"><span class="lineno">  841</span>        vals[iASIC] = newVal;</div>
<div class="line"><span class="lineno">  842</span>        <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB,address,newVal);</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>        <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  845</span>    }</div>
<div class="line"><span class="lineno">  846</span>    </div>
<div class="line"><span class="lineno">  847</span>  </div>
<div class="line"><span class="lineno">  848</span>  </div>
<div class="line"><span class="lineno">  849</span>    <span class="comment">//run the SPI programming</span></div>
<div class="line"><span class="lineno">  850</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  851</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;WRITE_ASIC_SPI&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  852</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  853</span>  </div>
<div class="line"><span class="lineno">  854</span>    <span class="keywordflow">if</span> (iSPIWrite == nTries - 1)</div>
<div class="line"><span class="lineno">  855</span>    {</div>
<div class="line"><span class="lineno">  856</span>      <span class="comment">// Now check readback</span></div>
<div class="line"><span class="lineno">  857</span>      <span class="keywordtype">bool</span> spi_mismatch = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  858</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> iSPIRead = 0; iSPIRead &lt; 2; iSPIRead++)</div>
<div class="line"><span class="lineno">  859</span>      {</div>
<div class="line"><span class="lineno">  860</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;ASIC SPI Readback...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  861</span>        std::vector&lt;uint32_t&gt; regsReadback(nASICs);</div>
<div class="line"><span class="lineno">  862</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iASIC=0; iASIC&lt;nASICs; iASIC++)</div>
<div class="line"><span class="lineno">  863</span>        {</div>
<div class="line"><span class="lineno">  864</span>            uint32_t regReadback = <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, (REG_SPI_BASE_READ + 9*iASIC + 8));</div>
<div class="line"><span class="lineno">  865</span>            regsReadback[iASIC] = regReadback;</div>
<div class="line"><span class="lineno">  866</span>            <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  867</span>        }</div>
<div class="line"><span class="lineno">  868</span>  </div>
<div class="line"><span class="lineno">  869</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;ASIC SPI register number, write val, read val:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  870</span>        spi_mismatch = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  871</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iASIC=0; iASIC&lt;nASICs; iASIC++)</div>
<div class="line"><span class="lineno">  872</span>        {</div>
<div class="line"><span class="lineno">  873</span>          std::cout &lt;&lt; std::dec &lt;&lt; std::setfill (<span class="charliteral">&#39; &#39;</span>) &lt;&lt; std::setw(3) &lt;&lt; iASIC </div>
<div class="line"><span class="lineno">  874</span>                    &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> </div>
<div class="line"><span class="lineno">  875</span>                    &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(8) &lt;&lt; vals[iASIC] </div>
<div class="line"><span class="lineno">  876</span>                    &lt;&lt; <span class="stringliteral">&quot;  &quot;</span></div>
<div class="line"><span class="lineno">  877</span>                    &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(8) &lt;&lt; regsReadback[iASIC] </div>
<div class="line"><span class="lineno">  878</span>                    &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  879</span>          <span class="keywordflow">if</span> (vals[iASIC] != regsReadback[iASIC])</div>
<div class="line"><span class="lineno">  880</span>          {</div>
<div class="line"><span class="lineno">  881</span>            spi_mismatch = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  882</span>            <span class="keywordtype">size_t</span> asicFailNum = 0;</div>
<div class="line"><span class="lineno">  883</span>            <span class="keywordflow">if</span> (iASIC &gt; 0) asicFailNum = (iASIC-1); </div>
<div class="line"><span class="lineno">  884</span>            std::cout &lt;&lt; <span class="stringliteral">&quot;FE-ADC ASIC &quot;</span> &lt;&lt; asicFailNum &lt;&lt; <span class="stringliteral">&quot; SPI faled&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  885</span>          } <span class="comment">// if regs don&#39;t match</span></div>
<div class="line"><span class="lineno">  886</span>        } <span class="comment">// for iReg</span></div>
<div class="line"><span class="lineno">  887</span>        <span class="keywordflow">if</span> (!spi_mismatch) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  888</span>      } <span class="comment">// for iSPIRead</span></div>
<div class="line"><span class="lineno">  889</span>      <span class="keywordflow">if</span>(spi_mismatch)</div>
<div class="line"><span class="lineno">  890</span>      {</div>
<div class="line"><span class="lineno">  891</span>         BUException::WIB_ERROR e;</div>
<div class="line"><span class="lineno">  892</span>         e.Append(<span class="stringliteral">&quot;SPI programming failure&quot;</span>);</div>
<div class="line"><span class="lineno">  893</span>         <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  894</span>      } <span class="comment">// if spi_mismatch</span></div>
<div class="line"><span class="lineno">  895</span>    } <span class="comment">// if iSPIWrite == 1</span></div>
<div class="line"><span class="lineno">  896</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_AND_ADC_DATA_EN&quot;</span>, 9 ); <span class="comment">// STREAM_EN and ADC_DATA_EN</span></div>
<div class="line"><span class="lineno">  899</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.05);</div>
<div class="line"><span class="lineno">  900</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_AND_ADC_DATA_EN&quot;</span>, 9 ); <span class="comment">// STREAM_EN and ADC_DATA_EN</span></div>
<div class="line"><span class="lineno">  901</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  902</span>  </div>
<div class="line"><span class="lineno">  903</span>    adc_sync_status = (uint16_t) <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, <span class="stringliteral">&quot;ADC_ASIC_SYNC_STATUS&quot;</span>);</div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>    <span class="comment">// The real sync check can happen here in Shanshan&#39;s code</span></div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>  } <span class="comment">// for iSPIWrite</span></div>
<div class="line"><span class="lineno">  908</span> </div>
<div class="line"><span class="lineno">  909</span>  <span class="keywordflow">return</span> adc_sync_status;</div>
<div class="line"><span class="lineno">  910</span>}</div>
<div class="ttc" id="anamespacereadout-affinity_html_a24a6379e2937e1a1059fbed00d34c3b3"><div class="ttname"><a href="namespacereadout-affinity.html#a24a6379e2937e1a1059fbed00d34c3b3">readout-affinity.mask</a></div><div class="ttdeci">dict mask</div><div class="ttdef"><b>Definition</b> <a href="readout-affinity_8py_source.html#l00115">readout-affinity.py:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3210d80e994554c442f6a3c49842762" name="aa3210d80e994554c442f6a3c49842762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3210d80e994554c442f6a3c49842762">&#9670;&#160;</a></span>SetupFEMBASICs() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t WIB::SetupFEMBASICs </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint32_t &gt;&#160;</td>
          <td class="paramname"><em>registerList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup FEMB ASICs. </p>
<p>Sets up iFEMB (index from 1) ASICs</p>
<p>registerList is a list of 71 32bit registers to program the FE and ADC ASICs</p>
<p>returns adc sync status 16 bits, one for each serial link between ADC and FPGA. There are 2 per ADC </p>

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l00550">550</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  550</span>                                                                           {</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> REG_SPI_BASE = 512;</div>
<div class="line"><span class="lineno">  553</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> NREGS = 71;</div>
<div class="line"><span class="lineno">  554</span>  </div>
<div class="line"><span class="lineno">  555</span>  <span class="keywordflow">if</span> (registerList.size() != NREGS)</div>
<div class="line"><span class="lineno">  556</span>  {</div>
<div class="line"><span class="lineno">  557</span>    BUException::FEMB_FIRMWARE_VERSION_MISMATCH e;</div>
<div class="line"><span class="lineno">  558</span>    std::stringstream expstr;</div>
<div class="line"><span class="lineno">  559</span>    expstr &lt;&lt; <span class="stringliteral">&quot;SetupFEMBASICs expects : &quot;</span></div>
<div class="line"><span class="lineno">  560</span>           &lt;&lt; NREGS</div>
<div class="line"><span class="lineno">  561</span>           &lt;&lt; <span class="stringliteral">&quot; argument is: &quot;</span></div>
<div class="line"><span class="lineno">  562</span>           &lt;&lt; registerList.size();</div>
<div class="line"><span class="lineno">  563</span>    e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  564</span>    <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  565</span>  }</div>
<div class="line"><span class="lineno">  566</span> </div>
<div class="line"><span class="lineno">  567</span>  <span class="comment">//turn off HS data before register writes</span></div>
<div class="line"><span class="lineno">  568</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_EN&quot;</span>, 0 );</div>
<div class="line"><span class="lineno">  569</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(2);</div>
<div class="line"><span class="lineno">  570</span> </div>
<div class="line"><span class="lineno">  571</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iReg=0; iReg &lt; NREGS; iReg++)</div>
<div class="line"><span class="lineno">  572</span>  {</div>
<div class="line"><span class="lineno">  573</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, REG_SPI_BASE + iReg, registerList[iReg]);</div>
<div class="line"><span class="lineno">  574</span>  }</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  577</span>  <span class="comment">//run the SPI programming</span></div>
<div class="line"><span class="lineno">  579</span>  </div>
<div class="line"><span class="lineno">  580</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;ADC_ASIC_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  581</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  582</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;FE_ASIC_RESET&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  583</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  584</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;WRITE_ADC_ASIC_SPI&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  585</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  586</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;WRITE_ADC_ASIC_SPI&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  587</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  588</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;WRITE_FE_ASIC_SPI&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  589</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  590</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;WRITE_FE_ASIC_SPI&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  591</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>  uint16_t adc_sync_status = (uint16_t) <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, <span class="stringliteral">&quot;ADC_ASIC_SYNC_STATUS&quot;</span>);</div>
<div class="line"><span class="lineno">  596</span> </div>
<div class="line"><span class="lineno">  597</span>  <span class="comment">//turn HS link back on</span></div>
<div class="line"><span class="lineno">  598</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(2);</div>
<div class="line"><span class="lineno">  599</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_EN&quot;</span>, 1 );</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>  <span class="keywordflow">return</span> adc_sync_status;</div>
<div class="line"><span class="lineno">  602</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af983c68bc5186729c95df4bfc383eeda" name="af983c68bc5186729c95df4bfc383eeda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af983c68bc5186729c95df4bfc383eeda">&#9670;&#160;</a></span>SetupFEMBASICs() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t WIB::SetupFEMBASICs </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>gain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>highBaseline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>highLeakage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>leakagex10</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>acCoupling</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useExtClock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>internalDACControl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>internalDACValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup FEMB ASICs. </p>
<p>Sets up iFEMB (index from 1) ASICs</p>
<p>gain: 0,1,2,3 for 4.7, 7.8, 14, 25 mV/fC, respectively shaping time: 0,1,2,3 for 0.5, 1, 2, 3 us, respectively highBaseline is 900mV for 1, 200mV for 0, and appropriately for each plane for 2 highLeakage is 500pA for true, 100pA for false leakagex10 multiplies leakage x10 if true acCoupling: FE is AC coupled to ADC if true, DC if false buffer: FE to ADC buffer on if true, off and bypassed if false useExtClock: ADC uses external (FPGA) clock if true, internal if false internalDACControl: 0 for disabled, 1 for internal FE ASIC pulser, 2 for external FPGA pulser internalDACValue: 6 bit value for amplitude to use with internal pulser</p>
<p>returns adc sync status 16 bits, one for each serial link between ADC and FPGA. There are 2 per ADC </p>

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l00621">621</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  623</span>                                                                             {</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>  (void) buffer; <span class="comment">// to make compiler not complain about unused arguments</span></div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>  <span class="keywordflow">if</span> (gain &gt; 3) </div>
<div class="line"><span class="lineno">  628</span>  {</div>
<div class="line"><span class="lineno">  629</span>       BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  630</span>       std::stringstream expstr;</div>
<div class="line"><span class="lineno">  631</span>       expstr &lt;&lt; <span class="stringliteral">&quot;gain should be between 0 and 3, but is: &quot;</span></div>
<div class="line"><span class="lineno">  632</span>              &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(gain);</div>
<div class="line"><span class="lineno">  633</span>       e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  634</span>       <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  635</span>  }</div>
<div class="line"><span class="lineno">  636</span>  <span class="keywordflow">if</span> (shape &gt; 3) </div>
<div class="line"><span class="lineno">  637</span>  {</div>
<div class="line"><span class="lineno">  638</span>       BUException::WIB_BAD_ARGS e;</div>
<div class="line"><span class="lineno">  639</span>       std::stringstream expstr;</div>
<div class="line"><span class="lineno">  640</span>       expstr &lt;&lt; <span class="stringliteral">&quot;shape should be between 0 and 3, but is: &quot;</span></div>
<div class="line"><span class="lineno">  641</span>              &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(shape);</div>
<div class="line"><span class="lineno">  642</span>       e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  643</span>       <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  644</span>  }</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> REG_SPI_BASE_WRITE = 0x200; <span class="comment">// 512</span></div>
<div class="line"><span class="lineno">  647</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> REG_SPI_BASE_READ = 0x250; <span class="comment">// 592</span></div>
<div class="line"><span class="lineno">  648</span>  <span class="comment">// 0x48 registers total, 72 in hex</span></div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>  <span class="keywordtype">bool</span> bypassOutputBuffer=<span class="keyword">true</span>; <span class="comment">// if false might blow up protoDUNE</span></div>
<div class="line"><span class="lineno">  651</span>  <span class="keywordtype">bool</span> useOutputMonitor=<span class="keyword">false</span>; <span class="comment">// if true might blow up protoDUNE</span></div>
<div class="line"><span class="lineno">  652</span>  <span class="keywordtype">bool</span> useCh16HighPassFilter=<span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  653</span>  <span class="keywordtype">bool</span> monitorBandgapNotTemp=<span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  654</span>  <span class="keywordtype">bool</span> monitorTempBandgapNotSignal=<span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  655</span>  <span class="keywordtype">bool</span> useTestCapacitance = (bool) internalDACControl;</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>  <span class="comment">// Flip bits of gain</span></div>
<div class="line"><span class="lineno">  658</span>  <span class="keywordflow">if</span> (gain == 0x1) gain = 0x2;</div>
<div class="line"><span class="lineno">  659</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gain== 0x2) gain = 0x1;</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>  <span class="comment">// Shape</span></div>
<div class="line"><span class="lineno">  662</span>  <span class="keywordflow">if</span> (shape == 0x0) shape = 0x2; <span class="comment">// 0.5 us</span></div>
<div class="line"><span class="lineno">  663</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shape == 0x1) shape = 0x0; <span class="comment">// 1 us</span></div>
<div class="line"><span class="lineno">  664</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shape == 0x2) shape = 0x3; <span class="comment">// 2 us</span></div>
<div class="line"><span class="lineno">  665</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shape == 0x3) shape = 0x1; <span class="comment">// 3 us</span></div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>  <a class="code hl_class" href="classFE__ASIC__reg__mapping.html">FE_ASIC_reg_mapping</a> fe_map;</div>
<div class="line"><span class="lineno">  668</span>  <span class="keywordflow">if</span> (highBaseline &gt; 1)</div>
<div class="line"><span class="lineno">  669</span>  {</div>
<div class="line"><span class="lineno">  670</span>    <span class="comment">// Set them all to high baseline</span></div>
<div class="line"><span class="lineno">  671</span>    fe_map.<a class="code hl_function" href="classFE__ASIC__reg__mapping.html#aa55e216a1ca19b69daa089e1f325c463">set_board</a>(useTestCapacitance,0,gain,shape,</div>
<div class="line"><span class="lineno">  672</span>                      useOutputMonitor,!bypassOutputBuffer,!highLeakage,</div>
<div class="line"><span class="lineno">  673</span>                      monitorBandgapNotTemp,monitorTempBandgapNotSignal,useCh16HighPassFilter,</div>
<div class="line"><span class="lineno">  674</span>                      leakagex10,acCoupling,internalDACControl,internalDACValue</div>
<div class="line"><span class="lineno">  675</span>                  );</div>
<div class="line"><span class="lineno">  676</span>    <span class="comment">// Now just set collection channels to low baseline</span></div>
<div class="line"><span class="lineno">  677</span>    fe_map.<a class="code hl_function" href="classFE__ASIC__reg__mapping.html#a6ce2afcf885d75c8b6d909e8fd3a59c4">set_collection_baseline</a>(1);</div>
<div class="line"><span class="lineno">  678</span>  }</div>
<div class="line"><span class="lineno">  679</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  680</span>  {</div>
<div class="line"><span class="lineno">  681</span>    fe_map.<a class="code hl_function" href="classFE__ASIC__reg__mapping.html#aa55e216a1ca19b69daa089e1f325c463">set_board</a>(useTestCapacitance,~highBaseline,gain,shape,</div>
<div class="line"><span class="lineno">  682</span>                      useOutputMonitor,!bypassOutputBuffer,!highLeakage,</div>
<div class="line"><span class="lineno">  683</span>                      monitorBandgapNotTemp,monitorTempBandgapNotSignal,useCh16HighPassFilter,</div>
<div class="line"><span class="lineno">  684</span>                      leakagex10,acCoupling,internalDACControl,internalDACValue</div>
<div class="line"><span class="lineno">  685</span>                  );</div>
<div class="line"><span class="lineno">  686</span>  }</div>
<div class="line"><span class="lineno">  687</span>  <a class="code hl_class" href="classADC__ASIC__reg__mapping.html">ADC_ASIC_reg_mapping</a> adc_map;</div>
<div class="line"><span class="lineno">  688</span>  uint8_t offsetCurrentValue=0;</div>
<div class="line"><span class="lineno">  689</span>  <span class="keywordtype">bool</span> pcsr=0;</div>
<div class="line"><span class="lineno">  690</span>  <span class="keywordtype">bool</span> pdsr=0;</div>
<div class="line"><span class="lineno">  691</span>  <span class="keywordtype">bool</span> adcSleep=0;</div>
<div class="line"><span class="lineno">  692</span>  <span class="keywordtype">bool</span> useADCTestInput=0;</div>
<div class="line"><span class="lineno">  693</span>  <span class="keywordtype">bool</span> f4=0;</div>
<div class="line"><span class="lineno">  694</span>  <span class="keywordtype">bool</span> f5=0;</div>
<div class="line"><span class="lineno">  695</span>  <span class="keywordtype">bool</span> lsbCurrentStearingPartialNotFull=0;</div>
<div class="line"><span class="lineno">  696</span>  <span class="keywordtype">bool</span> clk0=0;</div>
<div class="line"><span class="lineno">  697</span>  <span class="keywordflow">if</span> (useExtClock) clk0=1;</div>
<div class="line"><span class="lineno">  698</span>  <span class="keywordtype">bool</span> clk1=0;</div>
<div class="line"><span class="lineno">  699</span>  <span class="keywordtype">bool</span> <a class="code hl_typedef" href="namespacedunedaq_1_1trigger_1_1triggerprimitivemaker.html#a884e8e96cc8794d55816f1fa70a65cb1">freq</a>=0;</div>
<div class="line"><span class="lineno">  700</span>  <span class="keywordtype">bool</span> enableOffsetCurrent=0;</div>
<div class="line"><span class="lineno">  701</span>  <span class="keywordtype">bool</span> f0=0;</div>
<div class="line"><span class="lineno">  702</span>  <span class="keywordtype">bool</span> f1=0;</div>
<div class="line"><span class="lineno">  703</span>  <span class="keywordtype">bool</span> f2=0;</div>
<div class="line"><span class="lineno">  704</span>  <span class="keywordtype">bool</span> f3=0;</div>
<div class="line"><span class="lineno">  705</span>  adc_map.<a class="code hl_function" href="classADC__ASIC__reg__mapping.html#a2892c7dfa9903e58cc0939250bfe1edd">set_board</a>(offsetCurrentValue, pcsr, pdsr, </div>
<div class="line"><span class="lineno">  706</span>                    adcSleep, useADCTestInput, f4, f5,</div>
<div class="line"><span class="lineno">  707</span>                    lsbCurrentStearingPartialNotFull,0,0,</div>
<div class="line"><span class="lineno">  708</span>                    0,0,0,</div>
<div class="line"><span class="lineno">  709</span>                    clk0,clk1,freq,</div>
<div class="line"><span class="lineno">  710</span>                    enableOffsetCurrent,f0,f1,</div>
<div class="line"><span class="lineno">  711</span>                    f2,f3);</div>
<div class="line"><span class="lineno">  712</span>  <a class="code hl_class" href="classASIC__reg__mapping.html">ASIC_reg_mapping</a> map;</div>
<div class="line"><span class="lineno">  713</span>  map.<a class="code hl_function" href="classASIC__reg__mapping.html#aad37005fddd034d39dc412d017526036">set_board</a>(fe_map,adc_map);</div>
<div class="line"><span class="lineno">  714</span>  map.<a class="code hl_function" href="classASIC__reg__mapping.html#a752132b973babefae93f3bd938d6b511">get_regs</a>();</div>
<div class="line"><span class="lineno">  715</span>  <span class="keyword">const</span> std::vector&lt;uint32_t&gt; regs = map.<a class="code hl_function" href="classASIC__reg__mapping.html#a752132b973babefae93f3bd938d6b511">get_regs</a>();</div>
<div class="line"><span class="lineno">  716</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> nRegs = regs.size();</div>
<div class="line"><span class="lineno">  717</span> </div>
<div class="line"><span class="lineno">  718</span>  uint16_t adc_sync_status = 0xFFFF;</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> iSPIWrite=0; iSPIWrite &lt; 2; iSPIWrite++)</div>
<div class="line"><span class="lineno">  721</span>  {</div>
<div class="line"><span class="lineno">  722</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_AND_ADC_DATA_EN&quot;</span>, 0 ); <span class="comment">// Turn off STREAM_EN and ADC_DATA_EN</span></div>
<div class="line"><span class="lineno">  723</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  724</span>  </div>
<div class="line"><span class="lineno">  725</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;ASIC SPI Write Registers...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  726</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iReg=0; iReg&lt;nRegs; iReg++)</div>
<div class="line"><span class="lineno">  727</span>    {</div>
<div class="line"><span class="lineno">  728</span>        <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB,REG_SPI_BASE_WRITE+iReg,regs[iReg]);</div>
<div class="line"><span class="lineno">  729</span>        <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  730</span>    }</div>
<div class="line"><span class="lineno">  731</span>  </div>
<div class="line"><span class="lineno">  732</span>  </div>
<div class="line"><span class="lineno">  733</span>    <span class="comment">//run the SPI programming</span></div>
<div class="line"><span class="lineno">  734</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  735</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;WRITE_ASIC_SPI&quot;</span>, 1);</div>
<div class="line"><span class="lineno">  736</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  737</span>  </div>
<div class="line"><span class="lineno">  738</span>    <span class="keywordflow">if</span> (iSPIWrite == 1)</div>
<div class="line"><span class="lineno">  739</span>    {</div>
<div class="line"><span class="lineno">  740</span>      <span class="comment">// Now check readback</span></div>
<div class="line"><span class="lineno">  741</span>      <span class="keywordtype">bool</span> spi_mismatch = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  742</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> iSPIRead = 0; iSPIRead &lt; 2; iSPIRead++)</div>
<div class="line"><span class="lineno">  743</span>      {</div>
<div class="line"><span class="lineno">  744</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;ASIC SPI Readback...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  745</span>        std::vector&lt;uint32_t&gt; regsReadback(nRegs);</div>
<div class="line"><span class="lineno">  746</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iReg=0; iReg&lt;nRegs; iReg++)</div>
<div class="line"><span class="lineno">  747</span>        {</div>
<div class="line"><span class="lineno">  748</span>            uint32_t regReadback = <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,REG_SPI_BASE_READ+iReg);</div>
<div class="line"><span class="lineno">  749</span>            regsReadback[iReg] = regReadback;</div>
<div class="line"><span class="lineno">  750</span>            <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.01);</div>
<div class="line"><span class="lineno">  751</span>        }</div>
<div class="line"><span class="lineno">  752</span>  </div>
<div class="line"><span class="lineno">  753</span>        <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  754</span>        <span class="keywordflow">if</span> (verbose) std::cout &lt;&lt; <span class="stringliteral">&quot;ASIC SPI register number, write val, read val:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  755</span>        spi_mismatch = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  756</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iReg=0; iReg&lt;nRegs; iReg++)</div>
<div class="line"><span class="lineno">  757</span>        {</div>
<div class="line"><span class="lineno">  758</span>          <span class="keywordflow">if</span> (verbose)</div>
<div class="line"><span class="lineno">  759</span>          {</div>
<div class="line"><span class="lineno">  760</span>            std::cout &lt;&lt; std::dec &lt;&lt; std::setfill (<span class="charliteral">&#39; &#39;</span>) &lt;&lt; std::setw(3) &lt;&lt; iReg </div>
<div class="line"><span class="lineno">  761</span>                      &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> </div>
<div class="line"><span class="lineno">  762</span>                      &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(8) &lt;&lt; regs[iReg] </div>
<div class="line"><span class="lineno">  763</span>                      &lt;&lt; <span class="stringliteral">&quot;  &quot;</span></div>
<div class="line"><span class="lineno">  764</span>                      &lt;&lt; std::hex &lt;&lt; std::setfill (<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; std::setw(8) &lt;&lt; regsReadback[iReg] </div>
<div class="line"><span class="lineno">  765</span>                      &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  766</span>          } <span class="comment">// if verbose</span></div>
<div class="line"><span class="lineno">  767</span>          <span class="keywordflow">if</span> (regs[iReg] != regsReadback[iReg])</div>
<div class="line"><span class="lineno">  768</span>          {</div>
<div class="line"><span class="lineno">  769</span>            spi_mismatch = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  770</span>            <span class="keywordtype">size_t</span> asicFailNum = 0;</div>
<div class="line"><span class="lineno">  771</span>            <span class="keywordflow">if</span> (iReg &gt; 0) asicFailNum = (iReg-1) / 9;</div>
<div class="line"><span class="lineno">  772</span>            std::cout &lt;&lt; <span class="stringliteral">&quot;FE-ADC ASIC &quot;</span> &lt;&lt; asicFailNum &lt;&lt; <span class="stringliteral">&quot; SPI faled&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  773</span>          } <span class="comment">// if regs don&#39;t match</span></div>
<div class="line"><span class="lineno">  774</span>        } <span class="comment">// for iReg</span></div>
<div class="line"><span class="lineno">  775</span>        <span class="keywordflow">if</span> (!spi_mismatch) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  776</span>      } <span class="comment">// for iSPIRead</span></div>
<div class="line"><span class="lineno">  777</span>      <span class="keywordflow">if</span>(spi_mismatch)</div>
<div class="line"><span class="lineno">  778</span>      {</div>
<div class="line"><span class="lineno">  779</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#a5f34bbc7c653592b8f8abe147e738666">ContinueOnFEMBSPIError</a>)</div>
<div class="line"><span class="lineno">  780</span>        {</div>
<div class="line"><span class="lineno">  781</span>          std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB ASIC SPI readback mismatch--problems communicating with ASICs for FEMB: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  782</span>        }</div>
<div class="line"><span class="lineno">  783</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  784</span>        {</div>
<div class="line"><span class="lineno">  785</span>          BUException::FEMB_SPI_READBACK_MISMATCH e;</div>
<div class="line"><span class="lineno">  786</span>          std::stringstream expstr;</div>
<div class="line"><span class="lineno">  787</span>          expstr &lt;&lt; <span class="stringliteral">&quot; for FEMB: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB);</div>
<div class="line"><span class="lineno">  788</span>          e.Append(expstr.str().c_str());</div>
<div class="line"><span class="lineno">  789</span>          <span class="keywordflow">throw</span> e;</div>
<div class="line"><span class="lineno">  790</span>        }</div>
<div class="line"><span class="lineno">  791</span>      } <span class="comment">// if spi_mismatch</span></div>
<div class="line"><span class="lineno">  792</span>    } <span class="comment">// if iSPIWrite == 1</span></div>
<div class="line"><span class="lineno">  793</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_AND_ADC_DATA_EN&quot;</span>, 9 ); <span class="comment">// STREAM_EN and ADC_DATA_EN</span></div>
<div class="line"><span class="lineno">  796</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.05);</div>
<div class="line"><span class="lineno">  797</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;STREAM_AND_ADC_DATA_EN&quot;</span>, 9 ); <span class="comment">// STREAM_EN and ADC_DATA_EN</span></div>
<div class="line"><span class="lineno">  798</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.1);</div>
<div class="line"><span class="lineno">  799</span>  </div>
<div class="line"><span class="lineno">  800</span>    adc_sync_status = (uint16_t) <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, <span class="stringliteral">&quot;ADC_ASIC_SYNC_STATUS&quot;</span>);</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>    <span class="comment">// The real sync check can happen here in Shanshan&#39;s code</span></div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>  } <span class="comment">// for iSPIWrite</span></div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>  <span class="keywordflow">return</span> adc_sync_status;</div>
<div class="line"><span class="lineno">  807</span>}</div>
<div class="ttc" id="aclassADC__ASIC__reg__mapping_html"><div class="ttname"><a href="classADC__ASIC__reg__mapping.html">ADC_ASIC_reg_mapping</a></div><div class="ttdef"><b>Definition</b> <a href="ADC__ASIC__reg__mapping_8hh_source.html#l00007">ADC_ASIC_reg_mapping.hh:7</a></div></div>
<div class="ttc" id="aclassADC__ASIC__reg__mapping_html_a2892c7dfa9903e58cc0939250bfe1edd"><div class="ttname"><a href="classADC__ASIC__reg__mapping.html#a2892c7dfa9903e58cc0939250bfe1edd">ADC_ASIC_reg_mapping::set_board</a></div><div class="ttdeci">void set_board(uint8_t d=0, uint8_t pcsr=0, uint8_t pdsr=0, uint8_t slp=0, uint8_t tstin=0, uint8_t f4=0, uint8_t f5=0, uint8_t slsb=0, uint8_t res4=0, uint8_t res3=0, uint8_t res2=0, uint8_t res1=0, uint8_t res0=0, uint8_t clk0=0, uint8_t clk1=0, uint8_t frqc=0, uint8_t engr=0, uint8_t f0=0, uint8_t f1=0, uint8_t f2=0, uint8_t f3=0)</div><div class="ttdef"><b>Definition</b> <a href="ADC__ASIC__reg__mapping_8cpp_source.html#l00076">ADC_ASIC_reg_mapping.cpp:76</a></div></div>
<div class="ttc" id="aclassASIC__reg__mapping_html"><div class="ttname"><a href="classASIC__reg__mapping.html">ASIC_reg_mapping</a></div><div class="ttdef"><b>Definition</b> <a href="ASIC__reg__mapping_8hh_source.html#l00009">ASIC_reg_mapping.hh:9</a></div></div>
<div class="ttc" id="aclassASIC__reg__mapping_html_a752132b973babefae93f3bd938d6b511"><div class="ttname"><a href="classASIC__reg__mapping.html#a752132b973babefae93f3bd938d6b511">ASIC_reg_mapping::get_regs</a></div><div class="ttdeci">std::vector&lt; uint32_t &gt; get_regs() const</div><div class="ttdef"><b>Definition</b> <a href="ASIC__reg__mapping_8cpp_source.html#l00036">ASIC_reg_mapping.cpp:36</a></div></div>
<div class="ttc" id="aclassASIC__reg__mapping_html_aad37005fddd034d39dc412d017526036"><div class="ttname"><a href="classASIC__reg__mapping.html#aad37005fddd034d39dc412d017526036">ASIC_reg_mapping::set_board</a></div><div class="ttdeci">void set_board(const FE_ASIC_reg_mapping &amp;fe_map, const ADC_ASIC_reg_mapping &amp;adc_map)</div><div class="ttdef"><b>Definition</b> <a href="ASIC__reg__mapping_8cpp_source.html#l00010">ASIC_reg_mapping.cpp:10</a></div></div>
<div class="ttc" id="aclassFE__ASIC__reg__mapping_html"><div class="ttname"><a href="classFE__ASIC__reg__mapping.html">FE_ASIC_reg_mapping</a></div><div class="ttdef"><b>Definition</b> <a href="FE__ASIC__reg__mapping_8hh_source.html#l00007">FE_ASIC_reg_mapping.hh:7</a></div></div>
<div class="ttc" id="aclassFE__ASIC__reg__mapping_html_a6ce2afcf885d75c8b6d909e8fd3a59c4"><div class="ttname"><a href="classFE__ASIC__reg__mapping.html#a6ce2afcf885d75c8b6d909e8fd3a59c4">FE_ASIC_reg_mapping::set_collection_baseline</a></div><div class="ttdeci">void set_collection_baseline(uint8_t snc)</div><div class="ttdef"><b>Definition</b> <a href="FE__ASIC__reg__mapping_8cpp_source.html#l00079">FE_ASIC_reg_mapping.cpp:79</a></div></div>
<div class="ttc" id="aclassFE__ASIC__reg__mapping_html_aa55e216a1ca19b69daa089e1f325c463"><div class="ttname"><a href="classFE__ASIC__reg__mapping.html#aa55e216a1ca19b69daa089e1f325c463">FE_ASIC_reg_mapping::set_board</a></div><div class="ttdeci">void set_board(uint8_t sts=0, uint8_t snc=0, uint8_t sg=0, uint8_t st=0, uint8_t smn=0, uint8_t sdf=0, uint8_t slk0=0, uint8_t stb1=0, uint8_t stb=0, uint8_t s16=0, uint8_t slk1=0, uint8_t sdc=0, uint8_t swdac=0, uint8_t dac=0)</div><div class="ttdef"><b>Definition</b> <a href="FE__ASIC__reg__mapping_8cpp_source.html#l00062">FE_ASIC_reg_mapping.cpp:62</a></div></div>
<div class="ttc" id="anamespacedunedaq_1_1trigger_1_1triggerprimitivemaker_html_a884e8e96cc8794d55816f1fa70a65cb1"><div class="ttname"><a href="namespacedunedaq_1_1trigger_1_1triggerprimitivemaker.html#a884e8e96cc8794d55816f1fa70a65cb1">dunedaq::trigger::triggerprimitivemaker::freq</a></div><div class="ttdeci">uint64_t freq</div><div class="ttdef"><b>Definition</b> <a href="trigger_2codegen_2include_2trigger_2triggerprimitivemaker_2Structs_8hpp_source.html#l00053">Structs.hpp:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a587fc3369aac2d83fa47d658ad240c65" name="a587fc3369aac2d83fa47d658ad240c65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a587fc3369aac2d83fa47d658ad240c65">&#9670;&#160;</a></span>SetupFEMBExtClock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetupFEMBExtClock </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup FEMB External Clock. </p>
<p>Sets up iFEMB (index from 1) external clock parameters </p>

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l00375">375</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  375</span>                                        {</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>  <span class="comment">//EXTERNAL CLOCK VARIABLES</span></div>
<div class="line"><span class="lineno">  378</span>  uint32_t clk_period = 5; <span class="comment">//ns</span></div>
<div class="line"><span class="lineno">  379</span>  uint32_t clk_dis = 0; <span class="comment">//0 --&gt; enable, 1 disable</span></div>
<div class="line"><span class="lineno">  380</span>  uint32_t d14_rst_oft  = 0   / clk_period;</div>
<div class="line"><span class="lineno">  381</span>  uint32_t d14_rst_wdt  = (45  / clk_period ) ;</div>
<div class="line"><span class="lineno">  382</span>  uint32_t d14_rst_inv  = 1;</div>
<div class="line"><span class="lineno">  383</span>  uint32_t d14_read_oft = 480 / clk_period;</div>
<div class="line"><span class="lineno">  384</span>  uint32_t d14_read_wdt = 20  / clk_period;</div>
<div class="line"><span class="lineno">  385</span>  uint32_t d14_read_inv = 1;</div>
<div class="line"><span class="lineno">  386</span>  uint32_t d14_idxm_oft = 230 / clk_period;</div>
<div class="line"><span class="lineno">  387</span>  uint32_t d14_idxm_wdt = 270 / clk_period;</div>
<div class="line"><span class="lineno">  388</span>  uint32_t d14_idxm_inv = 0;</div>
<div class="line"><span class="lineno">  389</span>  uint32_t d14_idxl_oft = 480 / clk_period;</div>
<div class="line"><span class="lineno">  390</span>  uint32_t d14_idxl_wdt = 20  / clk_period;</div>
<div class="line"><span class="lineno">  391</span>  uint32_t d14_idxl_inv = 0;</div>
<div class="line"><span class="lineno">  392</span>  uint32_t d14_idl0_oft = 50  / clk_period;</div>
<div class="line"><span class="lineno">  393</span>  uint32_t d14_idl0_wdt = (190 / clk_period ) -1;</div>
<div class="line"><span class="lineno">  394</span>  uint32_t d14_idl1_oft = 480 / clk_period;</div>
<div class="line"><span class="lineno">  395</span>  uint32_t d14_idl1_wdt = 20  / clk_period;</div>
<div class="line"><span class="lineno">  396</span>  uint32_t d14_idl_inv  = 0;</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>  uint32_t d58_rst_oft  = 0   / clk_period;</div>
<div class="line"><span class="lineno">  399</span>  uint32_t d58_rst_wdt  = (45  / clk_period );</div>
<div class="line"><span class="lineno">  400</span>  uint32_t d58_rst_inv  = 1;</div>
<div class="line"><span class="lineno">  401</span>  uint32_t d58_read_oft = 480 / clk_period;</div>
<div class="line"><span class="lineno">  402</span>  uint32_t d58_read_wdt = 20  / clk_period;</div>
<div class="line"><span class="lineno">  403</span>  uint32_t d58_read_inv = 1;</div>
<div class="line"><span class="lineno">  404</span>  uint32_t d58_idxm_oft = 230 / clk_period;</div>
<div class="line"><span class="lineno">  405</span>  uint32_t d58_idxm_wdt = 270 / clk_period;</div>
<div class="line"><span class="lineno">  406</span>  uint32_t d58_idxm_inv = 0;</div>
<div class="line"><span class="lineno">  407</span>  uint32_t d58_idxl_oft = 480 / clk_period;</div>
<div class="line"><span class="lineno">  408</span>  uint32_t d58_idxl_wdt = 20  / clk_period;</div>
<div class="line"><span class="lineno">  409</span>  uint32_t d58_idxl_inv = 0;</div>
<div class="line"><span class="lineno">  410</span>  uint32_t d58_idl0_oft = 50  / clk_period;</div>
<div class="line"><span class="lineno">  411</span>  uint32_t d58_idl0_wdt = (190 / clk_period ) -1;</div>
<div class="line"><span class="lineno">  412</span>  uint32_t d58_idl1_oft = 480 / clk_period;</div>
<div class="line"><span class="lineno">  413</span>  uint32_t d58_idl1_wdt = 20  / clk_period;</div>
<div class="line"><span class="lineno">  414</span>  uint32_t d58_idl_inv  = 0;</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span>  <span class="comment">//external clock phase -- Version 320</span></div>
<div class="line"><span class="lineno">  417</span>  <span class="comment">/*uint32_t d14_read_step = 7;</span></div>
<div class="line"><span class="lineno">  418</span><span class="comment">  uint32_t d14_read_ud   = 0;</span></div>
<div class="line"><span class="lineno">  419</span><span class="comment">  uint32_t d14_idxm_step = 3;</span></div>
<div class="line"><span class="lineno">  420</span><span class="comment">  uint32_t d14_idxm_ud   = 0;</span></div>
<div class="line"><span class="lineno">  421</span><span class="comment">  uint32_t d14_idxl_step = 1;</span></div>
<div class="line"><span class="lineno">  422</span><span class="comment">  uint32_t d14_idxl_ud   = 1;</span></div>
<div class="line"><span class="lineno">  423</span><span class="comment">  uint32_t d14_idl0_step = 5;</span></div>
<div class="line"><span class="lineno">  424</span><span class="comment">  uint32_t d14_idl0_ud   = 0;</span></div>
<div class="line"><span class="lineno">  425</span><span class="comment">  uint32_t d14_idl1_step = 2;</span></div>
<div class="line"><span class="lineno">  426</span><span class="comment">  uint32_t d14_idl1_ud   = 0;</span></div>
<div class="line"><span class="lineno">  427</span><span class="comment">  uint32_t d14_phase_en  = 1;</span></div>
<div class="line"><span class="lineno">  428</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  429</span><span class="comment">  uint32_t d58_read_step = 1;</span></div>
<div class="line"><span class="lineno">  430</span><span class="comment">  uint32_t d58_read_ud   = 1;</span></div>
<div class="line"><span class="lineno">  431</span><span class="comment">  uint32_t d58_idxm_step = 0;</span></div>
<div class="line"><span class="lineno">  432</span><span class="comment">  uint32_t d58_idxm_ud   = 0;</span></div>
<div class="line"><span class="lineno">  433</span><span class="comment">  uint32_t d58_idxl_step = 5;</span></div>
<div class="line"><span class="lineno">  434</span><span class="comment">  uint32_t d58_idxl_ud   = 1;</span></div>
<div class="line"><span class="lineno">  435</span><span class="comment">  uint32_t d58_idl0_step = 6;</span></div>
<div class="line"><span class="lineno">  436</span><span class="comment">  uint32_t d58_idl0_ud   = 0;</span></div>
<div class="line"><span class="lineno">  437</span><span class="comment">  uint32_t d58_idl1_step = 5;</span></div>
<div class="line"><span class="lineno">  438</span><span class="comment">  uint32_t d58_idl1_ud   = 0;</span></div>
<div class="line"><span class="lineno">  439</span><span class="comment">  uint32_t d58_phase_en  = 1;*/</span></div>
<div class="line"><span class="lineno">  440</span>  <span class="comment">//Version 323</span></div>
<div class="line"><span class="lineno">  441</span>  uint32_t d14_read_step = 11;</div>
<div class="line"><span class="lineno">  442</span>  uint32_t d14_read_ud   = 0;</div>
<div class="line"><span class="lineno">  443</span>  uint32_t d14_idxm_step = 9;</div>
<div class="line"><span class="lineno">  444</span>  uint32_t d14_idxm_ud   = 0;</div>
<div class="line"><span class="lineno">  445</span>  uint32_t d14_idxl_step = 7;</div>
<div class="line"><span class="lineno">  446</span>  uint32_t d14_idxl_ud   = 0;</div>
<div class="line"><span class="lineno">  447</span>  uint32_t d14_idl0_step = 12;</div>
<div class="line"><span class="lineno">  448</span>  uint32_t d14_idl0_ud   = 0;</div>
<div class="line"><span class="lineno">  449</span>  uint32_t d14_idl1_step = 10;</div>
<div class="line"><span class="lineno">  450</span>  uint32_t d14_idl1_ud   = 0;</div>
<div class="line"><span class="lineno">  451</span>  uint32_t d14_phase_en  = 1;</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>  uint32_t d58_read_step = 0;</div>
<div class="line"><span class="lineno">  454</span>  uint32_t d58_read_ud   = 0;</div>
<div class="line"><span class="lineno">  455</span>  uint32_t d58_idxm_step = 5;</div>
<div class="line"><span class="lineno">  456</span>  uint32_t d58_idxm_ud   = 0;</div>
<div class="line"><span class="lineno">  457</span>  uint32_t d58_idxl_step = 4;</div>
<div class="line"><span class="lineno">  458</span>  uint32_t d58_idxl_ud   = 1;</div>
<div class="line"><span class="lineno">  459</span>  uint32_t d58_idl0_step = 3;</div>
<div class="line"><span class="lineno">  460</span>  uint32_t d58_idl0_ud   = 0;</div>
<div class="line"><span class="lineno">  461</span>  uint32_t d58_idl1_step = 4;</div>
<div class="line"><span class="lineno">  462</span>  uint32_t d58_idl1_ud   = 0;</div>
<div class="line"><span class="lineno">  463</span>  uint32_t d58_phase_en  = 1;</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>  <span class="comment">//END EXTERNAL CLOCK VARIABLES</span></div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>  <span class="comment">//config timing</span></div>
<div class="line"><span class="lineno">  468</span>  uint32_t d14_inv = (d14_rst_inv&lt;&lt;0) + (d14_read_inv&lt;&lt;1)+ (d14_idxm_inv&lt;&lt;2)+ (d14_idxl_inv&lt;&lt;3)+ (d14_idl_inv&lt;&lt;4);</div>
<div class="line"><span class="lineno">  469</span>  uint32_t d58_inv = (d58_rst_inv&lt;&lt;0) + (d58_read_inv&lt;&lt;1)+ (d58_idxm_inv&lt;&lt;2)+ (d58_idxl_inv&lt;&lt;3)+ (d58_idl_inv&lt;&lt;4);</div>
<div class="line"><span class="lineno">  470</span>  uint32_t d_inv = d58_inv + ( d14_inv&lt;&lt;5);</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>  uint32_t addr_data;</div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>  addr_data = clk_dis + (d_inv &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  475</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 21, addr_data);</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>  addr_data = d58_rst_oft + (d14_rst_oft &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  478</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 22, addr_data);</div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>  addr_data = d58_rst_wdt + (d14_rst_wdt &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  481</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 23, addr_data);</div>
<div class="line"><span class="lineno">  482</span> </div>
<div class="line"><span class="lineno">  483</span>  addr_data = d58_read_oft + (d14_read_oft &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  484</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 24, addr_data);</div>
<div class="line"><span class="lineno">  485</span> </div>
<div class="line"><span class="lineno">  486</span>  addr_data = d58_read_wdt + (d14_read_wdt &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  487</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 25, addr_data);</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>  addr_data = d58_idxm_oft + (d14_idxm_oft &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  490</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 26, addr_data);</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>  addr_data = d58_idxm_wdt + (d14_idxm_wdt &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  493</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 27, addr_data);</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>  addr_data = d58_idxl_oft + (d14_idxl_oft &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  496</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 28, addr_data);</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>  addr_data = d58_idxl_wdt + (d14_idxl_wdt &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  499</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 29, addr_data);</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>  addr_data = d58_idl0_oft + (d14_idl0_oft &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  502</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 30, addr_data);</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>  addr_data = d58_idl0_wdt + (d14_idl0_wdt &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  505</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 31, addr_data);</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>  addr_data = d58_idl1_oft + (d14_idl1_oft &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  508</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 32, addr_data);</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>  addr_data = d58_idl1_wdt + (d14_idl1_wdt &lt;&lt; 16);</div>
<div class="line"><span class="lineno">  511</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 33, addr_data);</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>  <span class="comment">//config phase </span></div>
<div class="line"><span class="lineno">  514</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i=0; i&lt;4; i++)</div>
<div class="line"><span class="lineno">  515</span>  {</div>
<div class="line"><span class="lineno">  516</span>      addr_data = d14_read_step + (d14_idxm_step &lt;&lt;16);</div>
<div class="line"><span class="lineno">  517</span>      <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 35, addr_data);</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>      addr_data = d14_idxl_step + (d14_idl0_step &lt;&lt;16);</div>
<div class="line"><span class="lineno">  520</span>      <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 36, addr_data);</div>
<div class="line"><span class="lineno">  521</span>       </div>
<div class="line"><span class="lineno">  522</span>      d14_phase_en = d14_phase_en ^ 1;</div>
<div class="line"><span class="lineno">  523</span>      uint32_t d14_ud = d14_read_ud + (d14_idxm_ud&lt;&lt;1) + (d14_idxl_ud&lt;&lt;2)+ (d14_idl0_ud&lt;&lt;3)+ (d14_idl1_ud&lt;&lt;4) + (d14_phase_en &lt;&lt;15);</div>
<div class="line"><span class="lineno">  524</span>      addr_data = d14_idl1_step + (d14_ud&lt;&lt;16);</div>
<div class="line"><span class="lineno">  525</span>      <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 37, addr_data);</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>      addr_data = d58_read_step + (d58_idxm_step &lt;&lt;16);</div>
<div class="line"><span class="lineno">  528</span>      <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 38, addr_data);</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>      addr_data = d58_idxl_step + (d58_idl0_step &lt;&lt;16);</div>
<div class="line"><span class="lineno">  531</span>      <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 39, addr_data);</div>
<div class="line"><span class="lineno">  532</span>      </div>
<div class="line"><span class="lineno">  533</span>      d58_phase_en = d58_phase_en ^ 1;</div>
<div class="line"><span class="lineno">  534</span>      uint32_t d58_ud = d58_read_ud + (d58_idxm_ud&lt;&lt;1) + (d58_idxl_ud&lt;&lt;2)+ (d58_idl0_ud&lt;&lt;3)+ (d58_idl1_ud&lt;&lt;4) + (d58_phase_en &lt;&lt;15);</div>
<div class="line"><span class="lineno">  535</span>      addr_data = d58_idl1_step + (d58_ud &lt;&lt;16);</div>
<div class="line"><span class="lineno">  536</span>      <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 40, addr_data);</div>
<div class="line"><span class="lineno">  537</span>  } </div>
<div class="line"><span class="lineno">  538</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.05);</div>
<div class="line"><span class="lineno">  539</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6e6e694b21bf8e4b9f85aef5f748307" name="ae6e6e694b21bf8e4b9f85aef5f748307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6e6e694b21bf8e4b9f85aef5f748307">&#9670;&#160;</a></span>SetupFPGAPulser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetupFPGAPulser </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dac_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l00912">912</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  912</span>                                                       {</div>
<div class="line"><span class="lineno">  913</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; Configuring FPGA pulser with DAC value: &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(dac_val) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;ASIC_TP_EN&quot;</span>, 0 );</div>
<div class="line"><span class="lineno">  916</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;FPGA_TP_EN&quot;</span>, 1 );</div>
<div class="line"><span class="lineno">  917</span> </div>
<div class="line"><span class="lineno">  918</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;DAC_SELECT&quot;</span>, 1 );</div>
<div class="line"><span class="lineno">  919</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TEST_PULSE_AMPLITUDE&quot;</span>, dac_val );</div>
<div class="line"><span class="lineno">  920</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TEST_PULSE_DELAY&quot;</span>, 219 );</div>
<div class="line"><span class="lineno">  921</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TEST_PULSE_PERIOD&quot;</span>, 497 );</div>
<div class="line"><span class="lineno">  922</span> </div>
<div class="line"><span class="lineno">  923</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;INT_TP_EN&quot;</span>, 0 );</div>
<div class="line"><span class="lineno">  924</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;EXT_TP_EN&quot;</span>, 1 );</div>
<div class="line"><span class="lineno">  925</span> </div>
<div class="line"><span class="lineno">  926</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa60b1350feac33a4908cde93bf369211" name="aa60b1350feac33a4908cde93bf369211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa60b1350feac33a4908cde93bf369211">&#9670;&#160;</a></span>SetupInternalPulser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SetupInternalPulser </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l00928">928</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  928</span>                                          {</div>
<div class="line"><span class="lineno">  929</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; Configuring internal pulser&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;DAC_SELECT&quot;</span>, 0 );</div>
<div class="line"><span class="lineno">  932</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TEST_PULSE_AMPLITUDE&quot;</span>, 0 );</div>
<div class="line"><span class="lineno">  933</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TEST_PULSE_DELAY&quot;</span>, 219 );</div>
<div class="line"><span class="lineno">  934</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;TEST_PULSE_PERIOD&quot;</span>, 497 );</div>
<div class="line"><span class="lineno">  935</span> </div>
<div class="line"><span class="lineno">  936</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;INT_TP_EN&quot;</span>, 0 );</div>
<div class="line"><span class="lineno">  937</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;EXT_TP_EN&quot;</span>, 1 );</div>
<div class="line"><span class="lineno">  938</span> </div>
<div class="line"><span class="lineno">  939</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;FPGA_TP_EN&quot;</span>, 0 );</div>
<div class="line"><span class="lineno">  940</span>  <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, <span class="stringliteral">&quot;ASIC_TP_EN&quot;</span>, 1 );</div>
<div class="line"><span class="lineno">  941</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac292fdbd2e2c5dca03433c78d2afef6b" name="ac292fdbd2e2c5dca03433c78d2afef6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac292fdbd2e2c5dca03433c78d2afef6b">&#9670;&#160;</a></span>SourceFEMB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::SourceFEMB </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>iDAQLink</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>real</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00626">626</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  626</span>                                                 {</div>
<div class="line"><span class="lineno">  627</span>  <span class="keywordflow">if</span>(iFEMB &lt; 1){</div>
<div class="line"><span class="lineno">  628</span>    printf(<span class="stringliteral">&quot;FEMB index out of range &lt; 1\n&quot;</span>);</div>
<div class="line"><span class="lineno">  629</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  630</span>  }</div>
<div class="line"><span class="lineno">  631</span>  </div>
<div class="line"><span class="lineno">  632</span><span class="comment">/*  if(DAQMode == RCE &amp;&amp; iFEMB &gt; 4){</span></div>
<div class="line"><span class="lineno">  633</span><span class="comment">    printf(&quot;FEMB index out of range &gt; 4 (RCE) \n&quot;);</span></div>
<div class="line"><span class="lineno">  634</span><span class="comment">    return;}</span></div>
<div class="line"><span class="lineno">  635</span><span class="comment">  if(DAQMode == FELIX &amp;&amp; iFEMB &gt; 2){</span></div>
<div class="line"><span class="lineno">  636</span><span class="comment">    printf(&quot;FEMB index out of range &gt; 2 (FELIX) \n&quot;);</span></div>
<div class="line"><span class="lineno">  637</span><span class="comment">    return;}</span></div>
<div class="line"><span class="lineno">  638</span><span class="comment">  */</span></div>
<div class="line"><span class="lineno">  639</span>  std::string address(<span class="stringliteral">&quot;FEMB&quot;</span>);</div>
<div class="line"><span class="lineno">  640</span>  address.push_back(<a class="code hl_function" href="classWIB.html#ae61504060a5708edc9593dd52e6b8c4b">GetFEMBChar</a>(iFEMB));</div>
<div class="line"><span class="lineno">  641</span>  address.append(<span class="stringliteral">&quot;.DAQ.FAKE_CD.FAKE_SOURCE&quot;</span>);</div>
<div class="line"><span class="lineno">  642</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(address,real); </div>
<div class="line"><span class="lineno">  643</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6507aafc38c493cccd900938811b5e11" name="a6507aafc38c493cccd900938811b5e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6507aafc38c493cccd900938811b5e11">&#9670;&#160;</a></span>StartEventBuilder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::StartEventBuilder </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mask</em> = <code>0xF</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af059dc7ffcb545a19786160c3600ab3a" name="af059dc7ffcb545a19786160c3600ab3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af059dc7ffcb545a19786160c3600ab3a">&#9670;&#160;</a></span>StartStreamToDAQ()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::StartStreamToDAQ </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>l1</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>l2</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>l3</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>l4</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8cpp_source.html#l00411">411</a> of file <a class="el" href="WIB_8cpp_source.html">WIB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  411</span>                                                                                                         {</div>
<div class="line"><span class="lineno">  412</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a0bd641f68ee74c8d6b15e18318fd17c2">UNKNOWN</a>){</div>
<div class="line"><span class="lineno">  413</span>    BUException::WIB_DAQMODE_UNKNOWN e;</div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">throw</span> e;    </div>
<div class="line"><span class="lineno">  415</span>  }</div>
<div class="line"><span class="lineno">  416</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.HALT&quot;</span>,1);</div>
<div class="line"><span class="lineno">  417</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.ENABLE&quot;</span>,0);</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>  <span class="comment">// get this register so we can leave it in the state it started in</span></div>
<div class="line"><span class="lineno">  421</span>  uint32_t slow_control_dnd = <a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>);</div>
<div class="line"><span class="lineno">  422</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,1);</div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  425</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.FEMB_STOP&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  426</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  427</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.RESET.DAQ_PATH_RESET&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  428</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(1);</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>  <span class="comment">// Enable DAQ links</span></div>
<div class="line"><span class="lineno">  431</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classWIB.html#aa9d129f681000b46c546258c308be38f">DAQMode</a> == <a class="code hl_enumvalue" href="classWIB.html#a22450657af92080a3406b875edc1b2c5a2bc3378bb4b5339ed4d161a385701735">FELIX</a>){</div>
<div class="line"><span class="lineno">  432</span>    <span class="keywordflow">if</span>(link1_enabled) <a class="code hl_function" href="classWIB.html#a7313e28e40b4bc66b57052785602ec8a">EnableDAQLink_Lite</a>(1,1);</div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">if</span>(link2_enabled) <a class="code hl_function" href="classWIB.html#a7313e28e40b4bc66b57052785602ec8a">EnableDAQLink_Lite</a>(2,1);</div>
<div class="line"><span class="lineno">  434</span>  }</div>
<div class="line"><span class="lineno">  435</span>  <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordflow">if</span>(link3_enabled) <a class="code hl_function" href="classWIB.html#a7313e28e40b4bc66b57052785602ec8a">EnableDAQLink_Lite</a>(3,1);</div>
<div class="line"><span class="lineno">  437</span>    <span class="keywordflow">if</span>(link4_enabled) <a class="code hl_function" href="classWIB.html#a7313e28e40b4bc66b57052785602ec8a">EnableDAQLink_Lite</a>(4,1);</div>
<div class="line"><span class="lineno">  438</span>  }</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>  <span class="comment">// Enable the FEMB to align to idle and wait for convert</span></div>
<div class="line"><span class="lineno">  441</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB1.DAQ.ENABLE&quot;</span>,0xF);  </div>
<div class="line"><span class="lineno">  442</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB2.DAQ.ENABLE&quot;</span>,0xF);  </div>
<div class="line"><span class="lineno">  443</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB3.DAQ.ENABLE&quot;</span>,0xF);  </div>
<div class="line"><span class="lineno">  444</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB4.DAQ.ENABLE&quot;</span>,0xF);  </div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>  <span class="comment">// Start sending characters from the FEMB</span></div>
<div class="line"><span class="lineno">  447</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;FEMB_CNC.ENABLE_DTS_CMDS&quot;</span>,1);  </div>
<div class="line"><span class="lineno">  448</span>  <a class="code hl_function" href="classWIB.html#a640f151de6e3b5f142bd80c43496f7d8">StartSyncDTS</a>();</div>
<div class="line"><span class="lineno">  449</span>  <span class="comment">//  Write(&quot;FEMB_CNC.TIMESTAMP_RESET&quot;,1);  </span></div>
<div class="line"><span class="lineno">  450</span>  <span class="comment">//Write(&quot;FEMB_CNC.FEMB_START&quot;,1);  </span></div>
<div class="line"><span class="lineno">  451</span>  <span class="comment">//  Write(&quot;SYSTEM.RESET.FEMB_COUNTER_RESET&quot;,1);  </span></div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.SLOW_CONTROL_DND&quot;</span>,slow_control_dnd);</div>
<div class="line"><span class="lineno">  454</span>}</div>
<div class="ttc" id="aclassWIB_html_a640f151de6e3b5f142bd80c43496f7d8"><div class="ttname"><a href="classWIB.html#a640f151de6e3b5f142bd80c43496f7d8">WIB::StartSyncDTS</a></div><div class="ttdeci">void StartSyncDTS()</div><div class="ttdef"><b>Definition</b> <a href="WIB__DTS_8cpp_source.html#l00163">WIB_DTS.cpp:163</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a640f151de6e3b5f142bd80c43496f7d8" name="a640f151de6e3b5f142bd80c43496f7d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a640f151de6e3b5f142bd80c43496f7d8">&#9670;&#160;</a></span>StartSyncDTS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::StartSyncDTS </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__DTS_8cpp_source.html#l00163">163</a> of file <a class="el" href="WIB__DTS_8cpp_source.html">WIB_DTS.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  163</span>                      {</div>
<div class="line"><span class="lineno">  164</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.HALT&quot;</span>,0);</div>
<div class="line"><span class="lineno">  165</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.ENABLE&quot;</span>,1);</div>
<div class="line"><span class="lineno">  166</span>  <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;DTS.CONVERT_CONTROL.START_SYNC&quot;</span>,1);</div>
<div class="line"><span class="lineno">  167</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a51db2dc5f8128906c2d9ac2c910b880a" name="a51db2dc5f8128906c2d9ac2c910b880a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51db2dc5f8128906c2d9ac2c910b880a">&#9670;&#160;</a></span>StopEventBuilder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::StopEventBuilder </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mask</em> = <code>0xF</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a00e70fff12bc79dc0a50d453cd6d5a78" name="a00e70fff12bc79dc0a50d453cd6d5a78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00e70fff12bc79dc0a50d453cd6d5a78">&#9670;&#160;</a></span>TryFEMBPhases()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::TryFEMBPhases </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint16_t &gt;&#160;</td>
          <td class="paramname"><em>phases</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l01031">1031</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1031</span>                                                                {</div>
<div class="line"><span class="lineno"> 1032</span> </div>
<div class="line"><span class="lineno"> 1033</span>  <span class="keywordtype">size_t</span> nPhases = phases.size();</div>
<div class="line"><span class="lineno"> 1034</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;Searching &quot;</span> &lt;&lt; nPhases &lt;&lt; <span class="stringliteral">&quot; sets of phases:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1035</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> ip = 0; ip &lt; nPhases; ++ip){</div>
<div class="line"><span class="lineno"> 1036</span>    uint16_t phase = phases.at(ip);</div>
<div class="line"><span class="lineno"> 1037</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Set &quot;</span> &lt;&lt; ip &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1038</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\t Phase: &quot;</span> &lt;&lt; std::hex &lt;&lt; std::setw(4) &lt;&lt; phase &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1039</span> </div>
<div class="line"><span class="lineno"> 1040</span>    <a class="code hl_function" href="classWIB.html#afb5bdb31706d3a981484fdf26d9184dc">WriteFEMBPhase</a>(iFEMB,phase);</div>
<div class="line"><span class="lineno"> 1041</span>    <span class="comment">//If it made it this far, it found the correct readback val</span></div>
<div class="line"><span class="lineno"> 1042</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001);</div>
<div class="line"><span class="lineno"> 1043</span>    uint32_t adc_fifo_sync = (<a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, 6) &amp; 0xFFFF0000) &gt;&gt; 16;</div>
<div class="line"><span class="lineno"> 1044</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001);</div>
<div class="line"><span class="lineno"> 1045</span>    adc_fifo_sync = (<a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, 6) &amp; 0xFFFF0000) &gt;&gt; 16; </div>
<div class="line"><span class="lineno"> 1046</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001);</div>
<div class="line"><span class="lineno"> 1047</span> </div>
<div class="line"><span class="lineno"> 1048</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; ADC FIFO sync: &quot;</span> &lt;&lt; std::bitset&lt;16&gt;(adc_fifo_sync) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1049</span>    </div>
<div class="line"><span class="lineno"> 1050</span>    <span class="keywordflow">if</span> (adc_fifo_sync == 0){</div>
<div class="line"><span class="lineno"> 1051</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;FEMB &quot;</span> &lt;&lt; <a class="code hl_variable" href="namespacerecv-restcmd.html#add91469de4facd4d6e717b7ffbcbf56d">int</a>(iFEMB) &lt;&lt; <span class="stringliteral">&quot; ADC FIFO synced&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1052</span>      std::cout &lt;&lt; <span class="stringliteral">&quot;  phase:   &quot;</span> &lt;&lt; std::hex &lt;&lt; std::setw(4) &lt;&lt; std::setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; (uint32_t) phase &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1053</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1054</span>    }</div>
<div class="line"><span class="lineno"> 1055</span>  } </div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span>  <span class="comment">//std::cout &lt;&lt; &quot;Could not find successful phase&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><span class="lineno"> 1058</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1059</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa72da71627de98385e0c973636b4f26" name="aaa72da71627de98385e0c973636b4f26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa72da71627de98385e0c973636b4f26">&#9670;&#160;</a></span>WriteDAQ_SI5342()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::WriteDAQ_SI5342 </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte_count</em> = <code>4</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5342_8cpp_source.html#l00008">8</a> of file <a class="el" href="WIB__SI5342_8cpp_source.html">WIB_SI5342.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    8</span>                                                                           {</div>
<div class="line"><span class="lineno">    9</span>  <a class="code hl_function" href="classWIBBase.html#ab04ba935fc8cfc74eaace8b5dd8c984c">WriteI2C</a>(<span class="stringliteral">&quot;DAQ.SI5342.I2C&quot;</span>,address,value,byte_count);</div>
<div class="line"><span class="lineno">   10</span>}</div>
<div class="ttc" id="aclassWIBBase_html_ab04ba935fc8cfc74eaace8b5dd8c984c"><div class="ttname"><a href="classWIBBase.html#ab04ba935fc8cfc74eaace8b5dd8c984c">WIBBase::WriteI2C</a></div><div class="ttdeci">void WriteI2C(std::string const &amp;base_address, uint16_t I2C_address, uint32_t data, uint8_t byte_count=4, bool ignore_error=false)</div><div class="ttdef"><b>Definition</b> <a href="WIBBase_8cpp_source.html#l00069">WIBBase.cpp:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb5815b41d2fbd78687171c9948d5629" name="afb5815b41d2fbd78687171c9948d5629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb5815b41d2fbd78687171c9948d5629">&#9670;&#160;</a></span>WriteDTS_CDS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::WriteDTS_CDS </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte_count</em> = <code>4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ignore_error</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__CDS_8cpp_source.html#l00017">17</a> of file <a class="el" href="WIB__CDS_8cpp_source.html">WIB_CDS.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   17</span>                                                                                          {</div>
<div class="line"><span class="lineno">   18</span>  <a class="code hl_function" href="classWIBBase.html#ab04ba935fc8cfc74eaace8b5dd8c984c">WriteI2C</a>(<span class="stringliteral">&quot;DTS.CDS.I2C&quot;</span>,address,value,byte_count,ignore_error);</div>
<div class="line"><span class="lineno">   19</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6df6b4ae89ccb9670b7b6b63c0936107" name="a6df6b4ae89ccb9670b7b6b63c0936107"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6df6b4ae89ccb9670b7b6b63c0936107">&#9670;&#160;</a></span>WriteDTS_SI5344()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::WriteDTS_SI5344 </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte_count</em> = <code>4</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__SI5344_8cpp_source.html#l00008">8</a> of file <a class="el" href="WIB__SI5344_8cpp_source.html">WIB_SI5344.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    8</span>                                                                           {</div>
<div class="line"><span class="lineno">    9</span>  <a class="code hl_function" href="classWIBBase.html#ab04ba935fc8cfc74eaace8b5dd8c984c">WriteI2C</a>(<span class="stringliteral">&quot;DTS.SI5344.I2C&quot;</span>,address,value,byte_count);</div>
<div class="line"><span class="lineno">   10</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afb5bdb31706d3a981484fdf26d9184dc" name="afb5bdb31706d3a981484fdf26d9184dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb5bdb31706d3a981484fdf26d9184dc">&#9670;&#160;</a></span>WriteFEMBPhase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::WriteFEMBPhase </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>iFEMB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>clk_phase_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__FEMB_8cpp_source.html#l00943">943</a> of file <a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  943</span>                                                              {</div>
<div class="line"><span class="lineno">  944</span> </div>
<div class="line"><span class="lineno">  945</span>  uint32_t clk_phase_data0 = (clk_phase_data &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><span class="lineno">  946</span>  uint32_t clk_phase_data1 = clk_phase_data &amp; 0xFF;</div>
<div class="line"><span class="lineno">  947</span> </div>
<div class="line"><span class="lineno">  948</span>  uint32_t <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a>;</div>
<div class="line"><span class="lineno">  949</span>  uint32_t read_back;</div>
<div class="line"><span class="lineno">  950</span>  <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><span class="lineno">  951</span>  <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001); </div>
<div class="line"><span class="lineno">  952</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; ++i){</div>
<div class="line"><span class="lineno">  953</span> </div>
<div class="line"><span class="lineno">  954</span>    <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> = (~(clk_phase_data0)) &amp; 0xFF;</div>
<div class="line"><span class="lineno">  955</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 6, data);</div>
<div class="line"><span class="lineno">  956</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001); </div>
<div class="line"><span class="lineno">  957</span>    read_back = <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, 6);</div>
<div class="line"><span class="lineno">  958</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001); </div>
<div class="line"><span class="lineno">  959</span>    <span class="keywordflow">if</span> ( (read_back &amp; 0xFF) == ((~(clk_phase_data0)) &amp; 0xFF) ){</div>
<div class="line"><span class="lineno">  960</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  961</span>    }</div>
<div class="line"><span class="lineno">  962</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  963</span>      count++;</div>
<div class="line"><span class="lineno">  964</span>    }</div>
<div class="line"><span class="lineno">  965</span>  }</div>
<div class="line"><span class="lineno">  966</span>  <span class="keywordflow">if</span>( count &gt;= 10){</div>
<div class="line"><span class="lineno">  967</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;readback val for 0 is different from written data &quot;</span>&lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  968</span>    <span class="comment">//Put in system exit?</span></div>
<div class="line"><span class="lineno">  969</span>  }</div>
<div class="line"><span class="lineno">  970</span>  count = 0;</div>
<div class="line"><span class="lineno">  971</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; ++i){</div>
<div class="line"><span class="lineno">  972</span>    </div>
<div class="line"><span class="lineno">  973</span>    <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> = (~(clk_phase_data1)) &amp; 0xFF; </div>
<div class="line"><span class="lineno">  974</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 15, data);</div>
<div class="line"><span class="lineno">  975</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001); </div>
<div class="line"><span class="lineno">  976</span>    read_back = <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB, 15);</div>
<div class="line"><span class="lineno">  977</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001); </div>
<div class="line"><span class="lineno">  978</span>    <span class="keywordflow">if</span> ( (read_back &amp; 0xFF) == ((~(clk_phase_data1)) &amp; 0xFF) ){</div>
<div class="line"><span class="lineno">  979</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  980</span>    }  </div>
<div class="line"><span class="lineno">  981</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  982</span>      count++;</div>
<div class="line"><span class="lineno">  983</span>    }</div>
<div class="line"><span class="lineno">  984</span>  }</div>
<div class="line"><span class="lineno">  985</span>  <span class="keywordflow">if</span>( count &gt;= 10){</div>
<div class="line"><span class="lineno">  986</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;readback val for 1 is different from written data &quot;</span>&lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  987</span>    <span class="comment">//Put in system exit?</span></div>
<div class="line"><span class="lineno">  988</span>  }</div>
<div class="line"><span class="lineno">  989</span>  count = 0;</div>
<div class="line"><span class="lineno">  990</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; ++i){</div>
<div class="line"><span class="lineno">  991</span>    </div>
<div class="line"><span class="lineno">  992</span>    <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> = clk_phase_data0;</div>
<div class="line"><span class="lineno">  993</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 6, data);</div>
<div class="line"><span class="lineno">  994</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001);</div>
<div class="line"><span class="lineno">  995</span>    </div>
<div class="line"><span class="lineno">  996</span>    read_back = <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,6);</div>
<div class="line"><span class="lineno">  997</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001); </div>
<div class="line"><span class="lineno">  998</span>    <span class="keywordflow">if</span>( (read_back &amp; 0xFF) == ((clk_phase_data0) &amp; 0xFF) ){</div>
<div class="line"><span class="lineno">  999</span>      <span class="keywordflow">break</span>; </div>
<div class="line"><span class="lineno"> 1000</span>    }</div>
<div class="line"><span class="lineno"> 1001</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno"> 1002</span>      count++;</div>
<div class="line"><span class="lineno"> 1003</span>    }</div>
<div class="line"><span class="lineno"> 1004</span>  }</div>
<div class="line"><span class="lineno"> 1005</span>  <span class="keywordflow">if</span>( count &gt;= 10){</div>
<div class="line"><span class="lineno"> 1006</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;readback val for 2 is different from written data &quot;</span>&lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1007</span>    <span class="comment">//Put in system exit?</span></div>
<div class="line"><span class="lineno"> 1008</span>  }</div>
<div class="line"><span class="lineno"> 1009</span>  count = 0;</div>
<div class="line"><span class="lineno"> 1010</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; ++i){</div>
<div class="line"><span class="lineno"> 1011</span>    </div>
<div class="line"><span class="lineno"> 1012</span>    <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a> = clk_phase_data1;</div>
<div class="line"><span class="lineno"> 1013</span>    <a class="code hl_function" href="classWIBBase.html#ab9669f8fe4a34026640169dd0d14bc5d">WriteFEMB</a>(iFEMB, 15, data);</div>
<div class="line"><span class="lineno"> 1014</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001);</div>
<div class="line"><span class="lineno"> 1015</span>    </div>
<div class="line"><span class="lineno"> 1016</span>    read_back = <a class="code hl_function" href="classWIBBase.html#ae2982b68763cf557c93346fa13e0dbc6">ReadFEMB</a>(iFEMB,6);</div>
<div class="line"><span class="lineno"> 1017</span>    <a class="code hl_define" href="WIB__FEMB_8cpp.html#a82b8e21bd452d01ad6d32a0d73fbfdc8">sleep</a>(0.001); </div>
<div class="line"><span class="lineno"> 1018</span>    <span class="keywordflow">if</span>( (read_back &amp; 0xFF) == ((clk_phase_data1) &amp; 0xFF) ){</div>
<div class="line"><span class="lineno"> 1019</span>      <span class="keywordflow">break</span>; </div>
<div class="line"><span class="lineno"> 1020</span>    }</div>
<div class="line"><span class="lineno"> 1021</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno"> 1022</span>      count++;</div>
<div class="line"><span class="lineno"> 1023</span>    }</div>
<div class="line"><span class="lineno"> 1024</span>  }</div>
<div class="line"><span class="lineno"> 1025</span>  <span class="keywordflow">if</span>( count &gt;= 10){</div>
<div class="line"><span class="lineno"> 1026</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;readback val for 3 is different from written data &quot;</span>&lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 1027</span>    <span class="comment">//Put in system exit?</span></div>
<div class="line"><span class="lineno"> 1028</span>  }</div>
<div class="line"><span class="lineno"> 1029</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a587c9cb78f457531bfd0d79c30e5a03c" name="a587c9cb78f457531bfd0d79c30e5a03c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a587c9cb78f457531bfd0d79c30e5a03c">&#9670;&#160;</a></span>WriteFlash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::WriteFlash </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; uint32_t &gt;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>update_percentage</em> = <code>101</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__Flash_8cpp_source.html#l00236">236</a> of file <a class="el" href="WIB__Flash_8cpp_source.html">WIB_Flash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  236</span>                                                                           {</div>
<div class="line"><span class="lineno">  237</span>  <span class="comment">//Setup display if needed</span></div>
<div class="line"><span class="lineno">  238</span>  <span class="keywordtype">bool</span> print_updates = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  239</span>  <span class="keywordflow">if</span>(update_percentage &lt; 100){</div>
<div class="line"><span class="lineno">  240</span>    print_updates = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  241</span>  }</div>
<div class="line"><span class="lineno">  242</span>  <span class="keywordtype">size_t</span> update_delta = (update_percentage * float(flashData.size()))/100;</div>
<div class="line"><span class="lineno">  243</span>  <span class="keywordtype">size_t</span> next_update = update_delta; </div>
<div class="line"><span class="lineno">  244</span>  <span class="keywordflow">if</span>(print_updates){</div>
<div class="line"><span class="lineno">  245</span>    fprintf(stderr,<span class="stringliteral">&quot;   Programming flash\n&quot;</span>);</div>
<div class="line"><span class="lineno">  246</span>    fprintf(stderr,<span class="stringliteral">&quot;   [&quot;</span>);</div>
<div class="line"><span class="lineno">  247</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; 100.0/update_percentage;i++){</div>
<div class="line"><span class="lineno">  248</span>      fprintf(stderr,<span class="stringliteral">&quot;=&quot;</span>);</div>
<div class="line"><span class="lineno">  249</span>    }</div>
<div class="line"><span class="lineno">  250</span>    fprintf(stderr,<span class="stringliteral">&quot;]\n   [&quot;</span>);</div>
<div class="line"><span class="lineno">  251</span>  }</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>  <span class="comment">//program flash in groups of 64 32bit words (256 bytes)</span></div>
<div class="line"><span class="lineno">  255</span>  uint32_t blockRegMapAddress = <a class="code hl_function" href="classWIBBase.html#a8b3111542e2b1288c7f587dc4e478623">GetItem</a>(<span class="stringliteral">&quot;FLASH.DATA00&quot;</span>)-&gt;<a class="code hl_variable" href="classItem.html#a69d28b5450c414860a31292bff6d1c80">address</a>;  <span class="comment">//Address of first of 64 32bit words</span></div>
<div class="line"><span class="lineno">  256</span>  uint32_t flashAddress = 0; <span class="comment">//Address in flash that we are writing to.</span></div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> currentBlockStartIndex = 0; currentBlockStartIndex &lt; flashData.size();){</div>
<div class="line"><span class="lineno">  259</span>    <a class="code hl_function" href="classWIB.html#a9b3d05f77b55fb2750fcc45c1a19d295">FlashCheckBusy</a>();</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>    <span class="comment">//Find size of this block to write (usually just 64 (256bytes)), but the last one might be smaller.</span></div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordtype">size_t</span> blockSize = std::min(<span class="keywordtype">size_t</span>(64),flashData.size()-currentBlockStartIndex);</div>
<div class="line"><span class="lineno">  263</span>    <span class="comment">//Set adddress</span></div>
<div class="line"><span class="lineno">  264</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.ADDRESS&quot;</span>,flashAddress);</div>
<div class="line"><span class="lineno">  265</span>    <span class="comment">//set block size (in bytes and is 1 less than value; 0 means 1 byte, 255 means 256 bytes)</span></div>
<div class="line"><span class="lineno">  266</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.BYTE_COUNT&quot;</span>,(blockSize*<span class="keyword">sizeof</span>(uint32_t))-1); </div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>    <span class="comment">//Write block of data</span></div>
<div class="line"><span class="lineno">  269</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iBlockWord = 0; iBlockWord &lt; blockSize;iBlockWord++){</div>
<div class="line"><span class="lineno">  270</span>      <span class="comment">//arg1: Address in WIB register map of this 32bit word</span></div>
<div class="line"><span class="lineno">  271</span>      <span class="comment">//arg2: Data for this 32bit word reg map address in data vector</span></div>
<div class="line"><span class="lineno">  272</span>      <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(blockRegMapAddress               + iBlockWord,   </div>
<div class="line"><span class="lineno">  273</span>             flashData[currentBlockStartIndex + iBlockWord]); </div>
<div class="line"><span class="lineno">  274</span>    }</div>
<div class="line"><span class="lineno">  275</span>    <span class="comment">//Do the block write</span></div>
<div class="line"><span class="lineno">  276</span>    <a class="code hl_function" href="classWIBBase.html#a64a67538bc8d70f7647963437133f4bd">WriteWithRetry</a>(<span class="stringliteral">&quot;FLASH.RUN_COMMAND&quot;</span>,0x1);</div>
<div class="line"><span class="lineno">  277</span>    currentBlockStartIndex += blockSize;</div>
<div class="line"><span class="lineno">  278</span>    flashAddress += blockSize*<span class="keyword">sizeof</span>(uint32_t);</div>
<div class="line"><span class="lineno">  279</span>    </div>
<div class="line"><span class="lineno">  280</span>    <span class="comment">//Update the screen if needed</span></div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordflow">if</span>(print_updates &amp;&amp; (currentBlockStartIndex &gt; next_update)){</div>
<div class="line"><span class="lineno">  282</span>      fprintf(stderr,<span class="stringliteral">&quot;=&quot;</span>);</div>
<div class="line"><span class="lineno">  283</span>      next_update += update_delta;</div>
<div class="line"><span class="lineno">  284</span>    }</div>
<div class="line"><span class="lineno">  285</span>  }</div>
<div class="line"><span class="lineno">  286</span>  <span class="comment">//Update the screen if needed</span></div>
<div class="line"><span class="lineno">  287</span>  <span class="keywordflow">if</span>(print_updates){</div>
<div class="line"><span class="lineno">  288</span>    fprintf(stderr,<span class="stringliteral">&quot;]\n&quot;</span>);</div>
<div class="line"><span class="lineno">  289</span>    fprintf(stderr,<span class="stringliteral">&quot;   done\n&quot;</span>);</div>
<div class="line"><span class="lineno">  290</span>  }</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c7b296ba087bdbc3718fb9adbfa2768" name="a4c7b296ba087bdbc3718fb9adbfa2768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c7b296ba087bdbc3718fb9adbfa2768">&#9670;&#160;</a></span>WriteLocalFlash() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::WriteLocalFlash </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint32_t &gt; const &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__localFlash_8cpp_source.html#l00049">49</a> of file <a class="el" href="WIB__localFlash_8cpp_source.html">WIB_localFlash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>                                                                          {</div>
<div class="line"><span class="lineno">   50</span>  <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> iWord = 0; iWord &lt; <a class="code hl_variable" href="namespaceplot__trigprim__output__data.html#a36ddbfa7e38ab6d7667b717c8e86e669">data</a>.size();iWord++){    </div>
<div class="line"><span class="lineno">   51</span>    <a class="code hl_function" href="classWIB.html#ae43d4a5adde26ec3686ec6f95eaa2f2a">WriteLocalFlash</a>(address,data[iWord]);</div>
<div class="line"><span class="lineno">   52</span>    address++;</div>
<div class="line"><span class="lineno">   53</span>  }</div>
<div class="line"><span class="lineno">   54</span>}</div>
<div class="ttc" id="aclassWIB_html_ae43d4a5adde26ec3686ec6f95eaa2f2a"><div class="ttname"><a href="classWIB.html#ae43d4a5adde26ec3686ec6f95eaa2f2a">WIB::WriteLocalFlash</a></div><div class="ttdeci">void WriteLocalFlash(uint16_t address, uint32_t data)</div><div class="ttdef"><b>Definition</b> <a href="WIB__localFlash_8cpp_source.html#l00032">WIB_localFlash.cpp:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae43d4a5adde26ec3686ec6f95eaa2f2a" name="ae43d4a5adde26ec3686ec6f95eaa2f2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae43d4a5adde26ec3686ec6f95eaa2f2a">&#9670;&#160;</a></span>WriteLocalFlash() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::WriteLocalFlash </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__localFlash_8cpp_source.html#l00032">32</a> of file <a class="el" href="WIB__localFlash_8cpp_source.html">WIB_localFlash.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span>                                                        {</div>
<div class="line"><span class="lineno">   33</span>  <span class="comment">//load the address</span></div>
<div class="line"><span class="lineno">   34</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.ADDRESS&quot;</span>,address);</div>
<div class="line"><span class="lineno">   35</span>  <span class="comment">//load the data to write</span></div>
<div class="line"><span class="lineno">   36</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.WR_DATA&quot;</span>,data);</div>
<div class="line"><span class="lineno">   37</span>  </div>
<div class="line"><span class="lineno">   38</span>  <span class="comment">//start the read transaction</span></div>
<div class="line"><span class="lineno">   39</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.RW&quot;</span>,0);</div>
<div class="line"><span class="lineno">   40</span>  <a class="code hl_function" href="classWIBBase.html#ad9b48ced65ab7fc0b0b2ccc938791c1c">Write</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.RUN&quot;</span>,1);</div>
<div class="line"><span class="lineno">   41</span>  <span class="comment">//Wait for finish</span></div>
<div class="line"><span class="lineno">   42</span>  <span class="keywordflow">while</span>(<a class="code hl_function" href="classWIBBase.html#ad0ae5776376bb89db20643a9628e1584">Read</a>(<span class="stringliteral">&quot;SYSTEM.FLASH.DONE&quot;</span>) == 0){</div>
<div class="line"><span class="lineno">   43</span>    <span class="comment">//sleep for 1ms</span></div>
<div class="line"><span class="lineno">   44</span>    usleep(1000);</div>
<div class="line"><span class="lineno">   45</span>  }</div>
<div class="line"><span class="lineno">   46</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fc0ad993681573ef11184caee329b7f" name="a4fc0ad993681573ef11184caee329b7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc0ad993681573ef11184caee329b7f">&#9670;&#160;</a></span>WriteQSFP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WIB::WriteQSFP </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>byte_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB__QSFP_8cpp_source.html#l00007">7</a> of file <a class="el" href="WIB__QSFP_8cpp_source.html">WIB_QSFP.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">    7</span>                                                                     {</div>
<div class="line"><span class="lineno">    8</span>  <a class="code hl_function" href="classWIBBase.html#ab04ba935fc8cfc74eaace8b5dd8c984c">WriteI2C</a>(<span class="stringliteral">&quot;DAQ.QSFP.I2C&quot;</span>,address,value,byte_count);</div>
<div class="line"><span class="lineno">    9</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac93f4f251c09c4f0ebcf2299a0fe4daf" name="ac93f4f251c09c4f0ebcf2299a0fe4daf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac93f4f251c09c4f0ebcf2299a0fe4daf">&#9670;&#160;</a></span>ContinueIfListOfFEMBClockPhasesDontSync</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::ContinueIfListOfFEMBClockPhasesDontSync</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00240">240</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<a id="a1ad9fed71dd8c922993104f6b6822109" name="a1ad9fed71dd8c922993104f6b6822109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ad9fed71dd8c922993104f6b6822109">&#9670;&#160;</a></span>ContinueOnFEMBRegReadError</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::ContinueOnFEMBRegReadError</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00237">237</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<a id="a5f34bbc7c653592b8f8abe147e738666" name="a5f34bbc7c653592b8f8abe147e738666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f34bbc7c653592b8f8abe147e738666">&#9670;&#160;</a></span>ContinueOnFEMBSPIError</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::ContinueOnFEMBSPIError</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00238">238</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<a id="a3d275455a5edd1a5143c96be7868cac1" name="a3d275455a5edd1a5143c96be7868cac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d275455a5edd1a5143c96be7868cac1">&#9670;&#160;</a></span>ContinueOnFEMBSyncError</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::ContinueOnFEMBSyncError</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00239">239</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<a id="adb9618b5ee613fd1be0fd911e4332cad" name="adb9618b5ee613fd1be0fd911e4332cad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb9618b5ee613fd1be0fd911e4332cad">&#9670;&#160;</a></span>DAQLinkCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::DAQLinkCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00235">235</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<a id="aa9d129f681000b46c546258c308be38f" name="aa9d129f681000b46c546258c308be38f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9d129f681000b46c546258c308be38f">&#9670;&#160;</a></span>DAQMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classWIB.html#a22450657af92080a3406b875edc1b2c5">WIB_DAQ_t</a> WIB::DAQMode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00231">231</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<a id="a2d3fea1eedeb97fb0409855061d5bc6a" name="a2d3fea1eedeb97fb0409855061d5bc6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d3fea1eedeb97fb0409855061d5bc6a">&#9670;&#160;</a></span>FEMBCDACount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::FEMBCDACount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00234">234</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<a id="ad8a0a594cc9504dcdd31372f47ffbef4" name="ad8a0a594cc9504dcdd31372f47ffbef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8a0a594cc9504dcdd31372f47ffbef4">&#9670;&#160;</a></span>FEMBCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::FEMBCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00232">232</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<a id="a713e1bfdc01fa56b930635243be0cddd" name="a713e1bfdc01fa56b930635243be0cddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a713e1bfdc01fa56b930635243be0cddd">&#9670;&#160;</a></span>FEMBStreamCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t WIB::FEMBStreamCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00233">233</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<a id="ac9e4c151daf70b6c2d9bd6ec0d49bc9d" name="ac9e4c151daf70b6c2d9bd6ec0d49bc9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9e4c151daf70b6c2d9bd6ec0d49bc9d">&#9670;&#160;</a></span>started</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool WIB::started</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="WIB_8hh_source.html#l00033">33</a> of file <a class="el" href="WIB_8hh_source.html">WIB.hh</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/wibmod/WIB1/<a class="el" href="WIB_8hh_source.html">WIB.hh</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB_8cpp_source.html">WIB.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__CDS_8cpp_source.html">WIB_CDS.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__DTS_8cpp_source.html">WIB_DTS.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__FAKE__CD_8cpp_source.html">WIB_FAKE_CD.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__FEMB_8cpp_source.html">WIB_FEMB.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__Flash_8cpp_source.html">WIB_Flash.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__History_8cpp_source.html">WIB_History.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__localFlash_8cpp_source.html">WIB_localFlash.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__QSFP_8cpp_source.html">WIB_QSFP.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__SI5342_8cpp_source.html">WIB_SI5342.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__SI5344_8cpp_source.html">WIB_SI5344.cpp</a></li>
<li>/github/workspace/dev_area/sourcecode/wibmod/src/WIB1/<a class="el" href="WIB__spybuffer_8cpp_source.html">WIB_spybuffer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 24 2024 for DUNE-DAQ by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
